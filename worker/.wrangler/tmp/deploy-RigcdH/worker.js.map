{
  "version": 3,
  "sources": ["../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/_internal/utils.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/perf_hooks/performance.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/polyfill/performance.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/console.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/mock/noop.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/node/console.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-console", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/hrtime.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/process.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/tty/read-stream.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/tty/write-stream.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/node-version.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/node/process.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-process", "../../../node_modules/bcryptjs/index.js", "../../../node_modules/jose/dist/webapi/lib/buffer_utils.js", "../../../node_modules/jose/dist/webapi/lib/base64.js", "../../../node_modules/jose/dist/webapi/util/base64url.js", "../../../node_modules/jose/dist/webapi/util/errors.js", "../../../node_modules/jose/dist/webapi/lib/crypto_key.js", "../../../node_modules/jose/dist/webapi/lib/invalid_key_input.js", "../../../node_modules/jose/dist/webapi/lib/is_key_like.js", "../../../node_modules/jose/dist/webapi/lib/is_disjoint.js", "../../../node_modules/jose/dist/webapi/lib/is_object.js", "../../../node_modules/jose/dist/webapi/lib/check_key_length.js", "../../../node_modules/jose/dist/webapi/lib/jwk_to_key.js", "../../../node_modules/jose/dist/webapi/lib/validate_crit.js", "../../../node_modules/jose/dist/webapi/lib/validate_algorithms.js", "../../../node_modules/jose/dist/webapi/lib/is_jwk.js", "../../../node_modules/jose/dist/webapi/lib/normalize_key.js", "../../../node_modules/jose/dist/webapi/lib/check_key_type.js", "../../../node_modules/jose/dist/webapi/lib/subtle_dsa.js", "../../../node_modules/jose/dist/webapi/lib/get_sign_verify_key.js", "../../../node_modules/jose/dist/webapi/lib/verify.js", "../../../node_modules/jose/dist/webapi/jws/flattened/verify.js", "../../../node_modules/jose/dist/webapi/jws/compact/verify.js", "../../../node_modules/jose/dist/webapi/lib/epoch.js", "../../../node_modules/jose/dist/webapi/lib/secs.js", "../../../node_modules/jose/dist/webapi/lib/jwt_claims_set.js", "../../../node_modules/jose/dist/webapi/jwt/verify.js", "../../../node_modules/jose/dist/webapi/lib/sign.js", "../../../node_modules/jose/dist/webapi/jws/flattened/sign.js", "../../../node_modules/jose/dist/webapi/jws/compact/sign.js", "../../../node_modules/jose/dist/webapi/jwt/sign.js", "../../../worker.js"],
  "sourceRoot": "C:\\Users\\ragha\\Desktop\\GitHub\\website\\worker\\.wrangler\\tmp\\deploy-RigcdH",
  "sourcesContent": ["/* @__NO_SIDE_EFFECTS__ */\nexport function rawHeaders(headers) {\n\tconst rawHeaders = [];\n\tfor (const key in headers) {\n\t\tif (Array.isArray(headers[key])) {\n\t\t\tfor (const h of headers[key]) {\n\t\t\t\trawHeaders.push(key, h);\n\t\t\t}\n\t\t} else {\n\t\t\trawHeaders.push(key, headers[key]);\n\t\t}\n\t}\n\treturn rawHeaders;\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function mergeFns(...functions) {\n\treturn function(...args) {\n\t\tfor (const fn of functions) {\n\t\t\tfn(...args);\n\t\t}\n\t};\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function createNotImplementedError(name) {\n\treturn new Error(`[unenv] ${name} is not implemented yet!`);\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplemented(name) {\n\tconst fn = () => {\n\t\tthrow createNotImplementedError(name);\n\t};\n\treturn Object.assign(fn, { __unenv__: true });\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplementedAsync(name) {\n\tconst fn = notImplemented(name);\n\tfn.__promisify__ = () => notImplemented(name + \".__promisify__\");\n\tfn.native = fn;\n\treturn fn;\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplementedClass(name) {\n\treturn class {\n\t\t__unenv__ = true;\n\t\tconstructor() {\n\t\t\tthrow new Error(`[unenv] ${name} is not implemented yet!`);\n\t\t}\n\t};\n}\n", "import { createNotImplementedError } from \"../../../_internal/utils.mjs\";\nconst _timeOrigin = globalThis.performance?.timeOrigin ?? Date.now();\nconst _performanceNow = globalThis.performance?.now ? globalThis.performance.now.bind(globalThis.performance) : () => Date.now() - _timeOrigin;\nconst nodeTiming = {\n\tname: \"node\",\n\tentryType: \"node\",\n\tstartTime: 0,\n\tduration: 0,\n\tnodeStart: 0,\n\tv8Start: 0,\n\tbootstrapComplete: 0,\n\tenvironment: 0,\n\tloopStart: 0,\n\tloopExit: 0,\n\tidleTime: 0,\n\tuvMetricsInfo: {\n\t\tloopCount: 0,\n\t\tevents: 0,\n\t\teventsWaiting: 0\n\t},\n\tdetail: undefined,\n\ttoJSON() {\n\t\treturn this;\n\t}\n};\n// PerformanceEntry\nexport class PerformanceEntry {\n\t__unenv__ = true;\n\tdetail;\n\tentryType = \"event\";\n\tname;\n\tstartTime;\n\tconstructor(name, options) {\n\t\tthis.name = name;\n\t\tthis.startTime = options?.startTime || _performanceNow();\n\t\tthis.detail = options?.detail;\n\t}\n\tget duration() {\n\t\treturn _performanceNow() - this.startTime;\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tentryType: this.entryType,\n\t\t\tstartTime: this.startTime,\n\t\t\tduration: this.duration,\n\t\t\tdetail: this.detail\n\t\t};\n\t}\n}\n// PerformanceMark\nexport const PerformanceMark = class PerformanceMark extends PerformanceEntry {\n\tentryType = \"mark\";\n\tconstructor() {\n\t\t// @ts-ignore\n\t\tsuper(...arguments);\n\t}\n\tget duration() {\n\t\treturn 0;\n\t}\n};\n// PerformanceMark\nexport class PerformanceMeasure extends PerformanceEntry {\n\tentryType = \"measure\";\n}\n// PerformanceResourceTiming\nexport class PerformanceResourceTiming extends PerformanceEntry {\n\tentryType = \"resource\";\n\tserverTiming = [];\n\tconnectEnd = 0;\n\tconnectStart = 0;\n\tdecodedBodySize = 0;\n\tdomainLookupEnd = 0;\n\tdomainLookupStart = 0;\n\tencodedBodySize = 0;\n\tfetchStart = 0;\n\tinitiatorType = \"\";\n\tname = \"\";\n\tnextHopProtocol = \"\";\n\tredirectEnd = 0;\n\tredirectStart = 0;\n\trequestStart = 0;\n\tresponseEnd = 0;\n\tresponseStart = 0;\n\tsecureConnectionStart = 0;\n\tstartTime = 0;\n\ttransferSize = 0;\n\tworkerStart = 0;\n\tresponseStatus = 0;\n}\n// PerformanceObserverEntryList\nexport class PerformanceObserverEntryList {\n\t__unenv__ = true;\n\tgetEntries() {\n\t\treturn [];\n\t}\n\tgetEntriesByName(_name, _type) {\n\t\treturn [];\n\t}\n\tgetEntriesByType(type) {\n\t\treturn [];\n\t}\n}\n// Performance\nexport class Performance {\n\t__unenv__ = true;\n\ttimeOrigin = _timeOrigin;\n\teventCounts = new Map();\n\t_entries = [];\n\t_resourceTimingBufferSize = 0;\n\tnavigation = undefined;\n\ttiming = undefined;\n\ttimerify(_fn, _options) {\n\t\tthrow createNotImplementedError(\"Performance.timerify\");\n\t}\n\tget nodeTiming() {\n\t\treturn nodeTiming;\n\t}\n\teventLoopUtilization() {\n\t\treturn {};\n\t}\n\tmarkResourceTiming() {\n\t\t// TODO: create a new PerformanceResourceTiming entry\n\t\t// so that performance.getEntries, getEntriesByName, and getEntriesByType return it\n\t\t// see: https://nodejs.org/api/perf_hooks.html#performancemarkresourcetimingtiminginfo-requestedurl-initiatortype-global-cachemode-bodyinfo-responsestatus-deliverytype\n\t\treturn new PerformanceResourceTiming(\"\");\n\t}\n\tonresourcetimingbufferfull = null;\n\tnow() {\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\n\t\tif (this.timeOrigin === _timeOrigin) {\n\t\t\treturn _performanceNow();\n\t\t}\n\t\treturn Date.now() - this.timeOrigin;\n\t}\n\tclearMarks(markName) {\n\t\tthis._entries = markName ? this._entries.filter((e) => e.name !== markName) : this._entries.filter((e) => e.entryType !== \"mark\");\n\t}\n\tclearMeasures(measureName) {\n\t\tthis._entries = measureName ? this._entries.filter((e) => e.name !== measureName) : this._entries.filter((e) => e.entryType !== \"measure\");\n\t}\n\tclearResourceTimings() {\n\t\tthis._entries = this._entries.filter((e) => e.entryType !== \"resource\" || e.entryType !== \"navigation\");\n\t}\n\tgetEntries() {\n\t\treturn this._entries;\n\t}\n\tgetEntriesByName(name, type) {\n\t\treturn this._entries.filter((e) => e.name === name && (!type || e.entryType === type));\n\t}\n\tgetEntriesByType(type) {\n\t\treturn this._entries.filter((e) => e.entryType === type);\n\t}\n\tmark(name, options) {\n\t\t// @ts-expect-error constructor is not protected\n\t\tconst entry = new PerformanceMark(name, options);\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tmeasure(measureName, startOrMeasureOptions, endMark) {\n\t\tlet start;\n\t\tlet end;\n\t\tif (typeof startOrMeasureOptions === \"string\") {\n\t\t\tstart = this.getEntriesByName(startOrMeasureOptions, \"mark\")[0]?.startTime;\n\t\t\tend = this.getEntriesByName(endMark, \"mark\")[0]?.startTime;\n\t\t} else {\n\t\t\tstart = Number.parseFloat(startOrMeasureOptions?.start) || this.now();\n\t\t\tend = Number.parseFloat(startOrMeasureOptions?.end) || this.now();\n\t\t}\n\t\tconst entry = new PerformanceMeasure(measureName, {\n\t\t\tstartTime: start,\n\t\t\tdetail: {\n\t\t\t\tstart,\n\t\t\t\tend\n\t\t\t}\n\t\t});\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tsetResourceTimingBufferSize(maxSize) {\n\t\tthis._resourceTimingBufferSize = maxSize;\n\t}\n\taddEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.addEventListener\");\n\t}\n\tremoveEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.removeEventListener\");\n\t}\n\tdispatchEvent(event) {\n\t\tthrow createNotImplementedError(\"Performance.dispatchEvent\");\n\t}\n\ttoJSON() {\n\t\treturn this;\n\t}\n}\n// PerformanceObserver\nexport class PerformanceObserver {\n\t__unenv__ = true;\n\tstatic supportedEntryTypes = [];\n\t_callback = null;\n\tconstructor(callback) {\n\t\tthis._callback = callback;\n\t}\n\ttakeRecords() {\n\t\treturn [];\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.disconnect\");\n\t}\n\tobserve(options) {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.observe\");\n\t}\n\tbind(fn) {\n\t\treturn fn;\n\t}\n\trunInAsyncScope(fn, thisArg, ...args) {\n\t\treturn fn.call(thisArg, ...args);\n\t}\n\tasyncId() {\n\t\treturn 0;\n\t}\n\ttriggerAsyncId() {\n\t\treturn 0;\n\t}\n\temitDestroy() {\n\t\treturn this;\n\t}\n}\n// workerd implements a subset of globalThis.performance (as of last check, only timeOrigin set to 0 + now() implemented)\n// We already use performance.now() from globalThis.performance, if provided (see top of this file)\n// If we detect this condition, we can just use polyfill instead.\nexport const performance = globalThis.performance && \"addEventListener\" in globalThis.performance ? globalThis.performance : new Performance();\n", "import {\n  performance,\n  Performance,\n  PerformanceEntry,\n  PerformanceMark,\n  PerformanceMeasure,\n  PerformanceObserver,\n  PerformanceObserverEntryList,\n  PerformanceResourceTiming\n} from \"node:perf_hooks\";\nglobalThis.performance = performance;\nglobalThis.Performance = Performance;\nglobalThis.PerformanceEntry = PerformanceEntry;\nglobalThis.PerformanceMark = PerformanceMark;\nglobalThis.PerformanceMeasure = PerformanceMeasure;\nglobalThis.PerformanceObserver = PerformanceObserver;\nglobalThis.PerformanceObserverEntryList = PerformanceObserverEntryList;\nglobalThis.PerformanceResourceTiming = PerformanceResourceTiming;\n", "import { Writable } from \"node:stream\";\nimport noop from \"../mock/noop.mjs\";\nimport { notImplemented, notImplementedClass } from \"../_internal/utils.mjs\";\nconst _console = globalThis.console;\n// undocumented public APIs\nexport const _ignoreErrors = true;\nexport const _stderr = new Writable();\nexport const _stdout = new Writable();\nexport const log = _console?.log ?? noop;\nexport const info = _console?.info ?? log;\nexport const trace = _console?.trace ?? info;\nexport const debug = _console?.debug ?? log;\nexport const table = _console?.table ?? log;\nexport const error = _console?.error ?? log;\nexport const warn = _console?.warn ?? error;\n// https://developer.chrome.com/docs/devtools/console/api#createtask\nexport const createTask = _console?.createTask ?? /* @__PURE__ */ notImplemented(\"console.createTask\");\nexport const assert = /* @__PURE__ */ notImplemented(\"console.assert\");\n// noop\nexport const clear = _console?.clear ?? noop;\nexport const count = _console?.count ?? noop;\nexport const countReset = _console?.countReset ?? noop;\nexport const dir = _console?.dir ?? noop;\nexport const dirxml = _console?.dirxml ?? noop;\nexport const group = _console?.group ?? noop;\nexport const groupEnd = _console?.groupEnd ?? noop;\nexport const groupCollapsed = _console?.groupCollapsed ?? noop;\nexport const profile = _console?.profile ?? noop;\nexport const profileEnd = _console?.profileEnd ?? noop;\nexport const time = _console?.time ?? noop;\nexport const timeEnd = _console?.timeEnd ?? noop;\nexport const timeLog = _console?.timeLog ?? noop;\nexport const timeStamp = _console?.timeStamp ?? noop;\nexport const Console = _console?.Console ?? /* @__PURE__ */ notImplementedClass(\"console.Console\");\nexport const _times = /* @__PURE__ */ new Map();\nexport function context() {\n\t// TODO: Should be Console with all the methods\n\treturn _console;\n}\nexport const _stdoutErrorHandler = noop;\nexport const _stderrErrorHandler = noop;\nexport default {\n\t_times,\n\t_ignoreErrors,\n\t_stdoutErrorHandler,\n\t_stderrErrorHandler,\n\t_stdout,\n\t_stderr,\n\tassert,\n\tclear,\n\tConsole,\n\tcount,\n\tcountReset,\n\tdebug,\n\tdir,\n\tdirxml,\n\terror,\n\tcontext,\n\tcreateTask,\n\tgroup,\n\tgroupEnd,\n\tgroupCollapsed,\n\tinfo,\n\tlog,\n\tprofile,\n\tprofileEnd,\n\ttable,\n\ttime,\n\ttimeEnd,\n\ttimeLog,\n\ttimeStamp,\n\ttrace,\n\twarn\n};\n", "export default Object.assign(() => {}, { __unenv__: true });\n", "import {\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times,\n  Console\n} from \"unenv/node/console\";\nexport {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n} from \"unenv/node/console\";\nconst workerdConsole = globalThis[\"console\"];\nexport const {\n  assert,\n  clear,\n  // @ts-expect-error undocumented public API\n  context,\n  count,\n  countReset,\n  // @ts-expect-error undocumented public API\n  createTask,\n  debug,\n  dir,\n  dirxml,\n  error,\n  group,\n  groupCollapsed,\n  groupEnd,\n  info,\n  log,\n  profile,\n  profileEnd,\n  table,\n  time,\n  timeEnd,\n  timeLog,\n  timeStamp,\n  trace,\n  warn\n} = workerdConsole;\nObject.assign(workerdConsole, {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n});\nexport default workerdConsole;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/console\";\nglobalThis.console = defaultExport;", "// https://nodejs.org/api/process.html#processhrtime\nexport const hrtime = /* @__PURE__ */ Object.assign(function hrtime(startTime) {\n\tconst now = Date.now();\n\t// millis to seconds\n\tconst seconds = Math.trunc(now / 1e3);\n\t// convert millis to nanos\n\tconst nanos = now % 1e3 * 1e6;\n\tif (startTime) {\n\t\tlet diffSeconds = seconds - startTime[0];\n\t\tlet diffNanos = nanos - startTime[0];\n\t\tif (diffNanos < 0) {\n\t\t\tdiffSeconds = diffSeconds - 1;\n\t\t\tdiffNanos = 1e9 + diffNanos;\n\t\t}\n\t\treturn [diffSeconds, diffNanos];\n\t}\n\treturn [seconds, nanos];\n}, { bigint: function bigint() {\n\t// Convert milliseconds to nanoseconds\n\treturn BigInt(Date.now() * 1e6);\n} });\n", "import { EventEmitter } from \"node:events\";\nimport { ReadStream, WriteStream } from \"node:tty\";\nimport { notImplemented, createNotImplementedError } from \"../../../_internal/utils.mjs\";\n// node-version.ts is generated at build time\nimport { NODE_VERSION } from \"./node-version.mjs\";\nexport class Process extends EventEmitter {\n\tenv;\n\thrtime;\n\tnextTick;\n\tconstructor(impl) {\n\t\tsuper();\n\t\tthis.env = impl.env;\n\t\tthis.hrtime = impl.hrtime;\n\t\tthis.nextTick = impl.nextTick;\n\t\tfor (const prop of [...Object.getOwnPropertyNames(Process.prototype), ...Object.getOwnPropertyNames(EventEmitter.prototype)]) {\n\t\t\tconst value = this[prop];\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tthis[prop] = value.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\t// --- event emitter ---\n\temitWarning(warning, type, code) {\n\t\tconsole.warn(`${code ? `[${code}] ` : \"\"}${type ? `${type}: ` : \"\"}${warning}`);\n\t}\n\temit(...args) {\n\t\t// @ts-ignore\n\t\treturn super.emit(...args);\n\t}\n\tlisteners(eventName) {\n\t\treturn super.listeners(eventName);\n\t}\n\t// --- stdio (lazy initializers) ---\n\t#stdin;\n\t#stdout;\n\t#stderr;\n\tget stdin() {\n\t\treturn this.#stdin ??= new ReadStream(0);\n\t}\n\tget stdout() {\n\t\treturn this.#stdout ??= new WriteStream(1);\n\t}\n\tget stderr() {\n\t\treturn this.#stderr ??= new WriteStream(2);\n\t}\n\t// --- cwd ---\n\t#cwd = \"/\";\n\tchdir(cwd) {\n\t\tthis.#cwd = cwd;\n\t}\n\tcwd() {\n\t\treturn this.#cwd;\n\t}\n\t// --- dummy props and getters ---\n\tarch = \"\";\n\tplatform = \"\";\n\targv = [];\n\targv0 = \"\";\n\texecArgv = [];\n\texecPath = \"\";\n\ttitle = \"\";\n\tpid = 200;\n\tppid = 100;\n\tget version() {\n\t\treturn `v${NODE_VERSION}`;\n\t}\n\tget versions() {\n\t\treturn { node: NODE_VERSION };\n\t}\n\tget allowedNodeEnvironmentFlags() {\n\t\treturn new Set();\n\t}\n\tget sourceMapsEnabled() {\n\t\treturn false;\n\t}\n\tget debugPort() {\n\t\treturn 0;\n\t}\n\tget throwDeprecation() {\n\t\treturn false;\n\t}\n\tget traceDeprecation() {\n\t\treturn false;\n\t}\n\tget features() {\n\t\treturn {};\n\t}\n\tget release() {\n\t\treturn {};\n\t}\n\tget connected() {\n\t\treturn false;\n\t}\n\tget config() {\n\t\treturn {};\n\t}\n\tget moduleLoadList() {\n\t\treturn [];\n\t}\n\tconstrainedMemory() {\n\t\treturn 0;\n\t}\n\tavailableMemory() {\n\t\treturn 0;\n\t}\n\tuptime() {\n\t\treturn 0;\n\t}\n\tresourceUsage() {\n\t\treturn {};\n\t}\n\t// --- noop methods ---\n\tref() {\n\t\t// noop\n\t}\n\tunref() {\n\t\t// noop\n\t}\n\t// --- unimplemented methods ---\n\tumask() {\n\t\tthrow createNotImplementedError(\"process.umask\");\n\t}\n\tgetBuiltinModule() {\n\t\treturn undefined;\n\t}\n\tgetActiveResourcesInfo() {\n\t\tthrow createNotImplementedError(\"process.getActiveResourcesInfo\");\n\t}\n\texit() {\n\t\tthrow createNotImplementedError(\"process.exit\");\n\t}\n\treallyExit() {\n\t\tthrow createNotImplementedError(\"process.reallyExit\");\n\t}\n\tkill() {\n\t\tthrow createNotImplementedError(\"process.kill\");\n\t}\n\tabort() {\n\t\tthrow createNotImplementedError(\"process.abort\");\n\t}\n\tdlopen() {\n\t\tthrow createNotImplementedError(\"process.dlopen\");\n\t}\n\tsetSourceMapsEnabled() {\n\t\tthrow createNotImplementedError(\"process.setSourceMapsEnabled\");\n\t}\n\tloadEnvFile() {\n\t\tthrow createNotImplementedError(\"process.loadEnvFile\");\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"process.disconnect\");\n\t}\n\tcpuUsage() {\n\t\tthrow createNotImplementedError(\"process.cpuUsage\");\n\t}\n\tsetUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.setUncaughtExceptionCaptureCallback\");\n\t}\n\thasUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.hasUncaughtExceptionCaptureCallback\");\n\t}\n\tinitgroups() {\n\t\tthrow createNotImplementedError(\"process.initgroups\");\n\t}\n\topenStdin() {\n\t\tthrow createNotImplementedError(\"process.openStdin\");\n\t}\n\tassert() {\n\t\tthrow createNotImplementedError(\"process.assert\");\n\t}\n\tbinding() {\n\t\tthrow createNotImplementedError(\"process.binding\");\n\t}\n\t// --- attached interfaces ---\n\tpermission = { has: /* @__PURE__ */ notImplemented(\"process.permission.has\") };\n\treport = {\n\t\tdirectory: \"\",\n\t\tfilename: \"\",\n\t\tsignal: \"SIGUSR2\",\n\t\tcompact: false,\n\t\treportOnFatalError: false,\n\t\treportOnSignal: false,\n\t\treportOnUncaughtException: false,\n\t\tgetReport: /* @__PURE__ */ notImplemented(\"process.report.getReport\"),\n\t\twriteReport: /* @__PURE__ */ notImplemented(\"process.report.writeReport\")\n\t};\n\tfinalization = {\n\t\tregister: /* @__PURE__ */ notImplemented(\"process.finalization.register\"),\n\t\tunregister: /* @__PURE__ */ notImplemented(\"process.finalization.unregister\"),\n\t\tregisterBeforeExit: /* @__PURE__ */ notImplemented(\"process.finalization.registerBeforeExit\")\n\t};\n\tmemoryUsage = Object.assign(() => ({\n\t\tarrayBuffers: 0,\n\t\trss: 0,\n\t\texternal: 0,\n\t\theapTotal: 0,\n\t\theapUsed: 0\n\t}), { rss: () => 0 });\n\t// --- undefined props ---\n\tmainModule = undefined;\n\tdomain = undefined;\n\t// optional\n\tsend = undefined;\n\texitCode = undefined;\n\tchannel = undefined;\n\tgetegid = undefined;\n\tgeteuid = undefined;\n\tgetgid = undefined;\n\tgetgroups = undefined;\n\tgetuid = undefined;\n\tsetegid = undefined;\n\tseteuid = undefined;\n\tsetgid = undefined;\n\tsetgroups = undefined;\n\tsetuid = undefined;\n\t// internals\n\t_events = undefined;\n\t_eventsCount = undefined;\n\t_exiting = undefined;\n\t_maxListeners = undefined;\n\t_debugEnd = undefined;\n\t_debugProcess = undefined;\n\t_fatalException = undefined;\n\t_getActiveHandles = undefined;\n\t_getActiveRequests = undefined;\n\t_kill = undefined;\n\t_preload_modules = undefined;\n\t_rawDebug = undefined;\n\t_startProfilerIdleNotifier = undefined;\n\t_stopProfilerIdleNotifier = undefined;\n\t_tickCallback = undefined;\n\t_disconnect = undefined;\n\t_handleQueue = undefined;\n\t_pendingMessage = undefined;\n\t_channel = undefined;\n\t_send = undefined;\n\t_linkedBinding = undefined;\n}\n", "export class ReadStream {\n\tfd;\n\tisRaw = false;\n\tisTTY = false;\n\tconstructor(fd) {\n\t\tthis.fd = fd;\n\t}\n\tsetRawMode(mode) {\n\t\tthis.isRaw = mode;\n\t\treturn this;\n\t}\n}\n", "export class WriteStream {\n\tfd;\n\tcolumns = 80;\n\trows = 24;\n\tisTTY = false;\n\tconstructor(fd) {\n\t\tthis.fd = fd;\n\t}\n\tclearLine(dir, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tclearScreenDown(callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tcursorTo(x, y, callback) {\n\t\tcallback && typeof callback === \"function\" && callback();\n\t\treturn false;\n\t}\n\tmoveCursor(dx, dy, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tgetColorDepth(env) {\n\t\treturn 1;\n\t}\n\thasColors(count, env) {\n\t\treturn false;\n\t}\n\tgetWindowSize() {\n\t\treturn [this.columns, this.rows];\n\t}\n\twrite(str, encoding, cb) {\n\t\tif (str instanceof Uint8Array) {\n\t\t\tstr = new TextDecoder().decode(str);\n\t\t}\n\t\ttry {\n\t\t\tconsole.log(str);\n\t\t} catch {}\n\t\tcb && typeof cb === \"function\" && cb();\n\t\treturn false;\n\t}\n}\n", "// Extracted from .nvmrc\nexport const NODE_VERSION = \"22.14.0\";\n", "import { hrtime as UnenvHrTime } from \"unenv/node/internal/process/hrtime\";\nimport { Process as UnenvProcess } from \"unenv/node/internal/process/process\";\nconst globalProcess = globalThis[\"process\"];\nexport const getBuiltinModule = globalProcess.getBuiltinModule;\nconst workerdProcess = getBuiltinModule(\"node:process\");\nconst isWorkerdProcessV2 = globalThis.Cloudflare.compatibilityFlags.enable_nodejs_process_v2;\nconst unenvProcess = new UnenvProcess({\n  env: globalProcess.env,\n  // `hrtime` is only available from workerd process v2\n  hrtime: isWorkerdProcessV2 ? workerdProcess.hrtime : UnenvHrTime,\n  // `nextTick` is available from workerd process v1\n  nextTick: workerdProcess.nextTick\n});\nexport const { exit, features, platform } = workerdProcess;\nexport const {\n  // Always implemented by workerd\n  env,\n  // Only implemented in workerd v2\n  hrtime,\n  // Always implemented by workerd\n  nextTick\n} = unenvProcess;\nexport const {\n  _channel,\n  _disconnect,\n  _events,\n  _eventsCount,\n  _handleQueue,\n  _maxListeners,\n  _pendingMessage,\n  _send,\n  assert,\n  disconnect,\n  mainModule\n} = unenvProcess;\nexport const {\n  // @ts-expect-error `_debugEnd` is missing typings\n  _debugEnd,\n  // @ts-expect-error `_debugProcess` is missing typings\n  _debugProcess,\n  // @ts-expect-error `_exiting` is missing typings\n  _exiting,\n  // @ts-expect-error `_fatalException` is missing typings\n  _fatalException,\n  // @ts-expect-error `_getActiveHandles` is missing typings\n  _getActiveHandles,\n  // @ts-expect-error `_getActiveRequests` is missing typings\n  _getActiveRequests,\n  // @ts-expect-error `_kill` is missing typings\n  _kill,\n  // @ts-expect-error `_linkedBinding` is missing typings\n  _linkedBinding,\n  // @ts-expect-error `_preload_modules` is missing typings\n  _preload_modules,\n  // @ts-expect-error `_rawDebug` is missing typings\n  _rawDebug,\n  // @ts-expect-error `_startProfilerIdleNotifier` is missing typings\n  _startProfilerIdleNotifier,\n  // @ts-expect-error `_stopProfilerIdleNotifier` is missing typings\n  _stopProfilerIdleNotifier,\n  // @ts-expect-error `_tickCallback` is missing typings\n  _tickCallback,\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  arch,\n  argv,\n  argv0,\n  availableMemory,\n  // @ts-expect-error `binding` is missing typings\n  binding,\n  channel,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  // @ts-expect-error `domain` is missing typings\n  domain,\n  emit,\n  emitWarning,\n  eventNames,\n  execArgv,\n  execPath,\n  exitCode,\n  finalization,\n  getActiveResourcesInfo,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getMaxListeners,\n  getuid,\n  hasUncaughtExceptionCaptureCallback,\n  // @ts-expect-error `initgroups` is missing typings\n  initgroups,\n  kill,\n  listenerCount,\n  listeners,\n  loadEnvFile,\n  memoryUsage,\n  // @ts-expect-error `moduleLoadList` is missing typings\n  moduleLoadList,\n  off,\n  on,\n  once,\n  // @ts-expect-error `openStdin` is missing typings\n  openStdin,\n  permission,\n  pid,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  // @ts-expect-error `reallyExit` is missing typings\n  reallyExit,\n  ref,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  send,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  setuid,\n  setUncaughtExceptionCaptureCallback,\n  sourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  throwDeprecation,\n  title,\n  traceDeprecation,\n  umask,\n  unref,\n  uptime,\n  version,\n  versions\n} = isWorkerdProcessV2 ? workerdProcess : unenvProcess;\nconst _process = {\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  hasUncaughtExceptionCaptureCallback,\n  setUncaughtExceptionCaptureCallback,\n  loadEnvFile,\n  sourceMapsEnabled,\n  arch,\n  argv,\n  argv0,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  availableMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  disconnect,\n  emit,\n  emitWarning,\n  env,\n  eventNames,\n  execArgv,\n  execPath,\n  exit,\n  finalization,\n  features,\n  getBuiltinModule,\n  getActiveResourcesInfo,\n  getMaxListeners,\n  hrtime,\n  kill,\n  listeners,\n  listenerCount,\n  memoryUsage,\n  nextTick,\n  on,\n  off,\n  once,\n  pid,\n  platform,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  title,\n  throwDeprecation,\n  traceDeprecation,\n  umask,\n  uptime,\n  version,\n  versions,\n  // @ts-expect-error old API\n  domain,\n  initgroups,\n  moduleLoadList,\n  reallyExit,\n  openStdin,\n  assert,\n  binding,\n  send,\n  exitCode,\n  channel,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getuid,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setuid,\n  permission,\n  mainModule,\n  _events,\n  _eventsCount,\n  _exiting,\n  _maxListeners,\n  _debugEnd,\n  _debugProcess,\n  _fatalException,\n  _getActiveHandles,\n  _getActiveRequests,\n  _kill,\n  _preload_modules,\n  _rawDebug,\n  _startProfilerIdleNotifier,\n  _stopProfilerIdleNotifier,\n  _tickCallback,\n  _disconnect,\n  _handleQueue,\n  _pendingMessage,\n  _channel,\n  _send,\n  _linkedBinding\n};\nexport default _process;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/process\";\nglobalThis.process = defaultExport;", "/*\r\n Copyright (c) 2012 Nevins Bartolomeo <nevins.bartolomeo@gmail.com>\r\n Copyright (c) 2012 Shane Girish <shaneGirish@gmail.com>\r\n Copyright (c) 2025 Daniel Wirtz <dcode@dcode.io>\r\n\r\n Redistribution and use in source and binary forms, with or without\r\n modification, are permitted provided that the following conditions\r\n are met:\r\n 1. Redistributions of source code must retain the above copyright\r\n notice, this list of conditions and the following disclaimer.\r\n 2. Redistributions in binary form must reproduce the above copyright\r\n notice, this list of conditions and the following disclaimer in the\r\n documentation and/or other materials provided with the distribution.\r\n 3. The name of the author may not be used to endorse or promote products\r\n derived from this software without specific prior written permission.\r\n\r\n THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR\r\n IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\r\n OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,\r\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\r\n THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n// The Node.js crypto module is used as a fallback for the Web Crypto API. When\r\n// building for the browser, inclusion of the crypto module should be disabled,\r\n// which the package hints at in its package.json for bundlers that support it.\r\nimport nodeCrypto from \"crypto\";\r\n\r\n/**\r\n * The random implementation to use as a fallback.\r\n * @type {?function(number):!Array.<number>}\r\n * @inner\r\n */\r\nvar randomFallback = null;\r\n\r\n/**\r\n * Generates cryptographically secure random bytes.\r\n * @function\r\n * @param {number} len Bytes length\r\n * @returns {!Array.<number>} Random bytes\r\n * @throws {Error} If no random implementation is available\r\n * @inner\r\n */\r\nfunction randomBytes(len) {\r\n  // Web Crypto API. Globally available in the browser and in Node.js >=23.\r\n  try {\r\n    return crypto.getRandomValues(new Uint8Array(len));\r\n  } catch {}\r\n  // Node.js crypto module for non-browser environments.\r\n  try {\r\n    return nodeCrypto.randomBytes(len);\r\n  } catch {}\r\n  // Custom fallback specified with `setRandomFallback`.\r\n  if (!randomFallback) {\r\n    throw Error(\r\n      \"Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative\",\r\n    );\r\n  }\r\n  return randomFallback(len);\r\n}\r\n\r\n/**\r\n * Sets the pseudo random number generator to use as a fallback if neither node's `crypto` module nor the Web Crypto\r\n *  API is available. Please note: It is highly important that the PRNG used is cryptographically secure and that it\r\n *  is seeded properly!\r\n * @param {?function(number):!Array.<number>} random Function taking the number of bytes to generate as its\r\n *  sole argument, returning the corresponding array of cryptographically secure random byte values.\r\n * @see http://nodejs.org/api/crypto.html\r\n * @see http://www.w3.org/TR/WebCryptoAPI/\r\n */\r\nexport function setRandomFallback(random) {\r\n  randomFallback = random;\r\n}\r\n\r\n/**\r\n * Synchronously generates a salt.\r\n * @param {number=} rounds Number of rounds to use, defaults to 10 if omitted\r\n * @param {number=} seed_length Not supported.\r\n * @returns {string} Resulting salt\r\n * @throws {Error} If a random fallback is required but not set\r\n */\r\nexport function genSaltSync(rounds, seed_length) {\r\n  rounds = rounds || GENSALT_DEFAULT_LOG2_ROUNDS;\r\n  if (typeof rounds !== \"number\")\r\n    throw Error(\r\n      \"Illegal arguments: \" + typeof rounds + \", \" + typeof seed_length,\r\n    );\r\n  if (rounds < 4) rounds = 4;\r\n  else if (rounds > 31) rounds = 31;\r\n  var salt = [];\r\n  salt.push(\"$2b$\");\r\n  if (rounds < 10) salt.push(\"0\");\r\n  salt.push(rounds.toString());\r\n  salt.push(\"$\");\r\n  salt.push(base64_encode(randomBytes(BCRYPT_SALT_LEN), BCRYPT_SALT_LEN)); // May throw\r\n  return salt.join(\"\");\r\n}\r\n\r\n/**\r\n * Asynchronously generates a salt.\r\n * @param {(number|function(Error, string=))=} rounds Number of rounds to use, defaults to 10 if omitted\r\n * @param {(number|function(Error, string=))=} seed_length Not supported.\r\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting salt\r\n * @returns {!Promise} If `callback` has been omitted\r\n * @throws {Error} If `callback` is present but not a function\r\n */\r\nexport function genSalt(rounds, seed_length, callback) {\r\n  if (typeof seed_length === \"function\")\r\n    (callback = seed_length), (seed_length = undefined); // Not supported.\r\n  if (typeof rounds === \"function\") (callback = rounds), (rounds = undefined);\r\n  if (typeof rounds === \"undefined\") rounds = GENSALT_DEFAULT_LOG2_ROUNDS;\r\n  else if (typeof rounds !== \"number\")\r\n    throw Error(\"illegal arguments: \" + typeof rounds);\r\n\r\n  function _async(callback) {\r\n    nextTick(function () {\r\n      // Pretty thin, but salting is fast enough\r\n      try {\r\n        callback(null, genSaltSync(rounds));\r\n      } catch (err) {\r\n        callback(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (callback) {\r\n    if (typeof callback !== \"function\")\r\n      throw Error(\"Illegal callback: \" + typeof callback);\r\n    _async(callback);\r\n  } else\r\n    return new Promise(function (resolve, reject) {\r\n      _async(function (err, res) {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n        resolve(res);\r\n      });\r\n    });\r\n}\r\n\r\n/**\r\n * Synchronously generates a hash for the given password.\r\n * @param {string} password Password to hash\r\n * @param {(number|string)=} salt Salt length to generate or salt to use, default to 10\r\n * @returns {string} Resulting hash\r\n */\r\nexport function hashSync(password, salt) {\r\n  if (typeof salt === \"undefined\") salt = GENSALT_DEFAULT_LOG2_ROUNDS;\r\n  if (typeof salt === \"number\") salt = genSaltSync(salt);\r\n  if (typeof password !== \"string\" || typeof salt !== \"string\")\r\n    throw Error(\"Illegal arguments: \" + typeof password + \", \" + typeof salt);\r\n  return _hash(password, salt);\r\n}\r\n\r\n/**\r\n * Asynchronously generates a hash for the given password.\r\n * @param {string} password Password to hash\r\n * @param {number|string} salt Salt length to generate or salt to use\r\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash\r\n * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\r\n *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\r\n * @returns {!Promise} If `callback` has been omitted\r\n * @throws {Error} If `callback` is present but not a function\r\n */\r\nexport function hash(password, salt, callback, progressCallback) {\r\n  function _async(callback) {\r\n    if (typeof password === \"string\" && typeof salt === \"number\")\r\n      genSalt(salt, function (err, salt) {\r\n        _hash(password, salt, callback, progressCallback);\r\n      });\r\n    else if (typeof password === \"string\" && typeof salt === \"string\")\r\n      _hash(password, salt, callback, progressCallback);\r\n    else\r\n      nextTick(\r\n        callback.bind(\r\n          this,\r\n          Error(\"Illegal arguments: \" + typeof password + \", \" + typeof salt),\r\n        ),\r\n      );\r\n  }\r\n\r\n  if (callback) {\r\n    if (typeof callback !== \"function\")\r\n      throw Error(\"Illegal callback: \" + typeof callback);\r\n    _async(callback);\r\n  } else\r\n    return new Promise(function (resolve, reject) {\r\n      _async(function (err, res) {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n        resolve(res);\r\n      });\r\n    });\r\n}\r\n\r\n/**\r\n * Compares two strings of the same length in constant time.\r\n * @param {string} known Must be of the correct length\r\n * @param {string} unknown Must be the same length as `known`\r\n * @returns {boolean}\r\n * @inner\r\n */\r\nfunction safeStringCompare(known, unknown) {\r\n  var diff = known.length ^ unknown.length;\r\n  for (var i = 0; i < known.length; ++i) {\r\n    diff |= known.charCodeAt(i) ^ unknown.charCodeAt(i);\r\n  }\r\n  return diff === 0;\r\n}\r\n\r\n/**\r\n * Synchronously tests a password against a hash.\r\n * @param {string} password Password to compare\r\n * @param {string} hash Hash to test against\r\n * @returns {boolean} true if matching, otherwise false\r\n * @throws {Error} If an argument is illegal\r\n */\r\nexport function compareSync(password, hash) {\r\n  if (typeof password !== \"string\" || typeof hash !== \"string\")\r\n    throw Error(\"Illegal arguments: \" + typeof password + \", \" + typeof hash);\r\n  if (hash.length !== 60) return false;\r\n  return safeStringCompare(\r\n    hashSync(password, hash.substring(0, hash.length - 31)),\r\n    hash,\r\n  );\r\n}\r\n\r\n/**\r\n * Asynchronously tests a password against a hash.\r\n * @param {string} password Password to compare\r\n * @param {string} hashValue Hash to test against\r\n * @param {function(Error, boolean)=} callback Callback receiving the error, if any, otherwise the result\r\n * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\r\n *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\r\n * @returns {!Promise} If `callback` has been omitted\r\n * @throws {Error} If `callback` is present but not a function\r\n */\r\nexport function compare(password, hashValue, callback, progressCallback) {\r\n  function _async(callback) {\r\n    if (typeof password !== \"string\" || typeof hashValue !== \"string\") {\r\n      nextTick(\r\n        callback.bind(\r\n          this,\r\n          Error(\r\n            \"Illegal arguments: \" + typeof password + \", \" + typeof hashValue,\r\n          ),\r\n        ),\r\n      );\r\n      return;\r\n    }\r\n    if (hashValue.length !== 60) {\r\n      nextTick(callback.bind(this, null, false));\r\n      return;\r\n    }\r\n    hash(\r\n      password,\r\n      hashValue.substring(0, 29),\r\n      function (err, comp) {\r\n        if (err) callback(err);\r\n        else callback(null, safeStringCompare(comp, hashValue));\r\n      },\r\n      progressCallback,\r\n    );\r\n  }\r\n\r\n  if (callback) {\r\n    if (typeof callback !== \"function\")\r\n      throw Error(\"Illegal callback: \" + typeof callback);\r\n    _async(callback);\r\n  } else\r\n    return new Promise(function (resolve, reject) {\r\n      _async(function (err, res) {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n        resolve(res);\r\n      });\r\n    });\r\n}\r\n\r\n/**\r\n * Gets the number of rounds used to encrypt the specified hash.\r\n * @param {string} hash Hash to extract the used number of rounds from\r\n * @returns {number} Number of rounds used\r\n * @throws {Error} If `hash` is not a string\r\n */\r\nexport function getRounds(hash) {\r\n  if (typeof hash !== \"string\")\r\n    throw Error(\"Illegal arguments: \" + typeof hash);\r\n  return parseInt(hash.split(\"$\")[2], 10);\r\n}\r\n\r\n/**\r\n * Gets the salt portion from a hash. Does not validate the hash.\r\n * @param {string} hash Hash to extract the salt from\r\n * @returns {string} Extracted salt part\r\n * @throws {Error} If `hash` is not a string or otherwise invalid\r\n */\r\nexport function getSalt(hash) {\r\n  if (typeof hash !== \"string\")\r\n    throw Error(\"Illegal arguments: \" + typeof hash);\r\n  if (hash.length !== 60)\r\n    throw Error(\"Illegal hash length: \" + hash.length + \" != 60\");\r\n  return hash.substring(0, 29);\r\n}\r\n\r\n/**\r\n * Tests if a password will be truncated when hashed, that is its length is\r\n * greater than 72 bytes when converted to UTF-8.\r\n * @param {string} password The password to test\r\n * @returns {boolean} `true` if truncated, otherwise `false`\r\n */\r\nexport function truncates(password) {\r\n  if (typeof password !== \"string\")\r\n    throw Error(\"Illegal arguments: \" + typeof password);\r\n  return utf8Length(password) > 72;\r\n}\r\n\r\n/**\r\n * Continues with the callback on the next tick.\r\n * @function\r\n * @param {function(...[*])} callback Callback to execute\r\n * @inner\r\n */\r\nvar nextTick =\r\n  typeof process !== \"undefined\" &&\r\n  process &&\r\n  typeof process.nextTick === \"function\"\r\n    ? typeof setImmediate === \"function\"\r\n      ? setImmediate\r\n      : process.nextTick\r\n    : setTimeout;\r\n\r\n/** Calculates the byte length of a string encoded as UTF8. */\r\nfunction utf8Length(string) {\r\n  var len = 0,\r\n    c = 0;\r\n  for (var i = 0; i < string.length; ++i) {\r\n    c = string.charCodeAt(i);\r\n    if (c < 128) len += 1;\r\n    else if (c < 2048) len += 2;\r\n    else if (\r\n      (c & 0xfc00) === 0xd800 &&\r\n      (string.charCodeAt(i + 1) & 0xfc00) === 0xdc00\r\n    ) {\r\n      ++i;\r\n      len += 4;\r\n    } else len += 3;\r\n  }\r\n  return len;\r\n}\r\n\r\n/** Converts a string to an array of UTF8 bytes. */\r\nfunction utf8Array(string) {\r\n  var offset = 0,\r\n    c1,\r\n    c2;\r\n  var buffer = new Array(utf8Length(string));\r\n  for (var i = 0, k = string.length; i < k; ++i) {\r\n    c1 = string.charCodeAt(i);\r\n    if (c1 < 128) {\r\n      buffer[offset++] = c1;\r\n    } else if (c1 < 2048) {\r\n      buffer[offset++] = (c1 >> 6) | 192;\r\n      buffer[offset++] = (c1 & 63) | 128;\r\n    } else if (\r\n      (c1 & 0xfc00) === 0xd800 &&\r\n      ((c2 = string.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\r\n    ) {\r\n      c1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff);\r\n      ++i;\r\n      buffer[offset++] = (c1 >> 18) | 240;\r\n      buffer[offset++] = ((c1 >> 12) & 63) | 128;\r\n      buffer[offset++] = ((c1 >> 6) & 63) | 128;\r\n      buffer[offset++] = (c1 & 63) | 128;\r\n    } else {\r\n      buffer[offset++] = (c1 >> 12) | 224;\r\n      buffer[offset++] = ((c1 >> 6) & 63) | 128;\r\n      buffer[offset++] = (c1 & 63) | 128;\r\n    }\r\n  }\r\n  return buffer;\r\n}\r\n\r\n// A base64 implementation for the bcrypt algorithm. This is partly non-standard.\r\n\r\n/**\r\n * bcrypt's own non-standard base64 dictionary.\r\n * @type {!Array.<string>}\r\n * @const\r\n * @inner\r\n **/\r\nvar BASE64_CODE =\r\n  \"./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\"\");\r\n\r\n/**\r\n * @type {!Array.<number>}\r\n * @const\r\n * @inner\r\n **/\r\nvar BASE64_INDEX = [\r\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  -1, -1, -1, -1, -1, -1, -1, -1, 0, 1, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,\r\n  -1, -1, -1, -1, -1, -1, -1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\r\n  16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, -1, -1, -1, -1, -1, -1, 28,\r\n  29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\r\n  48, 49, 50, 51, 52, 53, -1, -1, -1, -1, -1,\r\n];\r\n\r\n/**\r\n * Encodes a byte array to base64 with up to len bytes of input.\r\n * @param {!Array.<number>} b Byte array\r\n * @param {number} len Maximum input length\r\n * @returns {string}\r\n * @inner\r\n */\r\nfunction base64_encode(b, len) {\r\n  var off = 0,\r\n    rs = [],\r\n    c1,\r\n    c2;\r\n  if (len <= 0 || len > b.length) throw Error(\"Illegal len: \" + len);\r\n  while (off < len) {\r\n    c1 = b[off++] & 0xff;\r\n    rs.push(BASE64_CODE[(c1 >> 2) & 0x3f]);\r\n    c1 = (c1 & 0x03) << 4;\r\n    if (off >= len) {\r\n      rs.push(BASE64_CODE[c1 & 0x3f]);\r\n      break;\r\n    }\r\n    c2 = b[off++] & 0xff;\r\n    c1 |= (c2 >> 4) & 0x0f;\r\n    rs.push(BASE64_CODE[c1 & 0x3f]);\r\n    c1 = (c2 & 0x0f) << 2;\r\n    if (off >= len) {\r\n      rs.push(BASE64_CODE[c1 & 0x3f]);\r\n      break;\r\n    }\r\n    c2 = b[off++] & 0xff;\r\n    c1 |= (c2 >> 6) & 0x03;\r\n    rs.push(BASE64_CODE[c1 & 0x3f]);\r\n    rs.push(BASE64_CODE[c2 & 0x3f]);\r\n  }\r\n  return rs.join(\"\");\r\n}\r\n\r\n/**\r\n * Decodes a base64 encoded string to up to len bytes of output.\r\n * @param {string} s String to decode\r\n * @param {number} len Maximum output length\r\n * @returns {!Array.<number>}\r\n * @inner\r\n */\r\nfunction base64_decode(s, len) {\r\n  var off = 0,\r\n    slen = s.length,\r\n    olen = 0,\r\n    rs = [],\r\n    c1,\r\n    c2,\r\n    c3,\r\n    c4,\r\n    o,\r\n    code;\r\n  if (len <= 0) throw Error(\"Illegal len: \" + len);\r\n  while (off < slen - 1 && olen < len) {\r\n    code = s.charCodeAt(off++);\r\n    c1 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n    code = s.charCodeAt(off++);\r\n    c2 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n    if (c1 == -1 || c2 == -1) break;\r\n    o = (c1 << 2) >>> 0;\r\n    o |= (c2 & 0x30) >> 4;\r\n    rs.push(String.fromCharCode(o));\r\n    if (++olen >= len || off >= slen) break;\r\n    code = s.charCodeAt(off++);\r\n    c3 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n    if (c3 == -1) break;\r\n    o = ((c2 & 0x0f) << 4) >>> 0;\r\n    o |= (c3 & 0x3c) >> 2;\r\n    rs.push(String.fromCharCode(o));\r\n    if (++olen >= len || off >= slen) break;\r\n    code = s.charCodeAt(off++);\r\n    c4 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n    o = ((c3 & 0x03) << 6) >>> 0;\r\n    o |= c4;\r\n    rs.push(String.fromCharCode(o));\r\n    ++olen;\r\n  }\r\n  var res = [];\r\n  for (off = 0; off < olen; off++) res.push(rs[off].charCodeAt(0));\r\n  return res;\r\n}\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar BCRYPT_SALT_LEN = 16;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar GENSALT_DEFAULT_LOG2_ROUNDS = 10;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar BLOWFISH_NUM_ROUNDS = 16;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar MAX_EXECUTION_TIME = 100;\r\n\r\n/**\r\n * @type {Array.<number>}\r\n * @const\r\n * @inner\r\n */\r\nvar P_ORIG = [\r\n  0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344, 0xa4093822, 0x299f31d0,\r\n  0x082efa98, 0xec4e6c89, 0x452821e6, 0x38d01377, 0xbe5466cf, 0x34e90c6c,\r\n  0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5, 0xb5470917, 0x9216d5d9, 0x8979fb1b,\r\n];\r\n\r\n/**\r\n * @type {Array.<number>}\r\n * @const\r\n * @inner\r\n */\r\nvar S_ORIG = [\r\n  0xd1310ba6, 0x98dfb5ac, 0x2ffd72db, 0xd01adfb7, 0xb8e1afed, 0x6a267e96,\r\n  0xba7c9045, 0xf12c7f99, 0x24a19947, 0xb3916cf7, 0x0801f2e2, 0x858efc16,\r\n  0x636920d8, 0x71574e69, 0xa458fea3, 0xf4933d7e, 0x0d95748f, 0x728eb658,\r\n  0x718bcd58, 0x82154aee, 0x7b54a41d, 0xc25a59b5, 0x9c30d539, 0x2af26013,\r\n  0xc5d1b023, 0x286085f0, 0xca417918, 0xb8db38ef, 0x8e79dcb0, 0x603a180e,\r\n  0x6c9e0e8b, 0xb01e8a3e, 0xd71577c1, 0xbd314b27, 0x78af2fda, 0x55605c60,\r\n  0xe65525f3, 0xaa55ab94, 0x57489862, 0x63e81440, 0x55ca396a, 0x2aab10b6,\r\n  0xb4cc5c34, 0x1141e8ce, 0xa15486af, 0x7c72e993, 0xb3ee1411, 0x636fbc2a,\r\n  0x2ba9c55d, 0x741831f6, 0xce5c3e16, 0x9b87931e, 0xafd6ba33, 0x6c24cf5c,\r\n  0x7a325381, 0x28958677, 0x3b8f4898, 0x6b4bb9af, 0xc4bfe81b, 0x66282193,\r\n  0x61d809cc, 0xfb21a991, 0x487cac60, 0x5dec8032, 0xef845d5d, 0xe98575b1,\r\n  0xdc262302, 0xeb651b88, 0x23893e81, 0xd396acc5, 0x0f6d6ff3, 0x83f44239,\r\n  0x2e0b4482, 0xa4842004, 0x69c8f04a, 0x9e1f9b5e, 0x21c66842, 0xf6e96c9a,\r\n  0x670c9c61, 0xabd388f0, 0x6a51a0d2, 0xd8542f68, 0x960fa728, 0xab5133a3,\r\n  0x6eef0b6c, 0x137a3be4, 0xba3bf050, 0x7efb2a98, 0xa1f1651d, 0x39af0176,\r\n  0x66ca593e, 0x82430e88, 0x8cee8619, 0x456f9fb4, 0x7d84a5c3, 0x3b8b5ebe,\r\n  0xe06f75d8, 0x85c12073, 0x401a449f, 0x56c16aa6, 0x4ed3aa62, 0x363f7706,\r\n  0x1bfedf72, 0x429b023d, 0x37d0d724, 0xd00a1248, 0xdb0fead3, 0x49f1c09b,\r\n  0x075372c9, 0x80991b7b, 0x25d479d8, 0xf6e8def7, 0xe3fe501a, 0xb6794c3b,\r\n  0x976ce0bd, 0x04c006ba, 0xc1a94fb6, 0x409f60c4, 0x5e5c9ec2, 0x196a2463,\r\n  0x68fb6faf, 0x3e6c53b5, 0x1339b2eb, 0x3b52ec6f, 0x6dfc511f, 0x9b30952c,\r\n  0xcc814544, 0xaf5ebd09, 0xbee3d004, 0xde334afd, 0x660f2807, 0x192e4bb3,\r\n  0xc0cba857, 0x45c8740f, 0xd20b5f39, 0xb9d3fbdb, 0x5579c0bd, 0x1a60320a,\r\n  0xd6a100c6, 0x402c7279, 0x679f25fe, 0xfb1fa3cc, 0x8ea5e9f8, 0xdb3222f8,\r\n  0x3c7516df, 0xfd616b15, 0x2f501ec8, 0xad0552ab, 0x323db5fa, 0xfd238760,\r\n  0x53317b48, 0x3e00df82, 0x9e5c57bb, 0xca6f8ca0, 0x1a87562e, 0xdf1769db,\r\n  0xd542a8f6, 0x287effc3, 0xac6732c6, 0x8c4f5573, 0x695b27b0, 0xbbca58c8,\r\n  0xe1ffa35d, 0xb8f011a0, 0x10fa3d98, 0xfd2183b8, 0x4afcb56c, 0x2dd1d35b,\r\n  0x9a53e479, 0xb6f84565, 0xd28e49bc, 0x4bfb9790, 0xe1ddf2da, 0xa4cb7e33,\r\n  0x62fb1341, 0xcee4c6e8, 0xef20cada, 0x36774c01, 0xd07e9efe, 0x2bf11fb4,\r\n  0x95dbda4d, 0xae909198, 0xeaad8e71, 0x6b93d5a0, 0xd08ed1d0, 0xafc725e0,\r\n  0x8e3c5b2f, 0x8e7594b7, 0x8ff6e2fb, 0xf2122b64, 0x8888b812, 0x900df01c,\r\n  0x4fad5ea0, 0x688fc31c, 0xd1cff191, 0xb3a8c1ad, 0x2f2f2218, 0xbe0e1777,\r\n  0xea752dfe, 0x8b021fa1, 0xe5a0cc0f, 0xb56f74e8, 0x18acf3d6, 0xce89e299,\r\n  0xb4a84fe0, 0xfd13e0b7, 0x7cc43b81, 0xd2ada8d9, 0x165fa266, 0x80957705,\r\n  0x93cc7314, 0x211a1477, 0xe6ad2065, 0x77b5fa86, 0xc75442f5, 0xfb9d35cf,\r\n  0xebcdaf0c, 0x7b3e89a0, 0xd6411bd3, 0xae1e7e49, 0x00250e2d, 0x2071b35e,\r\n  0x226800bb, 0x57b8e0af, 0x2464369b, 0xf009b91e, 0x5563911d, 0x59dfa6aa,\r\n  0x78c14389, 0xd95a537f, 0x207d5ba2, 0x02e5b9c5, 0x83260376, 0x6295cfa9,\r\n  0x11c81968, 0x4e734a41, 0xb3472dca, 0x7b14a94a, 0x1b510052, 0x9a532915,\r\n  0xd60f573f, 0xbc9bc6e4, 0x2b60a476, 0x81e67400, 0x08ba6fb5, 0x571be91f,\r\n  0xf296ec6b, 0x2a0dd915, 0xb6636521, 0xe7b9f9b6, 0xff34052e, 0xc5855664,\r\n  0x53b02d5d, 0xa99f8fa1, 0x08ba4799, 0x6e85076a, 0x4b7a70e9, 0xb5b32944,\r\n  0xdb75092e, 0xc4192623, 0xad6ea6b0, 0x49a7df7d, 0x9cee60b8, 0x8fedb266,\r\n  0xecaa8c71, 0x699a17ff, 0x5664526c, 0xc2b19ee1, 0x193602a5, 0x75094c29,\r\n  0xa0591340, 0xe4183a3e, 0x3f54989a, 0x5b429d65, 0x6b8fe4d6, 0x99f73fd6,\r\n  0xa1d29c07, 0xefe830f5, 0x4d2d38e6, 0xf0255dc1, 0x4cdd2086, 0x8470eb26,\r\n  0x6382e9c6, 0x021ecc5e, 0x09686b3f, 0x3ebaefc9, 0x3c971814, 0x6b6a70a1,\r\n  0x687f3584, 0x52a0e286, 0xb79c5305, 0xaa500737, 0x3e07841c, 0x7fdeae5c,\r\n  0x8e7d44ec, 0x5716f2b8, 0xb03ada37, 0xf0500c0d, 0xf01c1f04, 0x0200b3ff,\r\n  0xae0cf51a, 0x3cb574b2, 0x25837a58, 0xdc0921bd, 0xd19113f9, 0x7ca92ff6,\r\n  0x94324773, 0x22f54701, 0x3ae5e581, 0x37c2dadc, 0xc8b57634, 0x9af3dda7,\r\n  0xa9446146, 0x0fd0030e, 0xecc8c73e, 0xa4751e41, 0xe238cd99, 0x3bea0e2f,\r\n  0x3280bba1, 0x183eb331, 0x4e548b38, 0x4f6db908, 0x6f420d03, 0xf60a04bf,\r\n  0x2cb81290, 0x24977c79, 0x5679b072, 0xbcaf89af, 0xde9a771f, 0xd9930810,\r\n  0xb38bae12, 0xdccf3f2e, 0x5512721f, 0x2e6b7124, 0x501adde6, 0x9f84cd87,\r\n  0x7a584718, 0x7408da17, 0xbc9f9abc, 0xe94b7d8c, 0xec7aec3a, 0xdb851dfa,\r\n  0x63094366, 0xc464c3d2, 0xef1c1847, 0x3215d908, 0xdd433b37, 0x24c2ba16,\r\n  0x12a14d43, 0x2a65c451, 0x50940002, 0x133ae4dd, 0x71dff89e, 0x10314e55,\r\n  0x81ac77d6, 0x5f11199b, 0x043556f1, 0xd7a3c76b, 0x3c11183b, 0x5924a509,\r\n  0xf28fe6ed, 0x97f1fbfa, 0x9ebabf2c, 0x1e153c6e, 0x86e34570, 0xeae96fb1,\r\n  0x860e5e0a, 0x5a3e2ab3, 0x771fe71c, 0x4e3d06fa, 0x2965dcb9, 0x99e71d0f,\r\n  0x803e89d6, 0x5266c825, 0x2e4cc978, 0x9c10b36a, 0xc6150eba, 0x94e2ea78,\r\n  0xa5fc3c53, 0x1e0a2df4, 0xf2f74ea7, 0x361d2b3d, 0x1939260f, 0x19c27960,\r\n  0x5223a708, 0xf71312b6, 0xebadfe6e, 0xeac31f66, 0xe3bc4595, 0xa67bc883,\r\n  0xb17f37d1, 0x018cff28, 0xc332ddef, 0xbe6c5aa5, 0x65582185, 0x68ab9802,\r\n  0xeecea50f, 0xdb2f953b, 0x2aef7dad, 0x5b6e2f84, 0x1521b628, 0x29076170,\r\n  0xecdd4775, 0x619f1510, 0x13cca830, 0xeb61bd96, 0x0334fe1e, 0xaa0363cf,\r\n  0xb5735c90, 0x4c70a239, 0xd59e9e0b, 0xcbaade14, 0xeecc86bc, 0x60622ca7,\r\n  0x9cab5cab, 0xb2f3846e, 0x648b1eaf, 0x19bdf0ca, 0xa02369b9, 0x655abb50,\r\n  0x40685a32, 0x3c2ab4b3, 0x319ee9d5, 0xc021b8f7, 0x9b540b19, 0x875fa099,\r\n  0x95f7997e, 0x623d7da8, 0xf837889a, 0x97e32d77, 0x11ed935f, 0x16681281,\r\n  0x0e358829, 0xc7e61fd6, 0x96dedfa1, 0x7858ba99, 0x57f584a5, 0x1b227263,\r\n  0x9b83c3ff, 0x1ac24696, 0xcdb30aeb, 0x532e3054, 0x8fd948e4, 0x6dbc3128,\r\n  0x58ebf2ef, 0x34c6ffea, 0xfe28ed61, 0xee7c3c73, 0x5d4a14d9, 0xe864b7e3,\r\n  0x42105d14, 0x203e13e0, 0x45eee2b6, 0xa3aaabea, 0xdb6c4f15, 0xfacb4fd0,\r\n  0xc742f442, 0xef6abbb5, 0x654f3b1d, 0x41cd2105, 0xd81e799e, 0x86854dc7,\r\n  0xe44b476a, 0x3d816250, 0xcf62a1f2, 0x5b8d2646, 0xfc8883a0, 0xc1c7b6a3,\r\n  0x7f1524c3, 0x69cb7492, 0x47848a0b, 0x5692b285, 0x095bbf00, 0xad19489d,\r\n  0x1462b174, 0x23820e00, 0x58428d2a, 0x0c55f5ea, 0x1dadf43e, 0x233f7061,\r\n  0x3372f092, 0x8d937e41, 0xd65fecf1, 0x6c223bdb, 0x7cde3759, 0xcbee7460,\r\n  0x4085f2a7, 0xce77326e, 0xa6078084, 0x19f8509e, 0xe8efd855, 0x61d99735,\r\n  0xa969a7aa, 0xc50c06c2, 0x5a04abfc, 0x800bcadc, 0x9e447a2e, 0xc3453484,\r\n  0xfdd56705, 0x0e1e9ec9, 0xdb73dbd3, 0x105588cd, 0x675fda79, 0xe3674340,\r\n  0xc5c43465, 0x713e38d8, 0x3d28f89e, 0xf16dff20, 0x153e21e7, 0x8fb03d4a,\r\n  0xe6e39f2b, 0xdb83adf7, 0xe93d5a68, 0x948140f7, 0xf64c261c, 0x94692934,\r\n  0x411520f7, 0x7602d4f7, 0xbcf46b2e, 0xd4a20068, 0xd4082471, 0x3320f46a,\r\n  0x43b7d4b7, 0x500061af, 0x1e39f62e, 0x97244546, 0x14214f74, 0xbf8b8840,\r\n  0x4d95fc1d, 0x96b591af, 0x70f4ddd3, 0x66a02f45, 0xbfbc09ec, 0x03bd9785,\r\n  0x7fac6dd0, 0x31cb8504, 0x96eb27b3, 0x55fd3941, 0xda2547e6, 0xabca0a9a,\r\n  0x28507825, 0x530429f4, 0x0a2c86da, 0xe9b66dfb, 0x68dc1462, 0xd7486900,\r\n  0x680ec0a4, 0x27a18dee, 0x4f3ffea2, 0xe887ad8c, 0xb58ce006, 0x7af4d6b6,\r\n  0xaace1e7c, 0xd3375fec, 0xce78a399, 0x406b2a42, 0x20fe9e35, 0xd9f385b9,\r\n  0xee39d7ab, 0x3b124e8b, 0x1dc9faf7, 0x4b6d1856, 0x26a36631, 0xeae397b2,\r\n  0x3a6efa74, 0xdd5b4332, 0x6841e7f7, 0xca7820fb, 0xfb0af54e, 0xd8feb397,\r\n  0x454056ac, 0xba489527, 0x55533a3a, 0x20838d87, 0xfe6ba9b7, 0xd096954b,\r\n  0x55a867bc, 0xa1159a58, 0xcca92963, 0x99e1db33, 0xa62a4a56, 0x3f3125f9,\r\n  0x5ef47e1c, 0x9029317c, 0xfdf8e802, 0x04272f70, 0x80bb155c, 0x05282ce3,\r\n  0x95c11548, 0xe4c66d22, 0x48c1133f, 0xc70f86dc, 0x07f9c9ee, 0x41041f0f,\r\n  0x404779a4, 0x5d886e17, 0x325f51eb, 0xd59bc0d1, 0xf2bcc18f, 0x41113564,\r\n  0x257b7834, 0x602a9c60, 0xdff8e8a3, 0x1f636c1b, 0x0e12b4c2, 0x02e1329e,\r\n  0xaf664fd1, 0xcad18115, 0x6b2395e0, 0x333e92e1, 0x3b240b62, 0xeebeb922,\r\n  0x85b2a20e, 0xe6ba0d99, 0xde720c8c, 0x2da2f728, 0xd0127845, 0x95b794fd,\r\n  0x647d0862, 0xe7ccf5f0, 0x5449a36f, 0x877d48fa, 0xc39dfd27, 0xf33e8d1e,\r\n  0x0a476341, 0x992eff74, 0x3a6f6eab, 0xf4f8fd37, 0xa812dc60, 0xa1ebddf8,\r\n  0x991be14c, 0xdb6e6b0d, 0xc67b5510, 0x6d672c37, 0x2765d43b, 0xdcd0e804,\r\n  0xf1290dc7, 0xcc00ffa3, 0xb5390f92, 0x690fed0b, 0x667b9ffb, 0xcedb7d9c,\r\n  0xa091cf0b, 0xd9155ea3, 0xbb132f88, 0x515bad24, 0x7b9479bf, 0x763bd6eb,\r\n  0x37392eb3, 0xcc115979, 0x8026e297, 0xf42e312d, 0x6842ada7, 0xc66a2b3b,\r\n  0x12754ccc, 0x782ef11c, 0x6a124237, 0xb79251e7, 0x06a1bbe6, 0x4bfb6350,\r\n  0x1a6b1018, 0x11caedfa, 0x3d25bdd8, 0xe2e1c3c9, 0x44421659, 0x0a121386,\r\n  0xd90cec6e, 0xd5abea2a, 0x64af674e, 0xda86a85f, 0xbebfe988, 0x64e4c3fe,\r\n  0x9dbc8057, 0xf0f7c086, 0x60787bf8, 0x6003604d, 0xd1fd8346, 0xf6381fb0,\r\n  0x7745ae04, 0xd736fccc, 0x83426b33, 0xf01eab71, 0xb0804187, 0x3c005e5f,\r\n  0x77a057be, 0xbde8ae24, 0x55464299, 0xbf582e61, 0x4e58f48f, 0xf2ddfda2,\r\n  0xf474ef38, 0x8789bdc2, 0x5366f9c3, 0xc8b38e74, 0xb475f255, 0x46fcd9b9,\r\n  0x7aeb2661, 0x8b1ddf84, 0x846a0e79, 0x915f95e2, 0x466e598e, 0x20b45770,\r\n  0x8cd55591, 0xc902de4c, 0xb90bace1, 0xbb8205d0, 0x11a86248, 0x7574a99e,\r\n  0xb77f19b6, 0xe0a9dc09, 0x662d09a1, 0xc4324633, 0xe85a1f02, 0x09f0be8c,\r\n  0x4a99a025, 0x1d6efe10, 0x1ab93d1d, 0x0ba5a4df, 0xa186f20f, 0x2868f169,\r\n  0xdcb7da83, 0x573906fe, 0xa1e2ce9b, 0x4fcd7f52, 0x50115e01, 0xa70683fa,\r\n  0xa002b5c4, 0x0de6d027, 0x9af88c27, 0x773f8641, 0xc3604c06, 0x61a806b5,\r\n  0xf0177a28, 0xc0f586e0, 0x006058aa, 0x30dc7d62, 0x11e69ed7, 0x2338ea63,\r\n  0x53c2dd94, 0xc2c21634, 0xbbcbee56, 0x90bcb6de, 0xebfc7da1, 0xce591d76,\r\n  0x6f05e409, 0x4b7c0188, 0x39720a3d, 0x7c927c24, 0x86e3725f, 0x724d9db9,\r\n  0x1ac15bb4, 0xd39eb8fc, 0xed545578, 0x08fca5b5, 0xd83d7cd3, 0x4dad0fc4,\r\n  0x1e50ef5e, 0xb161e6f8, 0xa28514d9, 0x6c51133c, 0x6fd5c7e7, 0x56e14ec4,\r\n  0x362abfce, 0xddc6c837, 0xd79a3234, 0x92638212, 0x670efa8e, 0x406000e0,\r\n  0x3a39ce37, 0xd3faf5cf, 0xabc27737, 0x5ac52d1b, 0x5cb0679e, 0x4fa33742,\r\n  0xd3822740, 0x99bc9bbe, 0xd5118e9d, 0xbf0f7315, 0xd62d1c7e, 0xc700c47b,\r\n  0xb78c1b6b, 0x21a19045, 0xb26eb1be, 0x6a366eb4, 0x5748ab2f, 0xbc946e79,\r\n  0xc6a376d2, 0x6549c2c8, 0x530ff8ee, 0x468dde7d, 0xd5730a1d, 0x4cd04dc6,\r\n  0x2939bbdb, 0xa9ba4650, 0xac9526e8, 0xbe5ee304, 0xa1fad5f0, 0x6a2d519a,\r\n  0x63ef8ce2, 0x9a86ee22, 0xc089c2b8, 0x43242ef6, 0xa51e03aa, 0x9cf2d0a4,\r\n  0x83c061ba, 0x9be96a4d, 0x8fe51550, 0xba645bd6, 0x2826a2f9, 0xa73a3ae1,\r\n  0x4ba99586, 0xef5562e9, 0xc72fefd3, 0xf752f7da, 0x3f046f69, 0x77fa0a59,\r\n  0x80e4a915, 0x87b08601, 0x9b09e6ad, 0x3b3ee593, 0xe990fd5a, 0x9e34d797,\r\n  0x2cf0b7d9, 0x022b8b51, 0x96d5ac3a, 0x017da67d, 0xd1cf3ed6, 0x7c7d2d28,\r\n  0x1f9f25cf, 0xadf2b89b, 0x5ad6b472, 0x5a88f54c, 0xe029ac71, 0xe019a5e6,\r\n  0x47b0acfd, 0xed93fa9b, 0xe8d3c48d, 0x283b57cc, 0xf8d56629, 0x79132e28,\r\n  0x785f0191, 0xed756055, 0xf7960e44, 0xe3d35e8c, 0x15056dd4, 0x88f46dba,\r\n  0x03a16125, 0x0564f0bd, 0xc3eb9e15, 0x3c9057a2, 0x97271aec, 0xa93a072a,\r\n  0x1b3f6d9b, 0x1e6321f5, 0xf59c66fb, 0x26dcf319, 0x7533d928, 0xb155fdf5,\r\n  0x03563482, 0x8aba3cbb, 0x28517711, 0xc20ad9f8, 0xabcc5167, 0xccad925f,\r\n  0x4de81751, 0x3830dc8e, 0x379d5862, 0x9320f991, 0xea7a90c2, 0xfb3e7bce,\r\n  0x5121ce64, 0x774fbe32, 0xa8b6e37e, 0xc3293d46, 0x48de5369, 0x6413e680,\r\n  0xa2ae0810, 0xdd6db224, 0x69852dfd, 0x09072166, 0xb39a460a, 0x6445c0dd,\r\n  0x586cdecf, 0x1c20c8ae, 0x5bbef7dd, 0x1b588d40, 0xccd2017f, 0x6bb4e3bb,\r\n  0xdda26a7e, 0x3a59ff45, 0x3e350a44, 0xbcb4cdd5, 0x72eacea8, 0xfa6484bb,\r\n  0x8d6612ae, 0xbf3c6f47, 0xd29be463, 0x542f5d9e, 0xaec2771b, 0xf64e6370,\r\n  0x740e0d8d, 0xe75b1357, 0xf8721671, 0xaf537d5d, 0x4040cb08, 0x4eb4e2cc,\r\n  0x34d2466a, 0x0115af84, 0xe1b00428, 0x95983a1d, 0x06b89fb4, 0xce6ea048,\r\n  0x6f3f3b82, 0x3520ab82, 0x011a1d4b, 0x277227f8, 0x611560b1, 0xe7933fdc,\r\n  0xbb3a792b, 0x344525bd, 0xa08839e1, 0x51ce794b, 0x2f32c9b7, 0xa01fbac9,\r\n  0xe01cc87e, 0xbcc7d1f6, 0xcf0111c3, 0xa1e8aac7, 0x1a908749, 0xd44fbd9a,\r\n  0xd0dadecb, 0xd50ada38, 0x0339c32a, 0xc6913667, 0x8df9317c, 0xe0b12b4f,\r\n  0xf79e59b7, 0x43f5bb3a, 0xf2d519ff, 0x27d9459c, 0xbf97222c, 0x15e6fc2a,\r\n  0x0f91fc71, 0x9b941525, 0xfae59361, 0xceb69ceb, 0xc2a86459, 0x12baa8d1,\r\n  0xb6c1075e, 0xe3056a0c, 0x10d25065, 0xcb03a442, 0xe0ec6e0e, 0x1698db3b,\r\n  0x4c98a0be, 0x3278e964, 0x9f1f9532, 0xe0d392df, 0xd3a0342b, 0x8971f21e,\r\n  0x1b0a7441, 0x4ba3348c, 0xc5be7120, 0xc37632d8, 0xdf359f8d, 0x9b992f2e,\r\n  0xe60b6f47, 0x0fe3f11d, 0xe54cda54, 0x1edad891, 0xce6279cf, 0xcd3e7e6f,\r\n  0x1618b166, 0xfd2c1d05, 0x848fd2c5, 0xf6fb2299, 0xf523f357, 0xa6327623,\r\n  0x93a83531, 0x56cccd02, 0xacf08162, 0x5a75ebb5, 0x6e163697, 0x88d273cc,\r\n  0xde966292, 0x81b949d0, 0x4c50901b, 0x71c65614, 0xe6c6c7bd, 0x327a140a,\r\n  0x45e1d006, 0xc3f27b9a, 0xc9aa53fd, 0x62a80f00, 0xbb25bfe2, 0x35bdd2f6,\r\n  0x71126905, 0xb2040222, 0xb6cbcf7c, 0xcd769c2b, 0x53113ec0, 0x1640e3d3,\r\n  0x38abbd60, 0x2547adf0, 0xba38209c, 0xf746ce76, 0x77afa1c5, 0x20756060,\r\n  0x85cbfe4e, 0x8ae88dd8, 0x7aaaf9b0, 0x4cf9aa7e, 0x1948c25c, 0x02fb8a8c,\r\n  0x01c36ae4, 0xd6ebe1f9, 0x90d4f869, 0xa65cdea0, 0x3f09252d, 0xc208e69f,\r\n  0xb74e6132, 0xce77e25b, 0x578fdfe3, 0x3ac372e6,\r\n];\r\n\r\n/**\r\n * @type {Array.<number>}\r\n * @const\r\n * @inner\r\n */\r\nvar C_ORIG = [\r\n  0x4f727068, 0x65616e42, 0x65686f6c, 0x64657253, 0x63727944, 0x6f756274,\r\n];\r\n\r\n/**\r\n * @param {Array.<number>} lr\r\n * @param {number} off\r\n * @param {Array.<number>} P\r\n * @param {Array.<number>} S\r\n * @returns {Array.<number>}\r\n * @inner\r\n */\r\nfunction _encipher(lr, off, P, S) {\r\n  // This is our bottleneck: 1714/1905 ticks / 90% - see profile.txt\r\n  var n,\r\n    l = lr[off],\r\n    r = lr[off + 1];\r\n\r\n  l ^= P[0];\r\n\r\n  /*\r\n    for (var i=0, k=BLOWFISH_NUM_ROUNDS-2; i<=k;)\r\n        // Feistel substitution on left word\r\n        n  = S[l >>> 24],\r\n        n += S[0x100 | ((l >> 16) & 0xff)],\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)],\r\n        n += S[0x300 | (l & 0xff)],\r\n        r ^= n ^ P[++i],\r\n        // Feistel substitution on right word\r\n        n  = S[r >>> 24],\r\n        n += S[0x100 | ((r >> 16) & 0xff)],\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)],\r\n        n += S[0x300 | (r & 0xff)],\r\n        l ^= n ^ P[++i];\r\n    */\r\n\r\n  //The following is an unrolled version of the above loop.\r\n  //Iteration 0\r\n  n = S[l >>> 24];\r\n  n += S[0x100 | ((l >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n  n += S[0x300 | (l & 0xff)];\r\n  r ^= n ^ P[1];\r\n  n = S[r >>> 24];\r\n  n += S[0x100 | ((r >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n  n += S[0x300 | (r & 0xff)];\r\n  l ^= n ^ P[2];\r\n  //Iteration 1\r\n  n = S[l >>> 24];\r\n  n += S[0x100 | ((l >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n  n += S[0x300 | (l & 0xff)];\r\n  r ^= n ^ P[3];\r\n  n = S[r >>> 24];\r\n  n += S[0x100 | ((r >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n  n += S[0x300 | (r & 0xff)];\r\n  l ^= n ^ P[4];\r\n  //Iteration 2\r\n  n = S[l >>> 24];\r\n  n += S[0x100 | ((l >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n  n += S[0x300 | (l & 0xff)];\r\n  r ^= n ^ P[5];\r\n  n = S[r >>> 24];\r\n  n += S[0x100 | ((r >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n  n += S[0x300 | (r & 0xff)];\r\n  l ^= n ^ P[6];\r\n  //Iteration 3\r\n  n = S[l >>> 24];\r\n  n += S[0x100 | ((l >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n  n += S[0x300 | (l & 0xff)];\r\n  r ^= n ^ P[7];\r\n  n = S[r >>> 24];\r\n  n += S[0x100 | ((r >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n  n += S[0x300 | (r & 0xff)];\r\n  l ^= n ^ P[8];\r\n  //Iteration 4\r\n  n = S[l >>> 24];\r\n  n += S[0x100 | ((l >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n  n += S[0x300 | (l & 0xff)];\r\n  r ^= n ^ P[9];\r\n  n = S[r >>> 24];\r\n  n += S[0x100 | ((r >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n  n += S[0x300 | (r & 0xff)];\r\n  l ^= n ^ P[10];\r\n  //Iteration 5\r\n  n = S[l >>> 24];\r\n  n += S[0x100 | ((l >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n  n += S[0x300 | (l & 0xff)];\r\n  r ^= n ^ P[11];\r\n  n = S[r >>> 24];\r\n  n += S[0x100 | ((r >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n  n += S[0x300 | (r & 0xff)];\r\n  l ^= n ^ P[12];\r\n  //Iteration 6\r\n  n = S[l >>> 24];\r\n  n += S[0x100 | ((l >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n  n += S[0x300 | (l & 0xff)];\r\n  r ^= n ^ P[13];\r\n  n = S[r >>> 24];\r\n  n += S[0x100 | ((r >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n  n += S[0x300 | (r & 0xff)];\r\n  l ^= n ^ P[14];\r\n  //Iteration 7\r\n  n = S[l >>> 24];\r\n  n += S[0x100 | ((l >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n  n += S[0x300 | (l & 0xff)];\r\n  r ^= n ^ P[15];\r\n  n = S[r >>> 24];\r\n  n += S[0x100 | ((r >> 16) & 0xff)];\r\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n  n += S[0x300 | (r & 0xff)];\r\n  l ^= n ^ P[16];\r\n\r\n  lr[off] = r ^ P[BLOWFISH_NUM_ROUNDS + 1];\r\n  lr[off + 1] = l;\r\n  return lr;\r\n}\r\n\r\n/**\r\n * @param {Array.<number>} data\r\n * @param {number} offp\r\n * @returns {{key: number, offp: number}}\r\n * @inner\r\n */\r\nfunction _streamtoword(data, offp) {\r\n  for (var i = 0, word = 0; i < 4; ++i)\r\n    (word = (word << 8) | (data[offp] & 0xff)),\r\n      (offp = (offp + 1) % data.length);\r\n  return { key: word, offp: offp };\r\n}\r\n\r\n/**\r\n * @param {Array.<number>} key\r\n * @param {Array.<number>} P\r\n * @param {Array.<number>} S\r\n * @inner\r\n */\r\nfunction _key(key, P, S) {\r\n  var offset = 0,\r\n    lr = [0, 0],\r\n    plen = P.length,\r\n    slen = S.length,\r\n    sw;\r\n  for (var i = 0; i < plen; i++)\r\n    (sw = _streamtoword(key, offset)),\r\n      (offset = sw.offp),\r\n      (P[i] = P[i] ^ sw.key);\r\n  for (i = 0; i < plen; i += 2)\r\n    (lr = _encipher(lr, 0, P, S)), (P[i] = lr[0]), (P[i + 1] = lr[1]);\r\n  for (i = 0; i < slen; i += 2)\r\n    (lr = _encipher(lr, 0, P, S)), (S[i] = lr[0]), (S[i + 1] = lr[1]);\r\n}\r\n\r\n/**\r\n * Expensive key schedule Blowfish.\r\n * @param {Array.<number>} data\r\n * @param {Array.<number>} key\r\n * @param {Array.<number>} P\r\n * @param {Array.<number>} S\r\n * @inner\r\n */\r\nfunction _ekskey(data, key, P, S) {\r\n  var offp = 0,\r\n    lr = [0, 0],\r\n    plen = P.length,\r\n    slen = S.length,\r\n    sw;\r\n  for (var i = 0; i < plen; i++)\r\n    (sw = _streamtoword(key, offp)), (offp = sw.offp), (P[i] = P[i] ^ sw.key);\r\n  offp = 0;\r\n  for (i = 0; i < plen; i += 2)\r\n    (sw = _streamtoword(data, offp)),\r\n      (offp = sw.offp),\r\n      (lr[0] ^= sw.key),\r\n      (sw = _streamtoword(data, offp)),\r\n      (offp = sw.offp),\r\n      (lr[1] ^= sw.key),\r\n      (lr = _encipher(lr, 0, P, S)),\r\n      (P[i] = lr[0]),\r\n      (P[i + 1] = lr[1]);\r\n  for (i = 0; i < slen; i += 2)\r\n    (sw = _streamtoword(data, offp)),\r\n      (offp = sw.offp),\r\n      (lr[0] ^= sw.key),\r\n      (sw = _streamtoword(data, offp)),\r\n      (offp = sw.offp),\r\n      (lr[1] ^= sw.key),\r\n      (lr = _encipher(lr, 0, P, S)),\r\n      (S[i] = lr[0]),\r\n      (S[i + 1] = lr[1]);\r\n}\r\n\r\n/**\r\n * Internaly crypts a string.\r\n * @param {Array.<number>} b Bytes to crypt\r\n * @param {Array.<number>} salt Salt bytes to use\r\n * @param {number} rounds Number of rounds\r\n * @param {function(Error, Array.<number>=)=} callback Callback receiving the error, if any, and the resulting bytes. If\r\n *  omitted, the operation will be performed synchronously.\r\n *  @param {function(number)=} progressCallback Callback called with the current progress\r\n * @returns {!Array.<number>|undefined} Resulting bytes if callback has been omitted, otherwise `undefined`\r\n * @inner\r\n */\r\nfunction _crypt(b, salt, rounds, callback, progressCallback) {\r\n  var cdata = C_ORIG.slice(),\r\n    clen = cdata.length,\r\n    err;\r\n\r\n  // Validate\r\n  if (rounds < 4 || rounds > 31) {\r\n    err = Error(\"Illegal number of rounds (4-31): \" + rounds);\r\n    if (callback) {\r\n      nextTick(callback.bind(this, err));\r\n      return;\r\n    } else throw err;\r\n  }\r\n  if (salt.length !== BCRYPT_SALT_LEN) {\r\n    err = Error(\r\n      \"Illegal salt length: \" + salt.length + \" != \" + BCRYPT_SALT_LEN,\r\n    );\r\n    if (callback) {\r\n      nextTick(callback.bind(this, err));\r\n      return;\r\n    } else throw err;\r\n  }\r\n  rounds = (1 << rounds) >>> 0;\r\n\r\n  var P,\r\n    S,\r\n    i = 0,\r\n    j;\r\n\r\n  //Use typed arrays when available - huge speedup!\r\n  if (typeof Int32Array === \"function\") {\r\n    P = new Int32Array(P_ORIG);\r\n    S = new Int32Array(S_ORIG);\r\n  } else {\r\n    P = P_ORIG.slice();\r\n    S = S_ORIG.slice();\r\n  }\r\n\r\n  _ekskey(salt, b, P, S);\r\n\r\n  /**\r\n   * Calcualtes the next round.\r\n   * @returns {Array.<number>|undefined} Resulting array if callback has been omitted, otherwise `undefined`\r\n   * @inner\r\n   */\r\n  function next() {\r\n    if (progressCallback) progressCallback(i / rounds);\r\n    if (i < rounds) {\r\n      var start = Date.now();\r\n      for (; i < rounds; ) {\r\n        i = i + 1;\r\n        _key(b, P, S);\r\n        _key(salt, P, S);\r\n        if (Date.now() - start > MAX_EXECUTION_TIME) break;\r\n      }\r\n    } else {\r\n      for (i = 0; i < 64; i++)\r\n        for (j = 0; j < clen >> 1; j++) _encipher(cdata, j << 1, P, S);\r\n      var ret = [];\r\n      for (i = 0; i < clen; i++)\r\n        ret.push(((cdata[i] >> 24) & 0xff) >>> 0),\r\n          ret.push(((cdata[i] >> 16) & 0xff) >>> 0),\r\n          ret.push(((cdata[i] >> 8) & 0xff) >>> 0),\r\n          ret.push((cdata[i] & 0xff) >>> 0);\r\n      if (callback) {\r\n        callback(null, ret);\r\n        return;\r\n      } else return ret;\r\n    }\r\n    if (callback) nextTick(next);\r\n  }\r\n\r\n  // Async\r\n  if (typeof callback !== \"undefined\") {\r\n    next();\r\n\r\n    // Sync\r\n  } else {\r\n    var res;\r\n    while (true) if (typeof (res = next()) !== \"undefined\") return res || [];\r\n  }\r\n}\r\n\r\n/**\r\n * Internally hashes a password.\r\n * @param {string} password Password to hash\r\n * @param {?string} salt Salt to use, actually never null\r\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash. If omitted,\r\n *  hashing is performed synchronously.\r\n *  @param {function(number)=} progressCallback Callback called with the current progress\r\n * @returns {string|undefined} Resulting hash if callback has been omitted, otherwise `undefined`\r\n * @inner\r\n */\r\nfunction _hash(password, salt, callback, progressCallback) {\r\n  var err;\r\n  if (typeof password !== \"string\" || typeof salt !== \"string\") {\r\n    err = Error(\"Invalid string / salt: Not a string\");\r\n    if (callback) {\r\n      nextTick(callback.bind(this, err));\r\n      return;\r\n    } else throw err;\r\n  }\r\n\r\n  // Validate the salt\r\n  var minor, offset;\r\n  if (salt.charAt(0) !== \"$\" || salt.charAt(1) !== \"2\") {\r\n    err = Error(\"Invalid salt version: \" + salt.substring(0, 2));\r\n    if (callback) {\r\n      nextTick(callback.bind(this, err));\r\n      return;\r\n    } else throw err;\r\n  }\r\n  if (salt.charAt(2) === \"$\") (minor = String.fromCharCode(0)), (offset = 3);\r\n  else {\r\n    minor = salt.charAt(2);\r\n    if (\r\n      (minor !== \"a\" && minor !== \"b\" && minor !== \"y\") ||\r\n      salt.charAt(3) !== \"$\"\r\n    ) {\r\n      err = Error(\"Invalid salt revision: \" + salt.substring(2, 4));\r\n      if (callback) {\r\n        nextTick(callback.bind(this, err));\r\n        return;\r\n      } else throw err;\r\n    }\r\n    offset = 4;\r\n  }\r\n\r\n  // Extract number of rounds\r\n  if (salt.charAt(offset + 2) > \"$\") {\r\n    err = Error(\"Missing salt rounds\");\r\n    if (callback) {\r\n      nextTick(callback.bind(this, err));\r\n      return;\r\n    } else throw err;\r\n  }\r\n  var r1 = parseInt(salt.substring(offset, offset + 1), 10) * 10,\r\n    r2 = parseInt(salt.substring(offset + 1, offset + 2), 10),\r\n    rounds = r1 + r2,\r\n    real_salt = salt.substring(offset + 3, offset + 25);\r\n  password += minor >= \"a\" ? \"\\x00\" : \"\";\r\n\r\n  var passwordb = utf8Array(password),\r\n    saltb = base64_decode(real_salt, BCRYPT_SALT_LEN);\r\n\r\n  /**\r\n   * Finishes hashing.\r\n   * @param {Array.<number>} bytes Byte array\r\n   * @returns {string}\r\n   * @inner\r\n   */\r\n  function finish(bytes) {\r\n    var res = [];\r\n    res.push(\"$2\");\r\n    if (minor >= \"a\") res.push(minor);\r\n    res.push(\"$\");\r\n    if (rounds < 10) res.push(\"0\");\r\n    res.push(rounds.toString());\r\n    res.push(\"$\");\r\n    res.push(base64_encode(saltb, saltb.length));\r\n    res.push(base64_encode(bytes, C_ORIG.length * 4 - 1));\r\n    return res.join(\"\");\r\n  }\r\n\r\n  // Sync\r\n  if (typeof callback == \"undefined\")\r\n    return finish(_crypt(passwordb, saltb, rounds));\r\n  // Async\r\n  else {\r\n    _crypt(\r\n      passwordb,\r\n      saltb,\r\n      rounds,\r\n      function (err, bytes) {\r\n        if (err) callback(err, null);\r\n        else callback(null, finish(bytes));\r\n      },\r\n      progressCallback,\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Encodes a byte array to base64 with up to len bytes of input, using the custom bcrypt alphabet.\r\n * @function\r\n * @param {!Array.<number>} bytes Byte array\r\n * @param {number} length Maximum input length\r\n * @returns {string}\r\n */\r\nexport function encodeBase64(bytes, length) {\r\n  return base64_encode(bytes, length);\r\n}\r\n\r\n/**\r\n * Decodes a base64 encoded string to up to len bytes of output, using the custom bcrypt alphabet.\r\n * @function\r\n * @param {string} string String to decode\r\n * @param {number} length Maximum output length\r\n * @returns {!Array.<number>}\r\n */\r\nexport function decodeBase64(string, length) {\r\n  return base64_decode(string, length);\r\n}\r\n\r\nexport default {\r\n  setRandomFallback,\r\n  genSaltSync,\r\n  genSalt,\r\n  hashSync,\r\n  hash,\r\n  compareSync,\r\n  compare,\r\n  getRounds,\r\n  getSalt,\r\n  truncates,\r\n  encodeBase64,\r\n  decodeBase64,\r\n};\r\n", "export const encoder = new TextEncoder();\r\nexport const decoder = new TextDecoder();\r\nconst MAX_INT32 = 2 ** 32;\r\nexport function concat(...buffers) {\r\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\r\n    const buf = new Uint8Array(size);\r\n    let i = 0;\r\n    for (const buffer of buffers) {\r\n        buf.set(buffer, i);\r\n        i += buffer.length;\r\n    }\r\n    return buf;\r\n}\r\nfunction writeUInt32BE(buf, value, offset) {\r\n    if (value < 0 || value >= MAX_INT32) {\r\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\r\n    }\r\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\r\n}\r\nexport function uint64be(value) {\r\n    const high = Math.floor(value / MAX_INT32);\r\n    const low = value % MAX_INT32;\r\n    const buf = new Uint8Array(8);\r\n    writeUInt32BE(buf, high, 0);\r\n    writeUInt32BE(buf, low, 4);\r\n    return buf;\r\n}\r\nexport function uint32be(value) {\r\n    const buf = new Uint8Array(4);\r\n    writeUInt32BE(buf, value);\r\n    return buf;\r\n}\r\n", "export function encodeBase64(input) {\r\n    if (Uint8Array.prototype.toBase64) {\r\n        return input.toBase64();\r\n    }\r\n    const CHUNK_SIZE = 0x8000;\r\n    const arr = [];\r\n    for (let i = 0; i < input.length; i += CHUNK_SIZE) {\r\n        arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\r\n    }\r\n    return btoa(arr.join(''));\r\n}\r\nexport function decodeBase64(encoded) {\r\n    if (Uint8Array.fromBase64) {\r\n        return Uint8Array.fromBase64(encoded);\r\n    }\r\n    const binary = atob(encoded);\r\n    const bytes = new Uint8Array(binary.length);\r\n    for (let i = 0; i < binary.length; i++) {\r\n        bytes[i] = binary.charCodeAt(i);\r\n    }\r\n    return bytes;\r\n}\r\n", "import { encoder, decoder } from '../lib/buffer_utils.js';\r\nimport { encodeBase64, decodeBase64 } from '../lib/base64.js';\r\nexport function decode(input) {\r\n    if (Uint8Array.fromBase64) {\r\n        return Uint8Array.fromBase64(typeof input === 'string' ? input : decoder.decode(input), {\r\n            alphabet: 'base64url',\r\n        });\r\n    }\r\n    let encoded = input;\r\n    if (encoded instanceof Uint8Array) {\r\n        encoded = decoder.decode(encoded);\r\n    }\r\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\r\n    try {\r\n        return decodeBase64(encoded);\r\n    }\r\n    catch {\r\n        throw new TypeError('The input to be decoded is not correctly encoded.');\r\n    }\r\n}\r\nexport function encode(input) {\r\n    let unencoded = input;\r\n    if (typeof unencoded === 'string') {\r\n        unencoded = encoder.encode(unencoded);\r\n    }\r\n    if (Uint8Array.prototype.toBase64) {\r\n        return unencoded.toBase64({ alphabet: 'base64url', omitPadding: true });\r\n    }\r\n    return encodeBase64(unencoded).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\r\n}\r\n", "export class JOSEError extends Error {\r\n    static code = 'ERR_JOSE_GENERIC';\r\n    code = 'ERR_JOSE_GENERIC';\r\n    constructor(message, options) {\r\n        super(message, options);\r\n        this.name = this.constructor.name;\r\n        Error.captureStackTrace?.(this, this.constructor);\r\n    }\r\n}\r\nexport class JWTClaimValidationFailed extends JOSEError {\r\n    static code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\r\n    code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\r\n    claim;\r\n    reason;\r\n    payload;\r\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\r\n        super(message, { cause: { claim, reason, payload } });\r\n        this.claim = claim;\r\n        this.reason = reason;\r\n        this.payload = payload;\r\n    }\r\n}\r\nexport class JWTExpired extends JOSEError {\r\n    static code = 'ERR_JWT_EXPIRED';\r\n    code = 'ERR_JWT_EXPIRED';\r\n    claim;\r\n    reason;\r\n    payload;\r\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\r\n        super(message, { cause: { claim, reason, payload } });\r\n        this.claim = claim;\r\n        this.reason = reason;\r\n        this.payload = payload;\r\n    }\r\n}\r\nexport class JOSEAlgNotAllowed extends JOSEError {\r\n    static code = 'ERR_JOSE_ALG_NOT_ALLOWED';\r\n    code = 'ERR_JOSE_ALG_NOT_ALLOWED';\r\n}\r\nexport class JOSENotSupported extends JOSEError {\r\n    static code = 'ERR_JOSE_NOT_SUPPORTED';\r\n    code = 'ERR_JOSE_NOT_SUPPORTED';\r\n}\r\nexport class JWEDecryptionFailed extends JOSEError {\r\n    static code = 'ERR_JWE_DECRYPTION_FAILED';\r\n    code = 'ERR_JWE_DECRYPTION_FAILED';\r\n    constructor(message = 'decryption operation failed', options) {\r\n        super(message, options);\r\n    }\r\n}\r\nexport class JWEInvalid extends JOSEError {\r\n    static code = 'ERR_JWE_INVALID';\r\n    code = 'ERR_JWE_INVALID';\r\n}\r\nexport class JWSInvalid extends JOSEError {\r\n    static code = 'ERR_JWS_INVALID';\r\n    code = 'ERR_JWS_INVALID';\r\n}\r\nexport class JWTInvalid extends JOSEError {\r\n    static code = 'ERR_JWT_INVALID';\r\n    code = 'ERR_JWT_INVALID';\r\n}\r\nexport class JWKInvalid extends JOSEError {\r\n    static code = 'ERR_JWK_INVALID';\r\n    code = 'ERR_JWK_INVALID';\r\n}\r\nexport class JWKSInvalid extends JOSEError {\r\n    static code = 'ERR_JWKS_INVALID';\r\n    code = 'ERR_JWKS_INVALID';\r\n}\r\nexport class JWKSNoMatchingKey extends JOSEError {\r\n    static code = 'ERR_JWKS_NO_MATCHING_KEY';\r\n    code = 'ERR_JWKS_NO_MATCHING_KEY';\r\n    constructor(message = 'no applicable key found in the JSON Web Key Set', options) {\r\n        super(message, options);\r\n    }\r\n}\r\nexport class JWKSMultipleMatchingKeys extends JOSEError {\r\n    [Symbol.asyncIterator];\r\n    static code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\r\n    code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\r\n    constructor(message = 'multiple matching keys found in the JSON Web Key Set', options) {\r\n        super(message, options);\r\n    }\r\n}\r\nexport class JWKSTimeout extends JOSEError {\r\n    static code = 'ERR_JWKS_TIMEOUT';\r\n    code = 'ERR_JWKS_TIMEOUT';\r\n    constructor(message = 'request timed out', options) {\r\n        super(message, options);\r\n    }\r\n}\r\nexport class JWSSignatureVerificationFailed extends JOSEError {\r\n    static code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\r\n    code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\r\n    constructor(message = 'signature verification failed', options) {\r\n        super(message, options);\r\n    }\r\n}\r\n", "function unusable(name, prop = 'algorithm.name') {\r\n    return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`);\r\n}\r\nfunction isAlgorithm(algorithm, name) {\r\n    return algorithm.name === name;\r\n}\r\nfunction getHashLength(hash) {\r\n    return parseInt(hash.name.slice(4), 10);\r\n}\r\nfunction getNamedCurve(alg) {\r\n    switch (alg) {\r\n        case 'ES256':\r\n            return 'P-256';\r\n        case 'ES384':\r\n            return 'P-384';\r\n        case 'ES512':\r\n            return 'P-521';\r\n        default:\r\n            throw new Error('unreachable');\r\n    }\r\n}\r\nfunction checkUsage(key, usage) {\r\n    if (usage && !key.usages.includes(usage)) {\r\n        throw new TypeError(`CryptoKey does not support this operation, its usages must include ${usage}.`);\r\n    }\r\n}\r\nexport function checkSigCryptoKey(key, alg, usage) {\r\n    switch (alg) {\r\n        case 'HS256':\r\n        case 'HS384':\r\n        case 'HS512': {\r\n            if (!isAlgorithm(key.algorithm, 'HMAC'))\r\n                throw unusable('HMAC');\r\n            const expected = parseInt(alg.slice(2), 10);\r\n            const actual = getHashLength(key.algorithm.hash);\r\n            if (actual !== expected)\r\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\r\n            break;\r\n        }\r\n        case 'RS256':\r\n        case 'RS384':\r\n        case 'RS512': {\r\n            if (!isAlgorithm(key.algorithm, 'RSASSA-PKCS1-v1_5'))\r\n                throw unusable('RSASSA-PKCS1-v1_5');\r\n            const expected = parseInt(alg.slice(2), 10);\r\n            const actual = getHashLength(key.algorithm.hash);\r\n            if (actual !== expected)\r\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\r\n            break;\r\n        }\r\n        case 'PS256':\r\n        case 'PS384':\r\n        case 'PS512': {\r\n            if (!isAlgorithm(key.algorithm, 'RSA-PSS'))\r\n                throw unusable('RSA-PSS');\r\n            const expected = parseInt(alg.slice(2), 10);\r\n            const actual = getHashLength(key.algorithm.hash);\r\n            if (actual !== expected)\r\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\r\n            break;\r\n        }\r\n        case 'Ed25519':\r\n        case 'EdDSA': {\r\n            if (!isAlgorithm(key.algorithm, 'Ed25519'))\r\n                throw unusable('Ed25519');\r\n            break;\r\n        }\r\n        case 'ML-DSA-44':\r\n        case 'ML-DSA-65':\r\n        case 'ML-DSA-87': {\r\n            if (!isAlgorithm(key.algorithm, alg))\r\n                throw unusable(alg);\r\n            break;\r\n        }\r\n        case 'ES256':\r\n        case 'ES384':\r\n        case 'ES512': {\r\n            if (!isAlgorithm(key.algorithm, 'ECDSA'))\r\n                throw unusable('ECDSA');\r\n            const expected = getNamedCurve(alg);\r\n            const actual = key.algorithm.namedCurve;\r\n            if (actual !== expected)\r\n                throw unusable(expected, 'algorithm.namedCurve');\r\n            break;\r\n        }\r\n        default:\r\n            throw new TypeError('CryptoKey does not support this operation');\r\n    }\r\n    checkUsage(key, usage);\r\n}\r\nexport function checkEncCryptoKey(key, alg, usage) {\r\n    switch (alg) {\r\n        case 'A128GCM':\r\n        case 'A192GCM':\r\n        case 'A256GCM': {\r\n            if (!isAlgorithm(key.algorithm, 'AES-GCM'))\r\n                throw unusable('AES-GCM');\r\n            const expected = parseInt(alg.slice(1, 4), 10);\r\n            const actual = key.algorithm.length;\r\n            if (actual !== expected)\r\n                throw unusable(expected, 'algorithm.length');\r\n            break;\r\n        }\r\n        case 'A128KW':\r\n        case 'A192KW':\r\n        case 'A256KW': {\r\n            if (!isAlgorithm(key.algorithm, 'AES-KW'))\r\n                throw unusable('AES-KW');\r\n            const expected = parseInt(alg.slice(1, 4), 10);\r\n            const actual = key.algorithm.length;\r\n            if (actual !== expected)\r\n                throw unusable(expected, 'algorithm.length');\r\n            break;\r\n        }\r\n        case 'ECDH': {\r\n            switch (key.algorithm.name) {\r\n                case 'ECDH':\r\n                case 'X25519':\r\n                    break;\r\n                default:\r\n                    throw unusable('ECDH or X25519');\r\n            }\r\n            break;\r\n        }\r\n        case 'PBES2-HS256+A128KW':\r\n        case 'PBES2-HS384+A192KW':\r\n        case 'PBES2-HS512+A256KW':\r\n            if (!isAlgorithm(key.algorithm, 'PBKDF2'))\r\n                throw unusable('PBKDF2');\r\n            break;\r\n        case 'RSA-OAEP':\r\n        case 'RSA-OAEP-256':\r\n        case 'RSA-OAEP-384':\r\n        case 'RSA-OAEP-512': {\r\n            if (!isAlgorithm(key.algorithm, 'RSA-OAEP'))\r\n                throw unusable('RSA-OAEP');\r\n            const expected = parseInt(alg.slice(9), 10) || 1;\r\n            const actual = getHashLength(key.algorithm.hash);\r\n            if (actual !== expected)\r\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\r\n            break;\r\n        }\r\n        default:\r\n            throw new TypeError('CryptoKey does not support this operation');\r\n    }\r\n    checkUsage(key, usage);\r\n}\r\n", "function message(msg, actual, ...types) {\r\n    types = types.filter(Boolean);\r\n    if (types.length > 2) {\r\n        const last = types.pop();\r\n        msg += `one of type ${types.join(', ')}, or ${last}.`;\r\n    }\r\n    else if (types.length === 2) {\r\n        msg += `one of type ${types[0]} or ${types[1]}.`;\r\n    }\r\n    else {\r\n        msg += `of type ${types[0]}.`;\r\n    }\r\n    if (actual == null) {\r\n        msg += ` Received ${actual}`;\r\n    }\r\n    else if (typeof actual === 'function' && actual.name) {\r\n        msg += ` Received function ${actual.name}`;\r\n    }\r\n    else if (typeof actual === 'object' && actual != null) {\r\n        if (actual.constructor?.name) {\r\n            msg += ` Received an instance of ${actual.constructor.name}`;\r\n        }\r\n    }\r\n    return msg;\r\n}\r\nexport default (actual, ...types) => {\r\n    return message('Key must be ', actual, ...types);\r\n};\r\nexport function withAlg(alg, actual, ...types) {\r\n    return message(`Key for the ${alg} algorithm must be `, actual, ...types);\r\n}\r\n", "export function assertCryptoKey(key) {\r\n    if (!isCryptoKey(key)) {\r\n        throw new Error('CryptoKey instance expected');\r\n    }\r\n}\r\nexport function isCryptoKey(key) {\r\n    return key?.[Symbol.toStringTag] === 'CryptoKey';\r\n}\r\nexport function isKeyObject(key) {\r\n    return key?.[Symbol.toStringTag] === 'KeyObject';\r\n}\r\nexport default (key) => {\r\n    return isCryptoKey(key) || isKeyObject(key);\r\n};\r\n", "export default (...headers) => {\r\n    const sources = headers.filter(Boolean);\r\n    if (sources.length === 0 || sources.length === 1) {\r\n        return true;\r\n    }\r\n    let acc;\r\n    for (const header of sources) {\r\n        const parameters = Object.keys(header);\r\n        if (!acc || acc.size === 0) {\r\n            acc = new Set(parameters);\r\n            continue;\r\n        }\r\n        for (const parameter of parameters) {\r\n            if (acc.has(parameter)) {\r\n                return false;\r\n            }\r\n            acc.add(parameter);\r\n        }\r\n    }\r\n    return true;\r\n};\r\n", "function isObjectLike(value) {\r\n    return typeof value === 'object' && value !== null;\r\n}\r\nexport default (input) => {\r\n    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {\r\n        return false;\r\n    }\r\n    if (Object.getPrototypeOf(input) === null) {\r\n        return true;\r\n    }\r\n    let proto = input;\r\n    while (Object.getPrototypeOf(proto) !== null) {\r\n        proto = Object.getPrototypeOf(proto);\r\n    }\r\n    return Object.getPrototypeOf(input) === proto;\r\n};\r\n", "export default (alg, key) => {\r\n    if (alg.startsWith('RS') || alg.startsWith('PS')) {\r\n        const { modulusLength } = key.algorithm;\r\n        if (typeof modulusLength !== 'number' || modulusLength < 2048) {\r\n            throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`);\r\n        }\r\n    }\r\n};\r\n", "import { JOSENotSupported } from '../util/errors.js';\r\nfunction subtleMapping(jwk) {\r\n    let algorithm;\r\n    let keyUsages;\r\n    switch (jwk.kty) {\r\n        case 'AKP': {\r\n            switch (jwk.alg) {\r\n                case 'ML-DSA-44':\r\n                case 'ML-DSA-65':\r\n                case 'ML-DSA-87':\r\n                    algorithm = { name: jwk.alg };\r\n                    keyUsages = jwk.priv ? ['sign'] : ['verify'];\r\n                    break;\r\n                default:\r\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\r\n            }\r\n            break;\r\n        }\r\n        case 'RSA': {\r\n            switch (jwk.alg) {\r\n                case 'PS256':\r\n                case 'PS384':\r\n                case 'PS512':\r\n                    algorithm = { name: 'RSA-PSS', hash: `SHA-${jwk.alg.slice(-3)}` };\r\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\r\n                    break;\r\n                case 'RS256':\r\n                case 'RS384':\r\n                case 'RS512':\r\n                    algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${jwk.alg.slice(-3)}` };\r\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\r\n                    break;\r\n                case 'RSA-OAEP':\r\n                case 'RSA-OAEP-256':\r\n                case 'RSA-OAEP-384':\r\n                case 'RSA-OAEP-512':\r\n                    algorithm = {\r\n                        name: 'RSA-OAEP',\r\n                        hash: `SHA-${parseInt(jwk.alg.slice(-3), 10) || 1}`,\r\n                    };\r\n                    keyUsages = jwk.d ? ['decrypt', 'unwrapKey'] : ['encrypt', 'wrapKey'];\r\n                    break;\r\n                default:\r\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\r\n            }\r\n            break;\r\n        }\r\n        case 'EC': {\r\n            switch (jwk.alg) {\r\n                case 'ES256':\r\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\r\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\r\n                    break;\r\n                case 'ES384':\r\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\r\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\r\n                    break;\r\n                case 'ES512':\r\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\r\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\r\n                    break;\r\n                case 'ECDH-ES':\r\n                case 'ECDH-ES+A128KW':\r\n                case 'ECDH-ES+A192KW':\r\n                case 'ECDH-ES+A256KW':\r\n                    algorithm = { name: 'ECDH', namedCurve: jwk.crv };\r\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\r\n                    break;\r\n                default:\r\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\r\n            }\r\n            break;\r\n        }\r\n        case 'OKP': {\r\n            switch (jwk.alg) {\r\n                case 'Ed25519':\r\n                case 'EdDSA':\r\n                    algorithm = { name: 'Ed25519' };\r\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\r\n                    break;\r\n                case 'ECDH-ES':\r\n                case 'ECDH-ES+A128KW':\r\n                case 'ECDH-ES+A192KW':\r\n                case 'ECDH-ES+A256KW':\r\n                    algorithm = { name: jwk.crv };\r\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\r\n                    break;\r\n                default:\r\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\r\n            }\r\n            break;\r\n        }\r\n        default:\r\n            throw new JOSENotSupported('Invalid or unsupported JWK \"kty\" (Key Type) Parameter value');\r\n    }\r\n    return { algorithm, keyUsages };\r\n}\r\nexport default async (jwk) => {\r\n    if (!jwk.alg) {\r\n        throw new TypeError('\"alg\" argument is required when \"jwk.alg\" is not present');\r\n    }\r\n    const { algorithm, keyUsages } = subtleMapping(jwk);\r\n    const keyData = { ...jwk };\r\n    if (keyData.kty !== 'AKP') {\r\n        delete keyData.alg;\r\n    }\r\n    delete keyData.use;\r\n    return crypto.subtle.importKey('jwk', keyData, algorithm, jwk.ext ?? (jwk.d || jwk.priv ? false : true), jwk.key_ops ?? keyUsages);\r\n};\r\n", "import { JOSENotSupported, JWEInvalid, JWSInvalid } from '../util/errors.js';\r\nexport default (Err, recognizedDefault, recognizedOption, protectedHeader, joseHeader) => {\r\n    if (joseHeader.crit !== undefined && protectedHeader?.crit === undefined) {\r\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be integrity protected');\r\n    }\r\n    if (!protectedHeader || protectedHeader.crit === undefined) {\r\n        return new Set();\r\n    }\r\n    if (!Array.isArray(protectedHeader.crit) ||\r\n        protectedHeader.crit.length === 0 ||\r\n        protectedHeader.crit.some((input) => typeof input !== 'string' || input.length === 0)) {\r\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be an array of non-empty strings when present');\r\n    }\r\n    let recognized;\r\n    if (recognizedOption !== undefined) {\r\n        recognized = new Map([...Object.entries(recognizedOption), ...recognizedDefault.entries()]);\r\n    }\r\n    else {\r\n        recognized = recognizedDefault;\r\n    }\r\n    for (const parameter of protectedHeader.crit) {\r\n        if (!recognized.has(parameter)) {\r\n            throw new JOSENotSupported(`Extension Header Parameter \"${parameter}\" is not recognized`);\r\n        }\r\n        if (joseHeader[parameter] === undefined) {\r\n            throw new Err(`Extension Header Parameter \"${parameter}\" is missing`);\r\n        }\r\n        if (recognized.get(parameter) && protectedHeader[parameter] === undefined) {\r\n            throw new Err(`Extension Header Parameter \"${parameter}\" MUST be integrity protected`);\r\n        }\r\n    }\r\n    return new Set(protectedHeader.crit);\r\n};\r\n", "export default (option, algorithms) => {\r\n    if (algorithms !== undefined &&\r\n        (!Array.isArray(algorithms) || algorithms.some((s) => typeof s !== 'string'))) {\r\n        throw new TypeError(`\"${option}\" option must be an array of strings`);\r\n    }\r\n    if (!algorithms) {\r\n        return undefined;\r\n    }\r\n    return new Set(algorithms);\r\n};\r\n", "import isObject from './is_object.js';\r\nexport function isJWK(key) {\r\n    return isObject(key) && typeof key.kty === 'string';\r\n}\r\nexport function isPrivateJWK(key) {\r\n    return (key.kty !== 'oct' &&\r\n        ((key.kty === 'AKP' && typeof key.priv === 'string') || typeof key.d === 'string'));\r\n}\r\nexport function isPublicJWK(key) {\r\n    return key.kty !== 'oct' && typeof key.d === 'undefined' && typeof key.priv === 'undefined';\r\n}\r\nexport function isSecretJWK(key) {\r\n    return key.kty === 'oct' && typeof key.k === 'string';\r\n}\r\n", "import { isJWK } from './is_jwk.js';\r\nimport { decode } from '../util/base64url.js';\r\nimport importJWK from './jwk_to_key.js';\r\nimport { isCryptoKey, isKeyObject } from './is_key_like.js';\r\nlet cache;\r\nconst handleJWK = async (key, jwk, alg, freeze = false) => {\r\n    cache ||= new WeakMap();\r\n    let cached = cache.get(key);\r\n    if (cached?.[alg]) {\r\n        return cached[alg];\r\n    }\r\n    const cryptoKey = await importJWK({ ...jwk, alg });\r\n    if (freeze)\r\n        Object.freeze(key);\r\n    if (!cached) {\r\n        cache.set(key, { [alg]: cryptoKey });\r\n    }\r\n    else {\r\n        cached[alg] = cryptoKey;\r\n    }\r\n    return cryptoKey;\r\n};\r\nconst handleKeyObject = (keyObject, alg) => {\r\n    cache ||= new WeakMap();\r\n    let cached = cache.get(keyObject);\r\n    if (cached?.[alg]) {\r\n        return cached[alg];\r\n    }\r\n    const isPublic = keyObject.type === 'public';\r\n    const extractable = isPublic ? true : false;\r\n    let cryptoKey;\r\n    if (keyObject.asymmetricKeyType === 'x25519') {\r\n        switch (alg) {\r\n            case 'ECDH-ES':\r\n            case 'ECDH-ES+A128KW':\r\n            case 'ECDH-ES+A192KW':\r\n            case 'ECDH-ES+A256KW':\r\n                break;\r\n            default:\r\n                throw new TypeError('given KeyObject instance cannot be used for this algorithm');\r\n        }\r\n        cryptoKey = keyObject.toCryptoKey(keyObject.asymmetricKeyType, extractable, isPublic ? [] : ['deriveBits']);\r\n    }\r\n    if (keyObject.asymmetricKeyType === 'ed25519') {\r\n        if (alg !== 'EdDSA' && alg !== 'Ed25519') {\r\n            throw new TypeError('given KeyObject instance cannot be used for this algorithm');\r\n        }\r\n        cryptoKey = keyObject.toCryptoKey(keyObject.asymmetricKeyType, extractable, [\r\n            isPublic ? 'verify' : 'sign',\r\n        ]);\r\n    }\r\n    switch (keyObject.asymmetricKeyType) {\r\n        case 'ml-dsa-44':\r\n        case 'ml-dsa-65':\r\n        case 'ml-dsa-87': {\r\n            if (alg !== keyObject.asymmetricKeyType.toUpperCase()) {\r\n                throw new TypeError('given KeyObject instance cannot be used for this algorithm');\r\n            }\r\n            cryptoKey = keyObject.toCryptoKey(keyObject.asymmetricKeyType, extractable, [\r\n                isPublic ? 'verify' : 'sign',\r\n            ]);\r\n        }\r\n    }\r\n    if (keyObject.asymmetricKeyType === 'rsa') {\r\n        let hash;\r\n        switch (alg) {\r\n            case 'RSA-OAEP':\r\n                hash = 'SHA-1';\r\n                break;\r\n            case 'RS256':\r\n            case 'PS256':\r\n            case 'RSA-OAEP-256':\r\n                hash = 'SHA-256';\r\n                break;\r\n            case 'RS384':\r\n            case 'PS384':\r\n            case 'RSA-OAEP-384':\r\n                hash = 'SHA-384';\r\n                break;\r\n            case 'RS512':\r\n            case 'PS512':\r\n            case 'RSA-OAEP-512':\r\n                hash = 'SHA-512';\r\n                break;\r\n            default:\r\n                throw new TypeError('given KeyObject instance cannot be used for this algorithm');\r\n        }\r\n        if (alg.startsWith('RSA-OAEP')) {\r\n            return keyObject.toCryptoKey({\r\n                name: 'RSA-OAEP',\r\n                hash,\r\n            }, extractable, isPublic ? ['encrypt'] : ['decrypt']);\r\n        }\r\n        cryptoKey = keyObject.toCryptoKey({\r\n            name: alg.startsWith('PS') ? 'RSA-PSS' : 'RSASSA-PKCS1-v1_5',\r\n            hash,\r\n        }, extractable, [isPublic ? 'verify' : 'sign']);\r\n    }\r\n    if (keyObject.asymmetricKeyType === 'ec') {\r\n        const nist = new Map([\r\n            ['prime256v1', 'P-256'],\r\n            ['secp384r1', 'P-384'],\r\n            ['secp521r1', 'P-521'],\r\n        ]);\r\n        const namedCurve = nist.get(keyObject.asymmetricKeyDetails?.namedCurve);\r\n        if (!namedCurve) {\r\n            throw new TypeError('given KeyObject instance cannot be used for this algorithm');\r\n        }\r\n        if (alg === 'ES256' && namedCurve === 'P-256') {\r\n            cryptoKey = keyObject.toCryptoKey({\r\n                name: 'ECDSA',\r\n                namedCurve,\r\n            }, extractable, [isPublic ? 'verify' : 'sign']);\r\n        }\r\n        if (alg === 'ES384' && namedCurve === 'P-384') {\r\n            cryptoKey = keyObject.toCryptoKey({\r\n                name: 'ECDSA',\r\n                namedCurve,\r\n            }, extractable, [isPublic ? 'verify' : 'sign']);\r\n        }\r\n        if (alg === 'ES512' && namedCurve === 'P-521') {\r\n            cryptoKey = keyObject.toCryptoKey({\r\n                name: 'ECDSA',\r\n                namedCurve,\r\n            }, extractable, [isPublic ? 'verify' : 'sign']);\r\n        }\r\n        if (alg.startsWith('ECDH-ES')) {\r\n            cryptoKey = keyObject.toCryptoKey({\r\n                name: 'ECDH',\r\n                namedCurve,\r\n            }, extractable, isPublic ? [] : ['deriveBits']);\r\n        }\r\n    }\r\n    if (!cryptoKey) {\r\n        throw new TypeError('given KeyObject instance cannot be used for this algorithm');\r\n    }\r\n    if (!cached) {\r\n        cache.set(keyObject, { [alg]: cryptoKey });\r\n    }\r\n    else {\r\n        cached[alg] = cryptoKey;\r\n    }\r\n    return cryptoKey;\r\n};\r\nexport default async (key, alg) => {\r\n    if (key instanceof Uint8Array) {\r\n        return key;\r\n    }\r\n    if (isCryptoKey(key)) {\r\n        return key;\r\n    }\r\n    if (isKeyObject(key)) {\r\n        if (key.type === 'secret') {\r\n            return key.export();\r\n        }\r\n        if ('toCryptoKey' in key && typeof key.toCryptoKey === 'function') {\r\n            try {\r\n                return handleKeyObject(key, alg);\r\n            }\r\n            catch (err) {\r\n                if (err instanceof TypeError) {\r\n                    throw err;\r\n                }\r\n            }\r\n        }\r\n        let jwk = key.export({ format: 'jwk' });\r\n        return handleJWK(key, jwk, alg);\r\n    }\r\n    if (isJWK(key)) {\r\n        if (key.k) {\r\n            return decode(key.k);\r\n        }\r\n        return handleJWK(key, key, alg, true);\r\n    }\r\n    throw new Error('unreachable');\r\n};\r\n", "import { withAlg as invalidKeyInput } from './invalid_key_input.js';\r\nimport isKeyLike from './is_key_like.js';\r\nimport * as jwk from './is_jwk.js';\r\nconst tag = (key) => key?.[Symbol.toStringTag];\r\nconst jwkMatchesOp = (alg, key, usage) => {\r\n    if (key.use !== undefined) {\r\n        let expected;\r\n        switch (usage) {\r\n            case 'sign':\r\n            case 'verify':\r\n                expected = 'sig';\r\n                break;\r\n            case 'encrypt':\r\n            case 'decrypt':\r\n                expected = 'enc';\r\n                break;\r\n        }\r\n        if (key.use !== expected) {\r\n            throw new TypeError(`Invalid key for this operation, its \"use\" must be \"${expected}\" when present`);\r\n        }\r\n    }\r\n    if (key.alg !== undefined && key.alg !== alg) {\r\n        throw new TypeError(`Invalid key for this operation, its \"alg\" must be \"${alg}\" when present`);\r\n    }\r\n    if (Array.isArray(key.key_ops)) {\r\n        let expectedKeyOp;\r\n        switch (true) {\r\n            case usage === 'sign' || usage === 'verify':\r\n            case alg === 'dir':\r\n            case alg.includes('CBC-HS'):\r\n                expectedKeyOp = usage;\r\n                break;\r\n            case alg.startsWith('PBES2'):\r\n                expectedKeyOp = 'deriveBits';\r\n                break;\r\n            case /^A\\d{3}(?:GCM)?(?:KW)?$/.test(alg):\r\n                if (!alg.includes('GCM') && alg.endsWith('KW')) {\r\n                    expectedKeyOp = usage === 'encrypt' ? 'wrapKey' : 'unwrapKey';\r\n                }\r\n                else {\r\n                    expectedKeyOp = usage;\r\n                }\r\n                break;\r\n            case usage === 'encrypt' && alg.startsWith('RSA'):\r\n                expectedKeyOp = 'wrapKey';\r\n                break;\r\n            case usage === 'decrypt':\r\n                expectedKeyOp = alg.startsWith('RSA') ? 'unwrapKey' : 'deriveBits';\r\n                break;\r\n        }\r\n        if (expectedKeyOp && key.key_ops?.includes?.(expectedKeyOp) === false) {\r\n            throw new TypeError(`Invalid key for this operation, its \"key_ops\" must include \"${expectedKeyOp}\" when present`);\r\n        }\r\n    }\r\n    return true;\r\n};\r\nconst symmetricTypeCheck = (alg, key, usage) => {\r\n    if (key instanceof Uint8Array)\r\n        return;\r\n    if (jwk.isJWK(key)) {\r\n        if (jwk.isSecretJWK(key) && jwkMatchesOp(alg, key, usage))\r\n            return;\r\n        throw new TypeError(`JSON Web Key for symmetric algorithms must have JWK \"kty\" (Key Type) equal to \"oct\" and the JWK \"k\" (Key Value) present`);\r\n    }\r\n    if (!isKeyLike(key)) {\r\n        throw new TypeError(invalidKeyInput(alg, key, 'CryptoKey', 'KeyObject', 'JSON Web Key', 'Uint8Array'));\r\n    }\r\n    if (key.type !== 'secret') {\r\n        throw new TypeError(`${tag(key)} instances for symmetric algorithms must be of type \"secret\"`);\r\n    }\r\n};\r\nconst asymmetricTypeCheck = (alg, key, usage) => {\r\n    if (jwk.isJWK(key)) {\r\n        switch (usage) {\r\n            case 'decrypt':\r\n            case 'sign':\r\n                if (jwk.isPrivateJWK(key) && jwkMatchesOp(alg, key, usage))\r\n                    return;\r\n                throw new TypeError(`JSON Web Key for this operation be a private JWK`);\r\n            case 'encrypt':\r\n            case 'verify':\r\n                if (jwk.isPublicJWK(key) && jwkMatchesOp(alg, key, usage))\r\n                    return;\r\n                throw new TypeError(`JSON Web Key for this operation be a public JWK`);\r\n        }\r\n    }\r\n    if (!isKeyLike(key)) {\r\n        throw new TypeError(invalidKeyInput(alg, key, 'CryptoKey', 'KeyObject', 'JSON Web Key'));\r\n    }\r\n    if (key.type === 'secret') {\r\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithms must not be of type \"secret\"`);\r\n    }\r\n    if (key.type === 'public') {\r\n        switch (usage) {\r\n            case 'sign':\r\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm signing must be of type \"private\"`);\r\n            case 'decrypt':\r\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm decryption must be of type \"private\"`);\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    if (key.type === 'private') {\r\n        switch (usage) {\r\n            case 'verify':\r\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm verifying must be of type \"public\"`);\r\n            case 'encrypt':\r\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm encryption must be of type \"public\"`);\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n};\r\nexport default (alg, key, usage) => {\r\n    const symmetric = alg.startsWith('HS') ||\r\n        alg === 'dir' ||\r\n        alg.startsWith('PBES2') ||\r\n        /^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(alg) ||\r\n        /^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(alg);\r\n    if (symmetric) {\r\n        symmetricTypeCheck(alg, key, usage);\r\n    }\r\n    else {\r\n        asymmetricTypeCheck(alg, key, usage);\r\n    }\r\n};\r\n", "import { JOSENotSupported } from '../util/errors.js';\r\nexport default (alg, algorithm) => {\r\n    const hash = `SHA-${alg.slice(-3)}`;\r\n    switch (alg) {\r\n        case 'HS256':\r\n        case 'HS384':\r\n        case 'HS512':\r\n            return { hash, name: 'HMAC' };\r\n        case 'PS256':\r\n        case 'PS384':\r\n        case 'PS512':\r\n            return { hash, name: 'RSA-PSS', saltLength: parseInt(alg.slice(-3), 10) >> 3 };\r\n        case 'RS256':\r\n        case 'RS384':\r\n        case 'RS512':\r\n            return { hash, name: 'RSASSA-PKCS1-v1_5' };\r\n        case 'ES256':\r\n        case 'ES384':\r\n        case 'ES512':\r\n            return { hash, name: 'ECDSA', namedCurve: algorithm.namedCurve };\r\n        case 'Ed25519':\r\n        case 'EdDSA':\r\n            return { name: 'Ed25519' };\r\n        case 'ML-DSA-44':\r\n        case 'ML-DSA-65':\r\n        case 'ML-DSA-87':\r\n            return { name: alg };\r\n        default:\r\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\r\n    }\r\n};\r\n", "import { checkSigCryptoKey } from './crypto_key.js';\r\nimport invalidKeyInput from './invalid_key_input.js';\r\nexport default async (alg, key, usage) => {\r\n    if (key instanceof Uint8Array) {\r\n        if (!alg.startsWith('HS')) {\r\n            throw new TypeError(invalidKeyInput(key, 'CryptoKey', 'KeyObject', 'JSON Web Key'));\r\n        }\r\n        return crypto.subtle.importKey('raw', key, { hash: `SHA-${alg.slice(-3)}`, name: 'HMAC' }, false, [usage]);\r\n    }\r\n    checkSigCryptoKey(key, alg, usage);\r\n    return key;\r\n};\r\n", "import subtleAlgorithm from './subtle_dsa.js';\r\nimport checkKeyLength from './check_key_length.js';\r\nimport getVerifyKey from './get_sign_verify_key.js';\r\nexport default async (alg, key, signature, data) => {\r\n    const cryptoKey = await getVerifyKey(alg, key, 'verify');\r\n    checkKeyLength(alg, cryptoKey);\r\n    const algorithm = subtleAlgorithm(alg, cryptoKey.algorithm);\r\n    try {\r\n        return await crypto.subtle.verify(algorithm, cryptoKey, signature, data);\r\n    }\r\n    catch {\r\n        return false;\r\n    }\r\n};\r\n", "import { decode as b64u } from '../../util/base64url.js';\r\nimport verify from '../../lib/verify.js';\r\nimport { JOSEAlgNotAllowed, JWSInvalid, JWSSignatureVerificationFailed } from '../../util/errors.js';\r\nimport { concat, encoder, decoder } from '../../lib/buffer_utils.js';\r\nimport isDisjoint from '../../lib/is_disjoint.js';\r\nimport isObject from '../../lib/is_object.js';\r\nimport checkKeyType from '../../lib/check_key_type.js';\r\nimport validateCrit from '../../lib/validate_crit.js';\r\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\r\nimport normalizeKey from '../../lib/normalize_key.js';\r\nexport async function flattenedVerify(jws, key, options) {\r\n    if (!isObject(jws)) {\r\n        throw new JWSInvalid('Flattened JWS must be an object');\r\n    }\r\n    if (jws.protected === undefined && jws.header === undefined) {\r\n        throw new JWSInvalid('Flattened JWS must have either of the \"protected\" or \"header\" members');\r\n    }\r\n    if (jws.protected !== undefined && typeof jws.protected !== 'string') {\r\n        throw new JWSInvalid('JWS Protected Header incorrect type');\r\n    }\r\n    if (jws.payload === undefined) {\r\n        throw new JWSInvalid('JWS Payload missing');\r\n    }\r\n    if (typeof jws.signature !== 'string') {\r\n        throw new JWSInvalid('JWS Signature missing or incorrect type');\r\n    }\r\n    if (jws.header !== undefined && !isObject(jws.header)) {\r\n        throw new JWSInvalid('JWS Unprotected Header incorrect type');\r\n    }\r\n    let parsedProt = {};\r\n    if (jws.protected) {\r\n        try {\r\n            const protectedHeader = b64u(jws.protected);\r\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\r\n        }\r\n        catch {\r\n            throw new JWSInvalid('JWS Protected Header is invalid');\r\n        }\r\n    }\r\n    if (!isDisjoint(parsedProt, jws.header)) {\r\n        throw new JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');\r\n    }\r\n    const joseHeader = {\r\n        ...parsedProt,\r\n        ...jws.header,\r\n    };\r\n    const extensions = validateCrit(JWSInvalid, new Map([['b64', true]]), options?.crit, parsedProt, joseHeader);\r\n    let b64 = true;\r\n    if (extensions.has('b64')) {\r\n        b64 = parsedProt.b64;\r\n        if (typeof b64 !== 'boolean') {\r\n            throw new JWSInvalid('The \"b64\" (base64url-encode payload) Header Parameter must be a boolean');\r\n        }\r\n    }\r\n    const { alg } = joseHeader;\r\n    if (typeof alg !== 'string' || !alg) {\r\n        throw new JWSInvalid('JWS \"alg\" (Algorithm) Header Parameter missing or invalid');\r\n    }\r\n    const algorithms = options && validateAlgorithms('algorithms', options.algorithms);\r\n    if (algorithms && !algorithms.has(alg)) {\r\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter value not allowed');\r\n    }\r\n    if (b64) {\r\n        if (typeof jws.payload !== 'string') {\r\n            throw new JWSInvalid('JWS Payload must be a string');\r\n        }\r\n    }\r\n    else if (typeof jws.payload !== 'string' && !(jws.payload instanceof Uint8Array)) {\r\n        throw new JWSInvalid('JWS Payload must be a string or an Uint8Array instance');\r\n    }\r\n    let resolvedKey = false;\r\n    if (typeof key === 'function') {\r\n        key = await key(parsedProt, jws);\r\n        resolvedKey = true;\r\n    }\r\n    checkKeyType(alg, key, 'verify');\r\n    const data = concat(encoder.encode(jws.protected ?? ''), encoder.encode('.'), typeof jws.payload === 'string' ? encoder.encode(jws.payload) : jws.payload);\r\n    let signature;\r\n    try {\r\n        signature = b64u(jws.signature);\r\n    }\r\n    catch {\r\n        throw new JWSInvalid('Failed to base64url decode the signature');\r\n    }\r\n    const k = await normalizeKey(key, alg);\r\n    const verified = await verify(alg, k, signature, data);\r\n    if (!verified) {\r\n        throw new JWSSignatureVerificationFailed();\r\n    }\r\n    let payload;\r\n    if (b64) {\r\n        try {\r\n            payload = b64u(jws.payload);\r\n        }\r\n        catch {\r\n            throw new JWSInvalid('Failed to base64url decode the payload');\r\n        }\r\n    }\r\n    else if (typeof jws.payload === 'string') {\r\n        payload = encoder.encode(jws.payload);\r\n    }\r\n    else {\r\n        payload = jws.payload;\r\n    }\r\n    const result = { payload };\r\n    if (jws.protected !== undefined) {\r\n        result.protectedHeader = parsedProt;\r\n    }\r\n    if (jws.header !== undefined) {\r\n        result.unprotectedHeader = jws.header;\r\n    }\r\n    if (resolvedKey) {\r\n        return { ...result, key: k };\r\n    }\r\n    return result;\r\n}\r\n", "import { flattenedVerify } from '../flattened/verify.js';\r\nimport { JWSInvalid } from '../../util/errors.js';\r\nimport { decoder } from '../../lib/buffer_utils.js';\r\nexport async function compactVerify(jws, key, options) {\r\n    if (jws instanceof Uint8Array) {\r\n        jws = decoder.decode(jws);\r\n    }\r\n    if (typeof jws !== 'string') {\r\n        throw new JWSInvalid('Compact JWS must be a string or Uint8Array');\r\n    }\r\n    const { 0: protectedHeader, 1: payload, 2: signature, length } = jws.split('.');\r\n    if (length !== 3) {\r\n        throw new JWSInvalid('Invalid Compact JWS');\r\n    }\r\n    const verified = await flattenedVerify({ payload, protected: protectedHeader, signature }, key, options);\r\n    const result = { payload: verified.payload, protectedHeader: verified.protectedHeader };\r\n    if (typeof key === 'function') {\r\n        return { ...result, key: verified.key };\r\n    }\r\n    return result;\r\n}\r\n", "export default (date) => Math.floor(date.getTime() / 1000);\r\n", "const minute = 60;\r\nconst hour = minute * 60;\r\nconst day = hour * 24;\r\nconst week = day * 7;\r\nconst year = day * 365.25;\r\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;\r\nexport default (str) => {\r\n    const matched = REGEX.exec(str);\r\n    if (!matched || (matched[4] && matched[1])) {\r\n        throw new TypeError('Invalid time period format');\r\n    }\r\n    const value = parseFloat(matched[2]);\r\n    const unit = matched[3].toLowerCase();\r\n    let numericDate;\r\n    switch (unit) {\r\n        case 'sec':\r\n        case 'secs':\r\n        case 'second':\r\n        case 'seconds':\r\n        case 's':\r\n            numericDate = Math.round(value);\r\n            break;\r\n        case 'minute':\r\n        case 'minutes':\r\n        case 'min':\r\n        case 'mins':\r\n        case 'm':\r\n            numericDate = Math.round(value * minute);\r\n            break;\r\n        case 'hour':\r\n        case 'hours':\r\n        case 'hr':\r\n        case 'hrs':\r\n        case 'h':\r\n            numericDate = Math.round(value * hour);\r\n            break;\r\n        case 'day':\r\n        case 'days':\r\n        case 'd':\r\n            numericDate = Math.round(value * day);\r\n            break;\r\n        case 'week':\r\n        case 'weeks':\r\n        case 'w':\r\n            numericDate = Math.round(value * week);\r\n            break;\r\n        default:\r\n            numericDate = Math.round(value * year);\r\n            break;\r\n    }\r\n    if (matched[1] === '-' || matched[4] === 'ago') {\r\n        return -numericDate;\r\n    }\r\n    return numericDate;\r\n};\r\n", "import { JWTClaimValidationFailed, JWTExpired, JWTInvalid } from '../util/errors.js';\r\nimport { decoder } from './buffer_utils.js';\r\nimport epoch from './epoch.js';\r\nimport secs from './secs.js';\r\nimport isObject from './is_object.js';\r\nimport { encoder } from './buffer_utils.js';\r\nfunction validateInput(label, input) {\r\n    if (!Number.isFinite(input)) {\r\n        throw new TypeError(`Invalid ${label} input`);\r\n    }\r\n    return input;\r\n}\r\nconst normalizeTyp = (value) => {\r\n    if (value.includes('/')) {\r\n        return value.toLowerCase();\r\n    }\r\n    return `application/${value.toLowerCase()}`;\r\n};\r\nconst checkAudiencePresence = (audPayload, audOption) => {\r\n    if (typeof audPayload === 'string') {\r\n        return audOption.includes(audPayload);\r\n    }\r\n    if (Array.isArray(audPayload)) {\r\n        return audOption.some(Set.prototype.has.bind(new Set(audPayload)));\r\n    }\r\n    return false;\r\n};\r\nexport function validateClaimsSet(protectedHeader, encodedPayload, options = {}) {\r\n    let payload;\r\n    try {\r\n        payload = JSON.parse(decoder.decode(encodedPayload));\r\n    }\r\n    catch {\r\n    }\r\n    if (!isObject(payload)) {\r\n        throw new JWTInvalid('JWT Claims Set must be a top-level JSON object');\r\n    }\r\n    const { typ } = options;\r\n    if (typ &&\r\n        (typeof protectedHeader.typ !== 'string' ||\r\n            normalizeTyp(protectedHeader.typ) !== normalizeTyp(typ))) {\r\n        throw new JWTClaimValidationFailed('unexpected \"typ\" JWT header value', payload, 'typ', 'check_failed');\r\n    }\r\n    const { requiredClaims = [], issuer, subject, audience, maxTokenAge } = options;\r\n    const presenceCheck = [...requiredClaims];\r\n    if (maxTokenAge !== undefined)\r\n        presenceCheck.push('iat');\r\n    if (audience !== undefined)\r\n        presenceCheck.push('aud');\r\n    if (subject !== undefined)\r\n        presenceCheck.push('sub');\r\n    if (issuer !== undefined)\r\n        presenceCheck.push('iss');\r\n    for (const claim of new Set(presenceCheck.reverse())) {\r\n        if (!(claim in payload)) {\r\n            throw new JWTClaimValidationFailed(`missing required \"${claim}\" claim`, payload, claim, 'missing');\r\n        }\r\n    }\r\n    if (issuer &&\r\n        !(Array.isArray(issuer) ? issuer : [issuer]).includes(payload.iss)) {\r\n        throw new JWTClaimValidationFailed('unexpected \"iss\" claim value', payload, 'iss', 'check_failed');\r\n    }\r\n    if (subject && payload.sub !== subject) {\r\n        throw new JWTClaimValidationFailed('unexpected \"sub\" claim value', payload, 'sub', 'check_failed');\r\n    }\r\n    if (audience &&\r\n        !checkAudiencePresence(payload.aud, typeof audience === 'string' ? [audience] : audience)) {\r\n        throw new JWTClaimValidationFailed('unexpected \"aud\" claim value', payload, 'aud', 'check_failed');\r\n    }\r\n    let tolerance;\r\n    switch (typeof options.clockTolerance) {\r\n        case 'string':\r\n            tolerance = secs(options.clockTolerance);\r\n            break;\r\n        case 'number':\r\n            tolerance = options.clockTolerance;\r\n            break;\r\n        case 'undefined':\r\n            tolerance = 0;\r\n            break;\r\n        default:\r\n            throw new TypeError('Invalid clockTolerance option type');\r\n    }\r\n    const { currentDate } = options;\r\n    const now = epoch(currentDate || new Date());\r\n    if ((payload.iat !== undefined || maxTokenAge) && typeof payload.iat !== 'number') {\r\n        throw new JWTClaimValidationFailed('\"iat\" claim must be a number', payload, 'iat', 'invalid');\r\n    }\r\n    if (payload.nbf !== undefined) {\r\n        if (typeof payload.nbf !== 'number') {\r\n            throw new JWTClaimValidationFailed('\"nbf\" claim must be a number', payload, 'nbf', 'invalid');\r\n        }\r\n        if (payload.nbf > now + tolerance) {\r\n            throw new JWTClaimValidationFailed('\"nbf\" claim timestamp check failed', payload, 'nbf', 'check_failed');\r\n        }\r\n    }\r\n    if (payload.exp !== undefined) {\r\n        if (typeof payload.exp !== 'number') {\r\n            throw new JWTClaimValidationFailed('\"exp\" claim must be a number', payload, 'exp', 'invalid');\r\n        }\r\n        if (payload.exp <= now - tolerance) {\r\n            throw new JWTExpired('\"exp\" claim timestamp check failed', payload, 'exp', 'check_failed');\r\n        }\r\n    }\r\n    if (maxTokenAge) {\r\n        const age = now - payload.iat;\r\n        const max = typeof maxTokenAge === 'number' ? maxTokenAge : secs(maxTokenAge);\r\n        if (age - tolerance > max) {\r\n            throw new JWTExpired('\"iat\" claim timestamp check failed (too far in the past)', payload, 'iat', 'check_failed');\r\n        }\r\n        if (age < 0 - tolerance) {\r\n            throw new JWTClaimValidationFailed('\"iat\" claim timestamp check failed (it should be in the past)', payload, 'iat', 'check_failed');\r\n        }\r\n    }\r\n    return payload;\r\n}\r\nexport class JWTClaimsBuilder {\r\n    #payload;\r\n    constructor(payload) {\r\n        if (!isObject(payload)) {\r\n            throw new TypeError('JWT Claims Set MUST be an object');\r\n        }\r\n        this.#payload = structuredClone(payload);\r\n    }\r\n    data() {\r\n        return encoder.encode(JSON.stringify(this.#payload));\r\n    }\r\n    get iss() {\r\n        return this.#payload.iss;\r\n    }\r\n    set iss(value) {\r\n        this.#payload.iss = value;\r\n    }\r\n    get sub() {\r\n        return this.#payload.sub;\r\n    }\r\n    set sub(value) {\r\n        this.#payload.sub = value;\r\n    }\r\n    get aud() {\r\n        return this.#payload.aud;\r\n    }\r\n    set aud(value) {\r\n        this.#payload.aud = value;\r\n    }\r\n    set jti(value) {\r\n        this.#payload.jti = value;\r\n    }\r\n    set nbf(value) {\r\n        if (typeof value === 'number') {\r\n            this.#payload.nbf = validateInput('setNotBefore', value);\r\n        }\r\n        else if (value instanceof Date) {\r\n            this.#payload.nbf = validateInput('setNotBefore', epoch(value));\r\n        }\r\n        else {\r\n            this.#payload.nbf = epoch(new Date()) + secs(value);\r\n        }\r\n    }\r\n    set exp(value) {\r\n        if (typeof value === 'number') {\r\n            this.#payload.exp = validateInput('setExpirationTime', value);\r\n        }\r\n        else if (value instanceof Date) {\r\n            this.#payload.exp = validateInput('setExpirationTime', epoch(value));\r\n        }\r\n        else {\r\n            this.#payload.exp = epoch(new Date()) + secs(value);\r\n        }\r\n    }\r\n    set iat(value) {\r\n        if (typeof value === 'undefined') {\r\n            this.#payload.iat = epoch(new Date());\r\n        }\r\n        else if (value instanceof Date) {\r\n            this.#payload.iat = validateInput('setIssuedAt', epoch(value));\r\n        }\r\n        else if (typeof value === 'string') {\r\n            this.#payload.iat = validateInput('setIssuedAt', epoch(new Date()) + secs(value));\r\n        }\r\n        else {\r\n            this.#payload.iat = validateInput('setIssuedAt', value);\r\n        }\r\n    }\r\n}\r\n", "import { compactVerify } from '../jws/compact/verify.js';\r\nimport { validateClaimsSet } from '../lib/jwt_claims_set.js';\r\nimport { JWTInvalid } from '../util/errors.js';\r\nexport async function jwtVerify(jwt, key, options) {\r\n    const verified = await compactVerify(jwt, key, options);\r\n    if (verified.protectedHeader.crit?.includes('b64') && verified.protectedHeader.b64 === false) {\r\n        throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\r\n    }\r\n    const payload = validateClaimsSet(verified.protectedHeader, verified.payload, options);\r\n    const result = { payload, protectedHeader: verified.protectedHeader };\r\n    if (typeof key === 'function') {\r\n        return { ...result, key: verified.key };\r\n    }\r\n    return result;\r\n}\r\n", "import subtleAlgorithm from './subtle_dsa.js';\r\nimport checkKeyLength from './check_key_length.js';\r\nimport getSignKey from './get_sign_verify_key.js';\r\nexport default async (alg, key, data) => {\r\n    const cryptoKey = await getSignKey(alg, key, 'sign');\r\n    checkKeyLength(alg, cryptoKey);\r\n    const signature = await crypto.subtle.sign(subtleAlgorithm(alg, cryptoKey.algorithm), cryptoKey, data);\r\n    return new Uint8Array(signature);\r\n};\r\n", "import { encode as b64u } from '../../util/base64url.js';\r\nimport sign from '../../lib/sign.js';\r\nimport isDisjoint from '../../lib/is_disjoint.js';\r\nimport { JWSInvalid } from '../../util/errors.js';\r\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\r\nimport checkKeyType from '../../lib/check_key_type.js';\r\nimport validateCrit from '../../lib/validate_crit.js';\r\nimport normalizeKey from '../../lib/normalize_key.js';\r\nexport class FlattenedSign {\r\n    #payload;\r\n    #protectedHeader;\r\n    #unprotectedHeader;\r\n    constructor(payload) {\r\n        if (!(payload instanceof Uint8Array)) {\r\n            throw new TypeError('payload must be an instance of Uint8Array');\r\n        }\r\n        this.#payload = payload;\r\n    }\r\n    setProtectedHeader(protectedHeader) {\r\n        if (this.#protectedHeader) {\r\n            throw new TypeError('setProtectedHeader can only be called once');\r\n        }\r\n        this.#protectedHeader = protectedHeader;\r\n        return this;\r\n    }\r\n    setUnprotectedHeader(unprotectedHeader) {\r\n        if (this.#unprotectedHeader) {\r\n            throw new TypeError('setUnprotectedHeader can only be called once');\r\n        }\r\n        this.#unprotectedHeader = unprotectedHeader;\r\n        return this;\r\n    }\r\n    async sign(key, options) {\r\n        if (!this.#protectedHeader && !this.#unprotectedHeader) {\r\n            throw new JWSInvalid('either setProtectedHeader or setUnprotectedHeader must be called before #sign()');\r\n        }\r\n        if (!isDisjoint(this.#protectedHeader, this.#unprotectedHeader)) {\r\n            throw new JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');\r\n        }\r\n        const joseHeader = {\r\n            ...this.#protectedHeader,\r\n            ...this.#unprotectedHeader,\r\n        };\r\n        const extensions = validateCrit(JWSInvalid, new Map([['b64', true]]), options?.crit, this.#protectedHeader, joseHeader);\r\n        let b64 = true;\r\n        if (extensions.has('b64')) {\r\n            b64 = this.#protectedHeader.b64;\r\n            if (typeof b64 !== 'boolean') {\r\n                throw new JWSInvalid('The \"b64\" (base64url-encode payload) Header Parameter must be a boolean');\r\n            }\r\n        }\r\n        const { alg } = joseHeader;\r\n        if (typeof alg !== 'string' || !alg) {\r\n            throw new JWSInvalid('JWS \"alg\" (Algorithm) Header Parameter missing or invalid');\r\n        }\r\n        checkKeyType(alg, key, 'sign');\r\n        let payload = this.#payload;\r\n        if (b64) {\r\n            payload = encoder.encode(b64u(payload));\r\n        }\r\n        let protectedHeader;\r\n        if (this.#protectedHeader) {\r\n            protectedHeader = encoder.encode(b64u(JSON.stringify(this.#protectedHeader)));\r\n        }\r\n        else {\r\n            protectedHeader = encoder.encode('');\r\n        }\r\n        const data = concat(protectedHeader, encoder.encode('.'), payload);\r\n        const k = await normalizeKey(key, alg);\r\n        const signature = await sign(alg, k, data);\r\n        const jws = {\r\n            signature: b64u(signature),\r\n            payload: '',\r\n        };\r\n        if (b64) {\r\n            jws.payload = decoder.decode(payload);\r\n        }\r\n        if (this.#unprotectedHeader) {\r\n            jws.header = this.#unprotectedHeader;\r\n        }\r\n        if (this.#protectedHeader) {\r\n            jws.protected = decoder.decode(protectedHeader);\r\n        }\r\n        return jws;\r\n    }\r\n}\r\n", "import { FlattenedSign } from '../flattened/sign.js';\r\nexport class CompactSign {\r\n    #flattened;\r\n    constructor(payload) {\r\n        this.#flattened = new FlattenedSign(payload);\r\n    }\r\n    setProtectedHeader(protectedHeader) {\r\n        this.#flattened.setProtectedHeader(protectedHeader);\r\n        return this;\r\n    }\r\n    async sign(key, options) {\r\n        const jws = await this.#flattened.sign(key, options);\r\n        if (jws.payload === undefined) {\r\n            throw new TypeError('use the flattened module for creating JWS with b64: false');\r\n        }\r\n        return `${jws.protected}.${jws.payload}.${jws.signature}`;\r\n    }\r\n}\r\n", "import { CompactSign } from '../jws/compact/sign.js';\r\nimport { JWTInvalid } from '../util/errors.js';\r\nimport { JWTClaimsBuilder } from '../lib/jwt_claims_set.js';\r\nexport class SignJWT {\r\n    #protectedHeader;\r\n    #jwt;\r\n    constructor(payload = {}) {\r\n        this.#jwt = new JWTClaimsBuilder(payload);\r\n    }\r\n    setIssuer(issuer) {\r\n        this.#jwt.iss = issuer;\r\n        return this;\r\n    }\r\n    setSubject(subject) {\r\n        this.#jwt.sub = subject;\r\n        return this;\r\n    }\r\n    setAudience(audience) {\r\n        this.#jwt.aud = audience;\r\n        return this;\r\n    }\r\n    setJti(jwtId) {\r\n        this.#jwt.jti = jwtId;\r\n        return this;\r\n    }\r\n    setNotBefore(input) {\r\n        this.#jwt.nbf = input;\r\n        return this;\r\n    }\r\n    setExpirationTime(input) {\r\n        this.#jwt.exp = input;\r\n        return this;\r\n    }\r\n    setIssuedAt(input) {\r\n        this.#jwt.iat = input;\r\n        return this;\r\n    }\r\n    setProtectedHeader(protectedHeader) {\r\n        this.#protectedHeader = protectedHeader;\r\n        return this;\r\n    }\r\n    async sign(key, options) {\r\n        const sig = new CompactSign(this.#jwt.data());\r\n        sig.setProtectedHeader(this.#protectedHeader);\r\n        if (Array.isArray(this.#protectedHeader?.crit) &&\r\n            this.#protectedHeader.crit.includes('b64') &&\r\n            this.#protectedHeader.b64 === false) {\r\n            throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\r\n        }\r\n        return sig.sign(key, options);\r\n    }\r\n}\r\n", "// worker.js \u2014 Cloudflare Workers (Modules syntax)\r\n//\r\n// \u2705 What\u2019s included\r\n// - KV-first login (SHINEL_USERS) + fallback to USERS_JSON\r\n// - Auth: rate-limit, audit logs, JWT access + refresh cookie\r\n// - /stats                    -> counts for admin UIs\r\n// - /videos   (GET, POST)     -> list + create\r\n// - /videos/:id (PUT,DELETE)  -> update + delete\r\n// - /views/refresh            -> bulk weekly view refresh (videos + thumbs)\r\n// - /views/refresh/:videoId   -> refresh a single YouTube videoId\r\n//\r\n// Uses SHINEL_AUDIT KV to store:\r\n//   * app:thumbnails:list   (legacy/optional; refreshed if present)\r\n//   * app:videos:list       (new admin videos list)\r\n//   * rl:login:<ip>         (rate limiting counter)\r\n//   * audit:*               (login audits)\r\n\r\nimport bcrypt from \"bcryptjs\";\r\nimport { SignJWT, jwtVerify } from \"jose\";\r\n\r\n/* ============================== tiny helpers ============================== */\r\nconst json = (obj, status = 200, headers = {}) =>\r\n  new Response(JSON.stringify(obj), {\r\n    status,\r\n    headers: { \"content-type\": \"application/json\", ...headers },\r\n  });\r\n\r\nfunction makeCorsHeaders(origin, allowedOrigins) {\r\n  const lower = (s) => (s || \"\").toLowerCase();\r\n  const o = lower(origin);\r\n  const ok =\r\n    o &&\r\n    allowedOrigins.some((a) => {\r\n      const A = lower(a.trim());\r\n      if (!A) return false;\r\n      if (A === \"*\") return true;\r\n      return o === A || o.startsWith(A);\r\n    });\r\n\r\n  const allowOrigin = ok ? origin : null;\r\n  const h = {\r\n    \"Access-Control-Allow-Headers\": \"content-type, authorization\",\r\n    \"Access-Control-Allow-Methods\": \"GET,POST,PUT,DELETE,OPTIONS\",\r\n    \"Access-Control-Max-Age\": \"86400\",\r\n    \"Access-Control-Allow-Credentials\": \"true\",\r\n    Vary: \"Origin\",\r\n  };\r\n  if (allowOrigin) h[\"Access-Control-Allow-Origin\"] = allowOrigin;\r\n  return h;\r\n}\r\n\r\nfunction pickAllowedOrigin(origin, allowedOrigins) {\r\n  const lower = (s) => (s || \"\").toLowerCase();\r\n  const o = lower(origin);\r\n  const ok =\r\n    o &&\r\n    allowedOrigins.some((a) => {\r\n      const A = lower(a.trim());\r\n      if (!A) return false;\r\n      if (A === \"*\") return true;\r\n      return o === A || o.startsWith(A);\r\n    });\r\n  return ok ? origin : null;\r\n}\r\n\r\n/* ============================== auth helpers ============================== */\r\n// USERS: KV-first (SHINEL_USERS) with fallback to USERS_JSON allowlist\r\n\r\nasync function getUserFromKV(env, email) {\r\n  const key = `user:${String(email || \"\").trim().toLowerCase()}`;\r\n  const raw = await env.SHINEL_USERS.get(key);\r\n  if (!raw) return null;\r\n  try {\r\n    const u = JSON.parse(raw);\r\n    return {\r\n      email: String(u.email || \"\").trim().toLowerCase(),\r\n      passwordHash: String(u.passwordHash || \"\"),\r\n      role: String(u.role || \"client\").toLowerCase(),\r\n      firstName: String(u.firstName || \"\"),\r\n      lastName: String(u.lastName || \"\"),\r\n    };\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n// Back-compat: static allowlist in secret\r\nfunction loadUsers(env) {\r\n  try {\r\n    const arr = JSON.parse(env.USERS_JSON || \"[]\");\r\n    if (!Array.isArray(arr)) return [];\r\n    return arr\r\n      .map((u) => ({\r\n        email: String(u.email || \"\").trim().toLowerCase(),\r\n        passwordHash: String(u.passwordHash || \"\"),\r\n        role: String(u.role || \"client\").toLowerCase(),\r\n        firstName: String(u.firstName || \"\"),\r\n        lastName: String(u.lastName || \"\"),\r\n      }))\r\n      .filter((u) => u.email && u.passwordHash);\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction setCookie(name, value, opts = {}) {\r\n  const parts = [`${name}=${value ?? \"\"}`];\r\n  if (opts.maxAge != null) parts.push(`Max-Age=${opts.maxAge}`);\r\n  if (opts.expires) parts.push(`Expires=${opts.expires.toUTCString()}`);\r\n  parts.push(`Path=${opts.path ?? \"/\"}`);\r\n  if (opts.sameSite) parts.push(`SameSite=${opts.sameSite}`);\r\n  if (opts.secure) parts.push(\"Secure\");\r\n  if (opts.httpOnly) parts.push(\"HttpOnly\");\r\n  if (opts.domain) parts.push(`Domain=${opts.domain}`);\r\n  return parts.join(\"; \");\r\n}\r\nfunction delCookie(name, opts = {}) {\r\n  return setCookie(name, \"\", { ...opts, expires: new Date(0), maxAge: 0 });\r\n}\r\n\r\nasync function signAccess(payload, secret, minutes = 30) {\r\n  return new SignJWT(payload)\r\n    .setProtectedHeader({ alg: \"HS256\" })\r\n    .setIssuedAt()\r\n    .setExpirationTime(`${minutes}m`)\r\n    .sign(secret);\r\n}\r\nasync function signRefresh(payload, secret, days = 7) {\r\n  return new SignJWT(payload)\r\n    .setProtectedHeader({ alg: \"HS256\" })\r\n    .setIssuedAt()\r\n    .setExpirationTime(`${days}d`)\r\n    .sign(secret);\r\n}\r\nasync function verifyJWT(token, secret, opts = {}) {\r\n  // \uD83D\uDC47 allow clock skew so \"exp\" claim won't fail due to tiny drifts\r\n  const { payload } = await jwtVerify(token, secret, {\r\n    clockTolerance: 60,\r\n    ...opts,\r\n  });\r\n  return payload;\r\n}\r\n\r\nasync function sha256Hex(input) {\r\n  const enc = new TextEncoder();\r\n  const buf = await crypto.subtle.digest(\"SHA-256\", enc.encode(input));\r\n  return [...new Uint8Array(buf)]\r\n    .map((b) => b.toString(16).padStart(2, \"0\"))\r\n    .join(\"\");\r\n}\r\n\r\n/* ====================== Rate limit (KV) + Audit (KV) ====================== */\r\nasync function isRateLimited(env, ip, windowSec = 600, max = 5) {\r\n  if (!ip) return false;\r\n  const key = `rl:login:${ip}`;\r\n  const curr = Number((await env.SHINEL_AUDIT.get(key)) || \"0\");\r\n  if (curr >= max) return true;\r\n  await env.SHINEL_AUDIT.put(key, String(curr + 1), { expirationTtl: windowSec });\r\n  return false;\r\n}\r\n\r\nasync function audit(env, kind, { email, success, ip, reason }) {\r\n  try {\r\n    const when = new Date().toISOString();\r\n    const ipHash = ip ? await sha256Hex(ip) : \"unknown\";\r\n    const key = `audit:${kind}:${when}:${ipHash}`;\r\n    const value = JSON.stringify({\r\n      when,\r\n      kind,\r\n      email: email || null,\r\n      success: !!success,\r\n      ipHash,\r\n      reason: reason || null,\r\n    });\r\n    await env.SHINEL_AUDIT.put(key, value, { expirationTtl: 60 * 60 * 24 * 30 });\r\n  } catch { }\r\n}\r\n\r\n/* =========================== App data in KV =========================== */\r\nconst KV_THUMBS_KEY = \"thumbnails_public\";\r\nconst KV_VIDEOS_KEY = \"app:videos:list\";\r\n\r\nfunction resolveKV(env, key) {\r\n  if (key === KV_THUMBS_KEY) return env.THUMBNAILS;\r\n  if (key === KV_VIDEOS_KEY) return env.SHINEL_AUDIT;\r\n  return env.SHINEL_AUDIT;\r\n}\r\n\r\nasync function getJsonList(env, key) {\r\n  const ns = resolveKV(env, key);\r\n  const raw = await ns.get(key, \"json\");\r\n  return Array.isArray(raw) ? raw : [];\r\n}\r\n\r\nasync function putJsonList(env, key, list) {\r\n  const ns = resolveKV(env, key);\r\n  await ns.put(key, JSON.stringify(list));\r\n}\r\n\r\n\r\n\r\n// \uD83D\uDC47 ETag must reflect changes to views/lastViewUpdate as well as lastUpdated & hype.\r\nfunction weakEtagFor(arr) {\r\n  const base = JSON.stringify({\r\n    n: arr.length,\r\n    t: arr.reduce(\r\n      (a, x) =>\r\n        a +\r\n        Number(x.lastUpdated || 0) +\r\n        Number(x.lastViewUpdate || 0) +\r\n        Number(x.youtubeViews || 0) +\r\n        Number(x.hype || 0),\r\n      0\r\n    ),\r\n  });\r\n  return `\"W/${base.length.toString(16)}-${arr.length}\"`;\r\n}\r\n\r\nfunction readBearerToken(request) {\r\n  const auth = request.headers.get(\"authorization\") || \"\";\r\n  return auth.startsWith(\"Bearer \") ? auth.slice(7) : \"\";\r\n}\r\nasync function requireTeamOrThrow(request, secret) {\r\n  const token = readBearerToken(request);\r\n  if (!token) throw Object.assign(new Error(\"Missing token\"), { status: 401 });\r\n  const payload = await verifyJWT(token, secret);\r\n  const role = String(payload.role || \"\").toLowerCase();\r\n  const allowed = role === \"team\" || role === \"admin\";\r\n  if (!allowed) throw Object.assign(new Error(\"Forbidden\"), { status: 403 });\r\n  return payload;\r\n}\r\n\r\n/* ============================= YouTube helpers ============================= */\r\nconst ytIdFrom = (url) => {\r\n  try {\r\n    const u = new URL(url);\r\n    if (u.hostname.includes(\"youtu.be\")) return u.pathname.slice(1);\r\n    if (u.searchParams.get(\"v\")) return u.searchParams.get(\"v\");\r\n    const m = u.pathname.match(/\\/shorts\\/([^/]+)/);\r\n    if (m) return m[1];\r\n  } catch { }\r\n  return \"\";\r\n};\r\n\r\nasync function fetchYouTubeViews(env, videoId) {\r\n  const key = env.YOUTUBE_API_KEY || env.VITE_YOUTUBE_API_KEY || \"\";\r\n  if (!key) return null;\r\n  const api = `https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${encodeURIComponent(\r\n    videoId\r\n  )}&key=${encodeURIComponent(key)}`;\r\n  const resp = await fetch(api, { headers: { accept: \"application/json\" } });\r\n  if (!resp.ok) return null;\r\n  const j = await resp.json().catch(() => null);\r\n  const views = Number(j?.items?.[0]?.statistics?.viewCount ?? 0);\r\n  return Number.isFinite(views) ? views : null;\r\n}\r\n\r\nfunction isStale(ts, now = Date.now()) {\r\n  if (!ts) return true;\r\n  return now - Number(ts) > 7 * 24 * 60 * 60 * 1000; // 7 days\r\n}\r\n\r\n/* ============================== Hype helpers ============================== */\r\n/**\r\n * computeHype\r\n * - Cheap & bounded (0\u2013999), no extra API quota.\r\n * - Based on log(views) and freshness (days since lastViewUpdate/dateAdded).\r\n */\r\nfunction computeHype(views = 0, lastViewUpdate = null, dateAdded = null, now = Date.now()) {\r\n  if (!views) return 0;\r\n  const baseTs = lastViewUpdate || dateAdded || now;\r\n  const days = Math.max(0, (now - Number(baseTs)) / 86400000); // days since last update/add\r\n  // 0.5\u20131 freshness (recent videos score higher, but never below 0.5)\r\n  const freshness = Math.max(0.5, Math.min(1, 1 - days / 30));\r\n  const raw = Math.log10(views + 1) * 100 * freshness; // ~0\u2013(300+) typical\r\n  return Math.round(Math.min(999, raw));\r\n}\r\n\r\n/* ================================= worker ================================= */\r\nexport default {\r\n  async fetch(request, env) {\r\n    const url = new URL(request.url);\r\n    const origin = request.headers.get(\"origin\") || \"\";\r\n    const allowedOrigins = (env.ALLOWED_ORIGINS || \"\")\r\n      .split(\",\")\r\n      .map((s) => s.trim())\r\n      .filter(Boolean);\r\n\r\n    const cors = makeCorsHeaders(origin, allowedOrigins);\r\n    const secret = new TextEncoder().encode(env.JWT_SECRET || \"change-me\");\r\n    const ALLOW = loadUsers(env); // back-compat allowlist\r\n    const ip =\r\n      request.headers.get(\"CF-Connecting-IP\") ||\r\n      request.headers.get(\"x-forwarded-for\") ||\r\n      \"\";\r\n\r\n    // Preflight\r\n    if (request.method === \"OPTIONS\") {\r\n      return new Response(null, { status: 204, headers: cors });\r\n    }\r\n\r\n    // Health\r\n    if (\r\n      (url.pathname === \"/\" || url.pathname === \"/health\") &&\r\n      request.method === \"GET\"\r\n    ) {\r\n      return json({ ok: true, service: \"shinel-auth\", time: Date.now() }, 200, cors);\r\n    }\r\n\r\n    /* ----------------------------- POST /auth/login ----------------------------- */\r\n    if (url.pathname === \"/auth/login\" && request.method === \"POST\") {\r\n      try {\r\n        if (await isRateLimited(env, ip)) {\r\n          await audit(env, \"login\", {\r\n            email: null,\r\n            success: false,\r\n            ip,\r\n            reason: \"rate_limited\",\r\n          });\r\n          return json({ error: \"Too many attempts. Try again later.\" }, 429, cors);\r\n        }\r\n\r\n        const body = await request.json().catch(() => ({}));\r\n        const email = String(body.email || \"\").trim().toLowerCase();\r\n        const password = String(body.password || \"\");\r\n\r\n        if (!email || !password) {\r\n          return json({ error: \"Email and password required\" }, 400, cors);\r\n        }\r\n\r\n        // 1) Try KV user\r\n        let user = await getUserFromKV(env, email);\r\n\r\n        // 2) Fallback to USERS_JSON allowlist\r\n        if (!user) {\r\n          user = ALLOW.find((u) => u.email === email) || null;\r\n        }\r\n\r\n        if (!user) {\r\n          await audit(env, \"login\", {\r\n            email,\r\n            success: false,\r\n            ip,\r\n            reason: \"not_allowlisted\",\r\n          });\r\n          return json({ error: \"Invalid email or password\" }, 401, cors);\r\n        }\r\n\r\n        const ok = await bcrypt.compare(password, user.passwordHash);\r\n        if (!ok) {\r\n          await audit(env, \"login\", {\r\n            email,\r\n            success: false,\r\n            ip,\r\n            reason: \"bad_password\",\r\n          });\r\n          return json({ error: \"Invalid email or password\" }, 401, cors);\r\n        }\r\n\r\n        const payload = {\r\n          email: user.email,\r\n          role: user.role, // \"team\" or \"admin\" \u2192 admin access\r\n          firstName: user.firstName || \"\",\r\n          lastName: user.lastName || \"\",\r\n        };\r\n\r\n        const access = await signAccess(payload, secret, 30); // 30m\r\n        const refresh = await signRefresh({ ...payload, kind: \"refresh\" }, secret, 7); // 7d\r\n\r\n        const refreshCookie = setCookie(\"ss_refresh\", refresh, {\r\n          httpOnly: true,\r\n          secure: true,\r\n          sameSite: \"None\",\r\n          path: \"/\",\r\n          maxAge: 60 * 60 * 24 * 7,\r\n        });\r\n\r\n        await audit(env, \"login\", { email, success: true, ip });\r\n\r\n        const headers = {\r\n          ...cors,\r\n          \"content-type\": \"application/json\",\r\n          \"set-cookie\": refreshCookie,\r\n        };\r\n        return new Response(\r\n          JSON.stringify({ token: access, role: user.role }),\r\n          { status: 200, headers }\r\n        );\r\n      } catch (e) {\r\n        return json({ error: \"Login error\" }, 500, cors);\r\n      }\r\n    }\r\n\r\n    /* ----------------------------- POST /auth/refresh ----------------------------- */\r\n    if (url.pathname === \"/auth/refresh\" && request.method === \"POST\") {\r\n      const cookies = request.headers.get(\"cookie\") || \"\";\r\n      const m = cookies.match(/(?:^|;\\s*)ss_refresh=([^;]+)/);\r\n      const refresh = m ? decodeURIComponent(m[1]) : null;\r\n      if (!refresh) return json({ error: \"No refresh token\" }, 401, cors);\r\n\r\n      try {\r\n        const payload = await verifyJWT(refresh, secret);\r\n        if (payload.kind !== \"refresh\") throw new Error(\"not refresh\");\r\n\r\n        const newAccess = await signAccess(\r\n          {\r\n            email: payload.email,\r\n            role: payload.role,\r\n            firstName: payload.firstName || \"\",\r\n            lastName: payload.lastName || \"\",\r\n          },\r\n          secret,\r\n          30\r\n        );\r\n        const newRefresh = await signRefresh(\r\n          {\r\n            email: payload.email,\r\n            role: payload.role,\r\n            firstName: payload.firstName || \"\",\r\n            lastName: payload.lastName || \"\",\r\n            kind: \"refresh\",\r\n          },\r\n          secret,\r\n          7\r\n        );\r\n        const cookie = setCookie(\"ss_refresh\", newRefresh, {\r\n          httpOnly: true,\r\n          secure: true,\r\n          sameSite: \"None\",\r\n          path: \"/\",\r\n          maxAge: 60 * 60 * 24 * 7,\r\n        });\r\n\r\n        const headers = { ...cors, \"content-type\": \"application/json\", \"set-cookie\": cookie };\r\n        return new Response(JSON.stringify({ token: newAccess, role: payload.role }), {\r\n          status: 200,\r\n          headers,\r\n        });\r\n      } catch {\r\n        const clear = delCookie(\"ss_refresh\", {\r\n          httpOnly: true,\r\n          secure: true,\r\n          sameSite: \"None\",\r\n          path: \"/\",\r\n        });\r\n        const headers = { ...cors, \"content-type\": \"application/json\", \"set-cookie\": clear };\r\n        return new Response(JSON.stringify({ error: \"Invalid refresh\" }), {\r\n          status: 403,\r\n          headers,\r\n        });\r\n      }\r\n    }\r\n\r\n    /* ----------------------------- POST /auth/logout ----------------------------- */\r\n    if (url.pathname === \"/auth/logout\" && request.method === \"POST\") {\r\n      const clear = delCookie(\"ss_refresh\", {\r\n        httpOnly: true,\r\n        secure: true,\r\n        sameSite: \"None\",\r\n        path: \"/\",\r\n      });\r\n      const headers = { ...cors, \"content-type\": \"application/json\", \"set-cookie\": clear };\r\n      return new Response(JSON.stringify({ ok: true }), { status: 200, headers });\r\n    }\r\n\r\n    /* ----------------------------- GET /protected (sample) ----------------------------- */\r\n    if (url.pathname === \"/protected\" && request.method === \"GET\") {\r\n      const token = readBearerToken(request);\r\n      if (!token) return json({ error: \"Missing token\" }, 401, cors);\r\n      try {\r\n        const payload = await verifyJWT(token, secret);\r\n        return json(\r\n          {\r\n            message: `Welcome ${payload.email}, you have access!`,\r\n            email: payload.email,\r\n            role: payload.role,\r\n          },\r\n          200,\r\n          cors\r\n        );\r\n      } catch {\r\n        return json({ error: \"Invalid or expired token\" }, 403, cors);\r\n      }\r\n    }\r\n\r\n    /* =============================== /config ============================== */\r\n    if (url.pathname === \"/config\" && request.method === \"GET\") {\r\n      return json({\r\n        site: {\r\n          name: \"Shinel Studios\",\r\n          contact: \"contact@shinelstudios.in\"\r\n        },\r\n        features: {\r\n          pulse: true,\r\n          hub: true\r\n        }\r\n      }, 200, cors);\r\n    }\r\n\r\n    /* =============================== /clients ============================== */\r\n    // GET /clients - List all registered client channels\r\n    if (url.pathname === \"/clients\" && request.method === \"GET\") {\r\n      // In a real scenario, this would pull from SHINEL_AUDIT or SHINEL_USERS\r\n      // For now, return an empty list or mock data to avoid 404\r\n      const list = await env.SHINEL_AUDIT.get(\"app:clients:registry\", \"json\") || [];\r\n      return json({ clients: list }, 200, cors);\r\n    }\r\n\r\n    // GET /clients/pulse - Activity feed\r\n    if (url.pathname === \"/clients/pulse\" && request.method === \"GET\") {\r\n      const feed = await env.SHINEL_AUDIT.get(\"app:clients:pulse\", \"json\") || { activities: [], meta: {}, ts: Date.now() };\r\n      return json(feed, 200, cors);\r\n    }\r\n\r\n    // POST /clients - Add a new creator to the registry\r\n    if (url.pathname === \"/clients\" && request.method === \"POST\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const body = await request.json().catch(() => ({}));\r\n        const now = Date.now();\r\n\r\n        if (!body.name || !body.youtubeId) {\r\n          return json({ error: \"Name and YouTube ID required\" }, 400, cors);\r\n        }\r\n\r\n        const list = await env.SHINEL_AUDIT.get(\"app:clients:registry\", \"json\") || [];\r\n        const id = `c-${now}-${Math.random().toString(36).slice(2)}`;\r\n\r\n        const row = {\r\n          id,\r\n          name: String(body.name),\r\n          youtubeId: String(body.youtubeId),\r\n          handle: String(body.handle || \"\"),\r\n          category: String(body.category || \"Vlogger\"),\r\n          dateAdded: now,\r\n          lastUpdated: now\r\n        };\r\n\r\n        list.push(row);\r\n        await env.SHINEL_AUDIT.put(\"app:clients:registry\", JSON.stringify(list));\r\n        return json({ client: row }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Save failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    // PUT /clients/:id - Update creator details\r\n    if (url.pathname.startsWith(\"/clients/\") && request.method === \"PUT\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const id = decodeURIComponent(url.pathname.split(\"/\")[2] || \"\");\r\n        const updates = await request.json().catch(() => ({}));\r\n\r\n        const list = await env.SHINEL_AUDIT.get(\"app:clients:registry\", \"json\") || [];\r\n        const idx = list.findIndex((c) => c.id === id);\r\n        if (idx < 0) return json({ error: \"Not found\" }, 404, cors);\r\n\r\n        const now = Date.now();\r\n        const merged = { ...list[idx], ...updates, lastUpdated: now };\r\n        list[idx] = merged;\r\n\r\n        await env.SHINEL_AUDIT.put(\"app:clients:registry\", JSON.stringify(list));\r\n        return json({ client: merged }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Update failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    // DELETE /clients/:id - Remove a creator\r\n    if (url.pathname.startsWith(\"/clients/\") && request.method === \"DELETE\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const id = decodeURIComponent(url.pathname.split(\"/\")[2] || \"\");\r\n\r\n        const list = await env.SHINEL_AUDIT.get(\"app:clients:registry\", \"json\") || [];\r\n        const idx = list.findIndex((c) => c.id === id);\r\n        if (idx >= 0) {\r\n          list.splice(idx, 1);\r\n          await env.SHINEL_AUDIT.put(\"app:clients:registry\", JSON.stringify(list));\r\n        }\r\n\r\n        return json({ ok: true }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Delete failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    // DELETE /clients/bulk - Bulk remove\r\n    if (url.pathname === \"/clients/bulk\" && request.method === \"DELETE\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const body = await request.json().catch(() => ({}));\r\n        const ids = Array.isArray(body.ids) ? body.ids : [];\r\n\r\n        if (!ids.length) return json({ error: \"No IDs provided\" }, 400, cors);\r\n\r\n        let list = await env.SHINEL_AUDIT.get(\"app:clients:registry\", \"json\") || [];\r\n        list = list.filter(c => !ids.includes(c.id));\r\n\r\n        await env.SHINEL_AUDIT.put(\"app:clients:registry\", JSON.stringify(list));\r\n        return json({ ok: true, removed: ids.length }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Bulk delete failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    // GET /clients/stats - Generic stats\r\n    if (url.pathname === \"/clients/stats\" && request.method === \"GET\") {\r\n      return json({ ok: true, stats: {} }, 200, cors);\r\n    }\r\n\r\n    // GET /clients/history - Activity history\r\n    if (url.pathname === \"/clients/history\" && request.method === \"GET\") {\r\n      return json({ ok: true, history: [] }, 200, cors);\r\n    }\r\n\r\n    /* =============================== /stats =============================== */\r\n    if (url.pathname === \"/stats\" && request.method === \"GET\") {\r\n      const thumbs = await getJsonList(env, KV_THUMBS_KEY);\r\n      const videos = await getJsonList(env, KV_VIDEOS_KEY);\r\n      return json(\r\n        {\r\n          ok: true,\r\n          time: Date.now(),\r\n          counts: { thumbnails: thumbs.length, videos: videos.length },\r\n        },\r\n        200,\r\n        cors\r\n      );\r\n    }\r\n\r\n    /* =============================== /videos ============================== */\r\n    if (url.pathname === \"/videos\" && request.method === \"GET\") {\r\n      // Backfill hype if missing, in-place\r\n      const list = await getJsonList(env, KV_VIDEOS_KEY);\r\n      const now = Date.now();\r\n      let mutated = false;\r\n      for (let i = 0; i < list.length; i++) {\r\n        const row = list[i];\r\n        if (typeof row.hype !== \"number\") {\r\n          row.hype = computeHype(\r\n            Number(row.youtubeViews || 0),\r\n            row.lastViewUpdate || null,\r\n            row.dateAdded || null,\r\n            now\r\n          );\r\n          mutated = true;\r\n        }\r\n      }\r\n      if (mutated) await putJsonList(env, KV_VIDEOS_KEY, list);\r\n\r\n      const etag = weakEtagFor(list);\r\n      if (request.headers.get(\"if-none-match\") === etag) {\r\n        return new Response(null, { status: 304, headers: { ...cors, ETag: etag } });\r\n      }\r\n      return json({ videos: list }, 200, { ...cors, ETag: etag });\r\n    }\r\n\r\n    if (url.pathname === \"/videos\" && request.method === \"POST\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const body = await request.json().catch(() => ({}));\r\n        const now = Date.now();\r\n\r\n        const primaryId = ytIdFrom(body.primaryUrl || \"\");\r\n        const creatorId = ytIdFrom(body.creatorUrl || \"\");\r\n        const id = `v-${now}-${Math.random().toString(36).slice(2)}`;\r\n\r\n        const list = await getJsonList(env, KV_VIDEOS_KEY);\r\n        const row = {\r\n          id,\r\n          title: String(body.title || \"\"),\r\n          category: String(body.category || \"\"),\r\n          subcategory: String(body.subcategory || \"\"),\r\n          kind: String(body.kind || \"LONG\"), // LONG | SHORT | REEL | BRIEF\r\n          tags: Array.isArray(body.tags) ? body.tags : [],\r\n          primaryUrl: String(body.primaryUrl || \"\"),\r\n          creatorUrl: String(body.creatorUrl || \"\"),\r\n          // Prefer CREATOR for view id\r\n          videoId: creatorId || primaryId || null,\r\n          youtubeViews: 0,\r\n          viewStatus: \"unknown\",\r\n          lastViewUpdate: null,\r\n          dateAdded: now,\r\n          lastUpdated: now,\r\n          // Initialize hype (0 until first refresh)\r\n          hype: 0,\r\n        };\r\n        list.push(row);\r\n        await putJsonList(env, KV_VIDEOS_KEY, list);\r\n        return json({ video: row }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Save failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    if (url.pathname.startsWith(\"/videos/\") && request.method === \"PUT\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const id = decodeURIComponent(url.pathname.split(\"/\")[2] || \"\");\r\n        const updates = await request.json().catch(() => ({}));\r\n\r\n        const list = await getJsonList(env, KV_VIDEOS_KEY);\r\n        const idx = list.findIndex((v) => v.id === id);\r\n        if (idx < 0) return json({ error: \"Not found\" }, 404, cors);\r\n\r\n        const now = Date.now();\r\n        const merged = { ...list[idx], ...updates, lastUpdated: now };\r\n        const newPrimaryId = ytIdFrom(merged.primaryUrl || \"\");\r\n        const newCreatorId = ytIdFrom(merged.creatorUrl || \"\");\r\n        // Prefer CREATOR on updates as well\r\n        merged.videoId = newCreatorId || newPrimaryId || merged.videoId || null;\r\n\r\n        // Recompute hype if views changed or timestamps changed\r\n        merged.hype = computeHype(\r\n          Number(merged.youtubeViews || 0),\r\n          merged.lastViewUpdate || null,\r\n          merged.dateAdded || null,\r\n          now\r\n        );\r\n\r\n        list[idx] = merged;\r\n        await putJsonList(env, KV_VIDEOS_KEY, list);\r\n        return json({ video: merged }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Update failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    if (url.pathname.startsWith(\"/videos/\") && request.method === \"DELETE\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const id = decodeURIComponent(url.pathname.split(\"/\")[2] || \"\");\r\n        const list = await getJsonList(env, KV_VIDEOS_KEY);\r\n        const idx = list.findIndex((v) => v.id === id);\r\n        if (idx >= 0) {\r\n          list.splice(idx, 1);\r\n          await putJsonList(env, KV_VIDEOS_KEY, list);\r\n        }\r\n        return json({ ok: true }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Delete failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    /* ====================== views refresh endpoints ====================== */\r\n    // POST /views/refresh/:videoId\r\n    if (url.pathname.startsWith(\"/views/refresh/\") && request.method === \"POST\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const videoId = decodeURIComponent(url.pathname.split(\"/\")[3] || \"\");\r\n        if (!videoId) return json({ error: \"Missing videoId\" }, 400, cors);\r\n\r\n        const now = Date.now();\r\n        let updated = 0;\r\n\r\n        // Videos list\r\n        const vids = await getJsonList(env, KV_VIDEOS_KEY);\r\n        for (let i = 0; i < vids.length; i++) {\r\n          if (vids[i].videoId === videoId) {\r\n            const v = await fetchYouTubeViews(env, videoId);\r\n            if (v != null) {\r\n              vids[i].youtubeViews = v;\r\n              vids[i].lastViewUpdate = now;\r\n              vids[i].viewStatus = \"ok\";\r\n              vids[i].lastUpdated = now; // <-- bump for ETag\r\n              // Recompute hype on refresh\r\n              vids[i].hype = computeHype(v, vids[i].lastViewUpdate, vids[i].dateAdded, now);\r\n              updated++;\r\n            } else {\r\n              vids[i].viewStatus = \"error\";\r\n            }\r\n          }\r\n        }\r\n        if (updated) await putJsonList(env, KV_VIDEOS_KEY, vids);\r\n\r\n        // Thumbnails list (best-effort)\r\n        const thumbs = await getJsonList(env, KV_THUMBS_KEY);\r\n        let tUpdated = 0;\r\n        for (let i = 0; i < thumbs.length; i++) {\r\n          if (thumbs[i].videoId === videoId) {\r\n            const v = await fetchYouTubeViews(env, videoId);\r\n            if (v != null) {\r\n              thumbs[i].youtubeViews = v;\r\n              thumbs[i].lastViewUpdate = now;\r\n              thumbs[i].lastUpdated = now; // keep ETag consistent if you show thumbs via same rule\r\n              tUpdated++;\r\n            }\r\n          }\r\n        }\r\n        if (tUpdated) await putJsonList(env, KV_THUMBS_KEY, thumbs);\r\n\r\n        return json({ ok: true, updated: updated + tUpdated }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Refresh failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    // POST /views/refresh  (bulk, weekly)\r\n    if (url.pathname === \"/views/refresh\" && request.method === \"POST\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const now = Date.now();\r\n\r\n        const doRefreshSet = async (key, max = 20) => {\r\n          const list = await getJsonList(env, key);\r\n          let n = 0;\r\n          for (let i = 0; i < list.length; i++) {\r\n            const row = list[i];\r\n            const vid = row.videoId || ytIdFrom(row.youtubeUrl || \"\");\r\n            if (!vid) continue;\r\n            if (!isStale(row.lastViewUpdate, now)) continue;\r\n\r\n            const v = await fetchYouTubeViews(env, vid);\r\n            if (v != null) {\r\n              row.youtubeViews = v;\r\n              row.lastViewUpdate = now;\r\n              row.viewStatus = \"ok\";\r\n              row.lastUpdated = now; // <-- bump for ETag\r\n              // Recompute hype for any object that has views (videos have dateAdded; thumbs may not)\r\n              if (key === KV_VIDEOS_KEY) {\r\n                row.hype = computeHype(v, row.lastViewUpdate, row.dateAdded, now);\r\n              }\r\n              n++;\r\n            } else {\r\n              row.viewStatus = \"error\";\r\n            }\r\n            if (n >= max) break; // be gentle with API quota\r\n          }\r\n          if (n) await putJsonList(env, key, list);\r\n          return n;\r\n        };\r\n\r\n        const nVideos = await doRefreshSet(KV_VIDEOS_KEY, 20);\r\n        const nThumbs = await doRefreshSet(KV_THUMBS_KEY, 20);\r\n        return json({ ok: true, refreshed: { videos: nVideos, thumbnails: nThumbs } }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Bulk refresh failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    /* =========================== /notify (Discord) =========================== */\r\n    if (url.pathname === \"/notify\" && request.method === \"POST\") {\r\n      try {\r\n        // Allow clients to notify, so we just verify they have a valid token\r\n        const token = readBearerToken(request);\r\n        if (!token) return json({ error: \"Missing token\" }, 401, cors);\r\n        const payload = await verifyJWT(token, secret); // Verify signature only\r\n\r\n        const body = await request.json().catch(() => ({}));\r\n        const webhookUrl = env.DISCORD_WEBHOOK_URL || \"\";\r\n\r\n        if (!webhookUrl) {\r\n          return json({ error: \"Notification service not configured\" }, 503, cors);\r\n        }\r\n\r\n        const message = String(body.message || \"Update from client\");\r\n        const type = String(body.type || \"info\"); // info, upload, urgent\r\n\r\n        // Map type to color\r\n        const colors = {\r\n          info: 3447003, // Blue\r\n          upload: 5763719, // Green\r\n          urgent: 15548997 // Red\r\n        };\r\n\r\n        const discordPayload = {\r\n          embeds: [{\r\n            title: `Client Notification: ${type.toUpperCase()}`,\r\n            description: message,\r\n            color: colors[type] || 3447003,\r\n            footer: {\r\n              text: `User: ${payload.email} (${payload.role})`\r\n            },\r\n            timestamp: new Date().toISOString()\r\n          }]\r\n        };\r\n\r\n        const discRes = await fetch(webhookUrl, {\r\n          method: \"POST\",\r\n          headers: { \"content-type\": \"application/json\" },\r\n          body: JSON.stringify(discordPayload)\r\n        });\r\n\r\n        if (!discRes.ok) {\r\n          return json({ error: \"Failed to send to Discord\" }, 502, cors);\r\n        }\r\n\r\n        return json({ ok: true }, 200, cors);\r\n\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Notification failed\" }, 500, cors);\r\n      }\r\n    }\r\n\r\n    /* =========================== /thumbnails (public) =========================== */\r\n\r\n    if (url.pathname === \"/thumbnails\" && request.method === \"GET\") {\r\n      const list = await getJsonList(env, KV_THUMBS_KEY);\r\n\r\n      const etag = weakEtagFor(list);\r\n      if (request.headers.get(\"if-none-match\") === etag) {\r\n        return new Response(null, { status: 304, headers: { ...cors, ETag: etag } });\r\n      }\r\n\r\n      return json({ thumbnails: list }, 200, { ...cors, ETag: etag });\r\n    }\r\n\r\n    /* ======================= /thumbnails (admin CRUD) ======================= */\r\n\r\n    if (url.pathname === \"/thumbnails\" && request.method === \"POST\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const body = await request.json().catch(() => ({}));\r\n        const now = Date.now();\r\n\r\n        const list = await getJsonList(env, KV_THUMBS_KEY);\r\n        const id = `t-${now}-${Math.random().toString(36).slice(2)}`;\r\n\r\n        const autoVideoId = ytIdFrom(body.youtubeUrl || \"\");\r\n\r\n        const row = {\r\n          id,\r\n          filename: String(body.filename || \"\"),\r\n          youtubeUrl: String(body.youtubeUrl || \"\"),\r\n          category: String(body.category || \"OTHER\"),\r\n          subcategory: String(body.subcategory || \"\"),\r\n          variant: String(body.variant || \"VIDEO\"),\r\n          imageUrl: String(body.imageUrl || \"\"),\r\n          videoId: body.videoId || autoVideoId || null,\r\n          youtubeViews: Number(body.youtubeViews || 0),\r\n          viewStatus: body.viewStatus || \"unknown\",\r\n          lastViewUpdate: body.lastViewUpdate || null,\r\n          dateAdded: now,\r\n          lastUpdated: now,\r\n        };\r\n\r\n        list.push(row);\r\n        await putJsonList(env, KV_THUMBS_KEY, list);\r\n        return json({ thumbnail: row }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Save failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    if (url.pathname.startsWith(\"/thumbnails/\") && request.method === \"PUT\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const id = decodeURIComponent(url.pathname.split(\"/\")[2] || \"\");\r\n        const updates = await request.json().catch(() => ({}));\r\n\r\n        const list = await getJsonList(env, KV_THUMBS_KEY);\r\n        const idx = list.findIndex((t) => t.id === id);\r\n        if (idx < 0) return json({ error: \"Not found\" }, 404, cors);\r\n\r\n        const now = Date.now();\r\n        const merged = { ...list[idx], ...updates, lastUpdated: now };\r\n        list[idx] = merged;\r\n\r\n        await putJsonList(env, KV_THUMBS_KEY, list);\r\n        return json({ thumbnail: merged }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Update failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    if (url.pathname.startsWith(\"/thumbnails/\") && request.method === \"DELETE\") {\r\n      try {\r\n        await requireTeamOrThrow(request, secret);\r\n        const id = decodeURIComponent(url.pathname.split(\"/\")[2] || \"\");\r\n\r\n        const list = await getJsonList(env, KV_THUMBS_KEY);\r\n        const idx = list.findIndex((t) => t.id === id);\r\n        if (idx >= 0) {\r\n          list.splice(idx, 1);\r\n          await putJsonList(env, KV_THUMBS_KEY, list);\r\n        }\r\n\r\n        return json({ ok: true }, 200, cors);\r\n      } catch (e) {\r\n        return json({ error: e.message || \"Delete failed\" }, e.status || 500, cors);\r\n      }\r\n    }\r\n\r\n    /* ------------------------------- not found ------------------------------- */\r\n    return json({ error: \"Not found\" }, 404, cors);\r\n  },\r\n};\r\n"],
  "mappings": "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AAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAC5D;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AACtC;AAOA,IAAI,SAAS;AAAA,EACX;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAAA,EAAY;AAC9D;AAUA,SAAS,UAAU,IAAIA,MAAK,GAAG,GAAG;AAEhC,MAAI,GACF,IAAI,GAAGA,IAAG,GACV,IAAI,GAAGA,OAAM,CAAC;AAEhB,OAAK,EAAE,CAAC;AAoBR,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AACZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AAEZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AACZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AAEZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AACZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AAEZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AACZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AAEZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,CAAC;AACZ,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,EAAE;AAEb,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,EAAE;AACb,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,EAAE;AAEb,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,EAAE;AACb,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,EAAE;AAEb,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,EAAE;AACb,MAAI,EAAE,MAAM,EAAE;AACd,OAAK,EAAE,MAAU,KAAK,KAAM,GAAK;AACjC,OAAK,EAAE,MAAU,KAAK,IAAK,GAAK;AAChC,OAAK,EAAE,MAAS,IAAI,GAAK;AACzB,OAAK,IAAI,EAAE,EAAE;AAEb,KAAGA,IAAG,IAAI,IAAI,EAAE,sBAAsB,CAAC;AACvC,KAAGA,OAAM,CAAC,IAAI;AACd,SAAO;AACT;AArHS;AA6HT,SAAS,cAAc,MAAM,MAAM;AACjC,WAAS,IAAI,GAAG,OAAO,GAAG,IAAI,GAAG,EAAE;AACjC,IAAC,OAAQ,QAAQ,IAAM,KAAK,IAAI,IAAI,KACjC,QAAQ,OAAO,KAAK,KAAK;AAC9B,SAAO,EAAE,KAAK,MAAM,KAAW;AACjC;AALS;AAaT,SAAS,KAAK,KAAK,GAAG,GAAG;AACvB,MAAI,SAAS,GACX,KAAK,CAAC,GAAG,CAAC,GACV,OAAO,EAAE,QACT,OAAO,EAAE,QACT;AACF,WAAS,IAAI,GAAG,IAAI,MAAM;AACxB,IAAC,KAAK,cAAc,KAAK,MAAM,GAC5B,SAAS,GAAG,MACZ,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,GAAG;AACtB,OAAK,IAAI,GAAG,IAAI,MAAM,KAAK;AACzB,IAAC,KAAK,UAAU,IAAI,GAAG,GAAG,CAAC,GAAK,EAAE,CAAC,IAAI,GAAG,CAAC,GAAK,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC;AACjE,OAAK,IAAI,GAAG,IAAI,MAAM,KAAK;AACzB,IAAC,KAAK,UAAU,IAAI,GAAG,GAAG,CAAC,GAAK,EAAE,CAAC,IAAI,GAAG,CAAC,GAAK,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC;AACnE;AAdS;AAwBT,SAAS,QAAQ,MAAM,KAAK,GAAG,GAAG;AAChC,MAAI,OAAO,GACT,KAAK,CAAC,GAAG,CAAC,GACV,OAAO,EAAE,QACT,OAAO,EAAE,QACT;AACF,WAAS,IAAI,GAAG,IAAI,MAAM;AACxB,IAAC,KAAK,cAAc,KAAK,IAAI,GAAK,OAAO,GAAG,MAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,GAAG;AACvE,SAAO;AACP,OAAK,IAAI,GAAG,IAAI,MAAM,KAAK;AACzB,IAAC,KAAK,cAAc,MAAM,IAAI,GAC3B,OAAO,GAAG,MACV,GAAG,CAAC,KAAK,GAAG,KACZ,KAAK,cAAc,MAAM,IAAI,GAC7B,OAAO,GAAG,MACV,GAAG,CAAC,KAAK,GAAG,KACZ,KAAK,UAAU,IAAI,GAAG,GAAG,CAAC,GAC1B,EAAE,CAAC,IAAI,GAAG,CAAC,GACX,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC;AACpB,OAAK,IAAI,GAAG,IAAI,MAAM,KAAK;AACzB,IAAC,KAAK,cAAc,MAAM,IAAI,GAC3B,OAAO,GAAG,MACV,GAAG,CAAC,KAAK,GAAG,KACZ,KAAK,cAAc,MAAM,IAAI,GAC7B,OAAO,GAAG,MACV,GAAG,CAAC,KAAK,GAAG,KACZ,KAAK,UAAU,IAAI,GAAG,GAAG,CAAC,GAC1B,EAAE,CAAC,IAAI,GAAG,CAAC,GACX,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC;AACtB;AA7BS;AA0CT,SAAS,OAAO,GAAG,MAAM,QAAQ,UAAU,kBAAkB;AAC3D,MAAI,QAAQ,OAAO,MAAM,GACvB,OAAO,MAAM,QACb;AAGF,MAAI,SAAS,KAAK,SAAS,IAAI;AAC7B,UAAM,MAAM,sCAAsC,MAAM;AACxD,QAAI,UAAU;AACZ,MAAAH,UAAS,SAAS,KAAK,MAAM,GAAG,CAAC;AACjC;AAAA,IACF,MAAO,OAAM;AAAA,EACf;AACA,MAAI,KAAK,WAAW,iBAAiB;AACnC,UAAM;AAAA,MACJ,0BAA0B,KAAK,SAAS,SAAS;AAAA,IACnD;AACA,QAAI,UAAU;AACZ,MAAAA,UAAS,SAAS,KAAK,MAAM,GAAG,CAAC;AACjC;AAAA,IACF,MAAO,OAAM;AAAA,EACf;AACA,WAAU,KAAK,WAAY;AAE3B,MAAI,GACF,GACA,IAAI,GACJ;AAGF,MAAI,OAAO,eAAe,YAAY;AACpC,QAAI,IAAI,WAAW,MAAM;AACzB,QAAI,IAAI,WAAW,MAAM;AAAA,EAC3B,OAAO;AACL,QAAI,OAAO,MAAM;AACjB,QAAI,OAAO,MAAM;AAAA,EACnB;AAEA,UAAQ,MAAM,GAAG,GAAG,CAAC;AAOrB,WAAS,OAAO;AACd,QAAI,iBAAkB,kBAAiB,IAAI,MAAM;AACjD,QAAI,IAAI,QAAQ;AACd,UAAI,QAAQ,KAAK,IAAI;AACrB,aAAO,IAAI,UAAU;AACnB,YAAI,IAAI;AACR,aAAK,GAAG,GAAG,CAAC;AACZ,aAAK,MAAM,GAAG,CAAC;AACf,YAAI,KAAK,IAAI,IAAI,QAAQ,mBAAoB;AAAA,MAC/C;AAAA,IACF,OAAO;AACL,WAAK,IAAI,GAAG,IAAI,IAAI;AAClB,aAAK,IAAI,GAAG,IAAI,QAAQ,GAAG,IAAK,WAAU,OAAO,KAAK,GAAG,GAAG,CAAC;AAC/D,UAAI,MAAM,CAAC;AACX,WAAK,IAAI,GAAG,IAAI,MAAM;AACpB,YAAI,MAAO,MAAM,CAAC,KAAK,KAAM,SAAU,CAAC,GACtC,IAAI,MAAO,MAAM,CAAC,KAAK,KAAM,SAAU,CAAC,GACxC,IAAI,MAAO,MAAM,CAAC,KAAK,IAAK,SAAU,CAAC,GACvC,IAAI,MAAM,MAAM,CAAC,IAAI,SAAU,CAAC;AACpC,UAAI,UAAU;AACZ,iBAAS,MAAM,GAAG;AAClB;AAAA,MACF,MAAO,QAAO;AAAA,IAChB;AACA,QAAI,SAAU,CAAAA,UAAS,IAAI;AAAA,EAC7B;AAzBS;AA4BT,MAAI,OAAO,aAAa,aAAa;AACnC,SAAK;AAAA,EAGP,OAAO;AACL,QAAI;AACJ,WAAO,KAAM,KAAI,QAAQ,MAAM,KAAK,OAAO,YAAa,QAAO,OAAO,CAAC;AAAA,EACzE;AACF;AAjFS;AA6FT,SAAS,MAAM,UAAU,MAAM,UAAU,kBAAkB;AACzD,MAAI;AACJ,MAAI,OAAO,aAAa,YAAY,OAAO,SAAS,UAAU;AAC5D,UAAM,MAAM,qCAAqC;AACjD,QAAI,UAAU;AACZ,MAAAA,UAAS,SAAS,KAAK,MAAM,GAAG,CAAC;AACjC;AAAA,IACF,MAAO,OAAM;AAAA,EACf;AAGA,MAAI,OAAO;AACX,MAAI,KAAK,OAAO,CAAC,MAAM,OAAO,KAAK,OAAO,CAAC,MAAM,KAAK;AACpD,UAAM,MAAM,2BAA2B,KAAK,UAAU,GAAG,CAAC,CAAC;AAC3D,QAAI,UAAU;AACZ,MAAAA,UAAS,SAAS,KAAK,MAAM,GAAG,CAAC;AACjC;AAAA,IACF,MAAO,OAAM;AAAA,EACf;AACA,MAAI,KAAK,OAAO,CAAC,MAAM,IAAK,CAAC,QAAQ,OAAO,aAAa,CAAC,GAAK,SAAS;AAAA,OACnE;AACH,YAAQ,KAAK,OAAO,CAAC;AACrB,QACG,UAAU,OAAO,UAAU,OAAO,UAAU,OAC7C,KAAK,OAAO,CAAC,MAAM,KACnB;AACA,YAAM,MAAM,4BAA4B,KAAK,UAAU,GAAG,CAAC,CAAC;AAC5D,UAAI,UAAU;AACZ,QAAAA,UAAS,SAAS,KAAK,MAAM,GAAG,CAAC;AACjC;AAAA,MACF,MAAO,OAAM;AAAA,IACf;AACA,aAAS;AAAA,EACX;AAGA,MAAI,KAAK,OAAO,SAAS,CAAC,IAAI,KAAK;AACjC,UAAM,MAAM,qBAAqB;AACjC,QAAI,UAAU;AACZ,MAAAA,UAAS,SAAS,KAAK,MAAM,GAAG,CAAC;AACjC;AAAA,IACF,MAAO,OAAM;AAAA,EACf;AACA,MAAI,KAAK,SAAS,KAAK,UAAU,QAAQ,SAAS,CAAC,GAAG,EAAE,IAAI,IAC1D,KAAK,SAAS,KAAK,UAAU,SAAS,GAAG,SAAS,CAAC,GAAG,EAAE,GACxD,SAAS,KAAK,IACd,YAAY,KAAK,UAAU,SAAS,GAAG,SAAS,EAAE;AACpD,cAAY,SAAS,MAAM,OAAS;AAEpC,MAAI,YAAY,UAAU,QAAQ,GAChC,QAAQ,cAAc,WAAW,eAAe;AAQlD,WAAS,OAAO,OAAO;AACrB,QAAI,MAAM,CAAC;AACX,QAAI,KAAK,IAAI;AACb,QAAI,SAAS,IAAK,KAAI,KAAK,KAAK;AAChC,QAAI,KAAK,GAAG;AACZ,QAAI,SAAS,GAAI,KAAI,KAAK,GAAG;AAC7B,QAAI,KAAK,OAAO,SAAS,CAAC;AAC1B,QAAI,KAAK,GAAG;AACZ,QAAI,KAAK,cAAc,OAAO,MAAM,MAAM,CAAC;AAC3C,QAAI,KAAK,cAAc,OAAO,OAAO,SAAS,IAAI,CAAC,CAAC;AACpD,WAAO,IAAI,KAAK,EAAE;AAAA,EACpB;AAXS;AAcT,MAAI,OAAO,YAAY;AACrB,WAAO,OAAO,OAAO,WAAW,OAAO,MAAM,CAAC;AAAA,OAE3C;AACH;AAAA,MACE;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAUI,MAAK,OAAO;AACpB,YAAIA,KAAK,UAASA,MAAK,IAAI;AAAA,YACtB,UAAS,MAAM,OAAO,KAAK,CAAC;AAAA,MACnC;AAAA,MACA;AAAA,IACF;AAAA,EACF;AACF;AAvFS;AAgGF,SAAS,aAAa,OAAO,QAAQ;AAC1C,SAAO,cAAc,OAAO,MAAM;AACpC;AAFgB;AAWT,SAAS,aAAa,QAAQ,QAAQ;AAC3C,SAAO,cAAc,QAAQ,MAAM;AACrC;AAFgB;AAIhB,IAAO,mBAAQ;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;;;ACxoCO,IAAM,UAAU,IAAI,YAAY;AAChC,IAAM,UAAU,IAAI,YAAY;AACvC,IAAM,YAAY,KAAK;AAChB,SAAS,UAAU,SAAS;AAC/B,QAAM,OAAO,QAAQ,OAAO,CAAC,KAAK,EAAE,OAAO,MAAM,MAAM,QAAQ,CAAC;AAChE,QAAM,MAAM,IAAI,WAAW,IAAI;AAC/B,MAAI,IAAI;AACR,aAAW,UAAU,SAAS;AAC1B,QAAI,IAAI,QAAQ,CAAC;AACjB,SAAK,OAAO;AAAA,EAChB;AACA,SAAO;AACX;AATgB;;;ACHT,SAASC,cAAa,OAAO;AAChC,MAAI,WAAW,UAAU,UAAU;AAC/B,WAAO,MAAM,SAAS;AAAA,EAC1B;AACA,QAAM,aAAa;AACnB,QAAM,MAAM,CAAC;AACb,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,YAAY;AAC/C,QAAI,KAAK,OAAO,aAAa,MAAM,MAAM,MAAM,SAAS,GAAG,IAAI,UAAU,CAAC,CAAC;AAAA,EAC/E;AACA,SAAO,KAAK,IAAI,KAAK,EAAE,CAAC;AAC5B;AAVgB,OAAAA,eAAA;AAWT,SAASC,cAAa,SAAS;AAClC,MAAI,WAAW,YAAY;AACvB,WAAO,WAAW,WAAW,OAAO;AAAA,EACxC;AACA,QAAM,SAAS,KAAK,OAAO;AAC3B,QAAM,QAAQ,IAAI,WAAW,OAAO,MAAM;AAC1C,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACpC,UAAM,CAAC,IAAI,OAAO,WAAW,CAAC;AAAA,EAClC;AACA,SAAO;AACX;AAVgB,OAAAA,eAAA;;;ACTT,SAAS,OAAO,OAAO;AAC1B,MAAI,WAAW,YAAY;AACvB,WAAO,WAAW,WAAW,OAAO,UAAU,WAAW,QAAQ,QAAQ,OAAO,KAAK,GAAG;AAAA,MACpF,UAAU;AAAA,IACd,CAAC;AAAA,EACL;AACA,MAAI,UAAU;AACd,MAAI,mBAAmB,YAAY;AAC/B,cAAU,QAAQ,OAAO,OAAO;AAAA,EACpC;AACA,YAAU,QAAQ,QAAQ,MAAM,GAAG,EAAE,QAAQ,MAAM,GAAG,EAAE,QAAQ,OAAO,EAAE;AACzE,MAAI;AACA,WAAOC,cAAa,OAAO;AAAA,EAC/B,QACM;AACF,UAAM,IAAI,UAAU,mDAAmD;AAAA,EAC3E;AACJ;AAjBgB;AAkBT,SAAS,OAAO,OAAO;AAC1B,MAAI,YAAY;AAChB,MAAI,OAAO,cAAc,UAAU;AAC/B,gBAAY,QAAQ,OAAO,SAAS;AAAA,EACxC;AACA,MAAI,WAAW,UAAU,UAAU;AAC/B,WAAO,UAAU,SAAS,EAAE,UAAU,aAAa,aAAa,KAAK,CAAC;AAAA,EAC1E;AACA,SAAOC,cAAa,SAAS,EAAE,QAAQ,MAAM,EAAE,EAAE,QAAQ,OAAO,GAAG,EAAE,QAAQ,OAAO,GAAG;AAC3F;AATgB;;;ACpBT,IAAM,YAAN,cAAwB,MAAM;AAAA,EAArC,OAAqC;AAAA;AAAA;AAAA,EACjC,OAAO,OAAO;AAAA,EACd,OAAO;AAAA,EACP,YAAYC,UAAS,SAAS;AAC1B,UAAMA,UAAS,OAAO;AACtB,SAAK,OAAO,KAAK,YAAY;AAC7B,UAAM,oBAAoB,MAAM,KAAK,WAAW;AAAA,EACpD;AACJ;AACO,IAAM,2BAAN,cAAuC,UAAU;AAAA,EATxD,OASwD;AAAA;AAAA;AAAA,EACpD,OAAO,OAAO;AAAA,EACd,OAAO;AAAA,EACP;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAYA,UAAS,SAAS,QAAQ,eAAe,SAAS,eAAe;AACzE,UAAMA,UAAS,EAAE,OAAO,EAAE,OAAO,QAAQ,QAAQ,EAAE,CAAC;AACpD,SAAK,QAAQ;AACb,SAAK,SAAS;AACd,SAAK,UAAU;AAAA,EACnB;AACJ;AACO,IAAM,aAAN,cAAyB,UAAU;AAAA,EAtB1C,OAsB0C;AAAA;AAAA;AAAA,EACtC,OAAO,OAAO;AAAA,EACd,OAAO;AAAA,EACP;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAYA,UAAS,SAAS,QAAQ,eAAe,SAAS,eAAe;AACzE,UAAMA,UAAS,EAAE,OAAO,EAAE,OAAO,QAAQ,QAAQ,EAAE,CAAC;AACpD,SAAK,QAAQ;AACb,SAAK,SAAS;AACd,SAAK,UAAU;AAAA,EACnB;AACJ;AACO,IAAM,oBAAN,cAAgC,UAAU;AAAA,EAnCjD,OAmCiD;AAAA;AAAA;AAAA,EAC7C,OAAO,OAAO;AAAA,EACd,OAAO;AACX;AACO,IAAM,mBAAN,cAA+B,UAAU;AAAA,EAvChD,OAuCgD;AAAA;AAAA;AAAA,EAC5C,OAAO,OAAO;AAAA,EACd,OAAO;AACX;AAYO,IAAM,aAAN,cAAyB,UAAU;AAAA,EAtD1C,OAsD0C;AAAA;AAAA;AAAA,EACtC,OAAO,OAAO;AAAA,EACd,OAAO;AACX;AACO,IAAM,aAAN,cAAyB,UAAU;AAAA,EA1D1C,OA0D0C;AAAA;AAAA;AAAA,EACtC,OAAO,OAAO;AAAA,EACd,OAAO;AACX;AA+BO,IAAM,iCAAN,cAA6C,UAAU;AAAA,EA5F9D,OA4F8D;AAAA;AAAA;AAAA,EAC1D,OAAO,OAAO;AAAA,EACd,OAAO;AAAA,EACP,YAAYC,WAAU,iCAAiC,SAAS;AAC5D,UAAMA,UAAS,OAAO;AAAA,EAC1B;AACJ;;;AClGA,SAAS,SAAS,MAAM,OAAO,kBAAkB;AAC7C,SAAO,IAAI,UAAU,kDAAkD,IAAI,YAAY,IAAI,EAAE;AACjG;AAFS;AAGT,SAAS,YAAY,WAAW,MAAM;AAClC,SAAO,UAAU,SAAS;AAC9B;AAFS;AAGT,SAAS,cAAcC,OAAM;AACzB,SAAO,SAASA,MAAK,KAAK,MAAM,CAAC,GAAG,EAAE;AAC1C;AAFS;AAGT,SAAS,cAAc,KAAK;AACxB,UAAQ,KAAK;AAAA,IACT,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX;AACI,YAAM,IAAI,MAAM,aAAa;AAAA,EACrC;AACJ;AAXS;AAYT,SAAS,WAAW,KAAK,OAAO;AAC5B,MAAI,SAAS,CAAC,IAAI,OAAO,SAAS,KAAK,GAAG;AACtC,UAAM,IAAI,UAAU,sEAAsE,KAAK,GAAG;AAAA,EACtG;AACJ;AAJS;AAKF,SAAS,kBAAkB,KAAK,KAAK,OAAO;AAC/C,UAAQ,KAAK;AAAA,IACT,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK,SAAS;AACV,UAAI,CAAC,YAAY,IAAI,WAAW,MAAM;AAClC,cAAM,SAAS,MAAM;AACzB,YAAM,WAAW,SAAS,IAAI,MAAM,CAAC,GAAG,EAAE;AAC1C,YAAM,SAAS,cAAc,IAAI,UAAU,IAAI;AAC/C,UAAI,WAAW;AACX,cAAM,SAAS,OAAO,QAAQ,IAAI,gBAAgB;AACtD;AAAA,IACJ;AAAA,IACA,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK,SAAS;AACV,UAAI,CAAC,YAAY,IAAI,WAAW,mBAAmB;AAC/C,cAAM,SAAS,mBAAmB;AACtC,YAAM,WAAW,SAAS,IAAI,MAAM,CAAC,GAAG,EAAE;AAC1C,YAAM,SAAS,cAAc,IAAI,UAAU,IAAI;AAC/C,UAAI,WAAW;AACX,cAAM,SAAS,OAAO,QAAQ,IAAI,gBAAgB;AACtD;AAAA,IACJ;AAAA,IACA,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK,SAAS;AACV,UAAI,CAAC,YAAY,IAAI,WAAW,SAAS;AACrC,cAAM,SAAS,SAAS;AAC5B,YAAM,WAAW,SAAS,IAAI,MAAM,CAAC,GAAG,EAAE;AAC1C,YAAM,SAAS,cAAc,IAAI,UAAU,IAAI;AAC/C,UAAI,WAAW;AACX,cAAM,SAAS,OAAO,QAAQ,IAAI,gBAAgB;AACtD;AAAA,IACJ;AAAA,IACA,KAAK;AAAA,IACL,KAAK,SAAS;AACV,UAAI,CAAC,YAAY,IAAI,WAAW,SAAS;AACrC,cAAM,SAAS,SAAS;AAC5B;AAAA,IACJ;AAAA,IACA,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK,aAAa;AACd,UAAI,CAAC,YAAY,IAAI,WAAW,GAAG;AAC/B,cAAM,SAAS,GAAG;AACtB;AAAA,IACJ;AAAA,IACA,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK,SAAS;AACV,UAAI,CAAC,YAAY,IAAI,WAAW,OAAO;AACnC,cAAM,SAAS,OAAO;AAC1B,YAAM,WAAW,cAAc,GAAG;AAClC,YAAM,SAAS,IAAI,UAAU;AAC7B,UAAI,WAAW;AACX,cAAM,SAAS,UAAU,sBAAsB;AACnD;AAAA,IACJ;AAAA,IACA;AACI,YAAM,IAAI,UAAU,2CAA2C;AAAA,EACvE;AACA,aAAW,KAAK,KAAK;AACzB;AA/DgB;;;AC1BhB,SAAS,QAAQ,KAAK,WAAW,OAAO;AACpC,UAAQ,MAAM,OAAO,OAAO;AAC5B,MAAI,MAAM,SAAS,GAAG;AAClB,UAAM,OAAO,MAAM,IAAI;AACvB,WAAO,eAAe,MAAM,KAAK,IAAI,CAAC,QAAQ,IAAI;AAAA,EACtD,WACS,MAAM,WAAW,GAAG;AACzB,WAAO,eAAe,MAAM,CAAC,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EACjD,OACK;AACD,WAAO,WAAW,MAAM,CAAC,CAAC;AAAA,EAC9B;AACA,MAAI,UAAU,MAAM;AAChB,WAAO,aAAa,MAAM;AAAA,EAC9B,WACS,OAAO,WAAW,cAAc,OAAO,MAAM;AAClD,WAAO,sBAAsB,OAAO,IAAI;AAAA,EAC5C,WACS,OAAO,WAAW,YAAY,UAAU,MAAM;AACnD,QAAI,OAAO,aAAa,MAAM;AAC1B,aAAO,4BAA4B,OAAO,YAAY,IAAI;AAAA,IAC9D;AAAA,EACJ;AACA,SAAO;AACX;AAxBS;AAyBT,IAAO,4BAAQ,wBAAC,WAAW,UAAU;AACjC,SAAO,QAAQ,gBAAgB,QAAQ,GAAG,KAAK;AACnD,GAFe;AAGR,SAAS,QAAQ,KAAK,WAAW,OAAO;AAC3C,SAAO,QAAQ,eAAe,GAAG,uBAAuB,QAAQ,GAAG,KAAK;AAC5E;AAFgB;;;ACvBT,SAAS,YAAY,KAAK;AAC7B,SAAO,MAAM,OAAO,WAAW,MAAM;AACzC;AAFgB;AAGT,SAAS,YAAY,KAAK;AAC7B,SAAO,MAAM,OAAO,WAAW,MAAM;AACzC;AAFgB;AAGhB,IAAO,sBAAQ,wBAAC,QAAQ;AACpB,SAAO,YAAY,GAAG,KAAK,YAAY,GAAG;AAC9C,GAFe;;;ACXf,IAAO,sBAAQ,2BAAI,YAAY;AAC3B,QAAM,UAAU,QAAQ,OAAO,OAAO;AACtC,MAAI,QAAQ,WAAW,KAAK,QAAQ,WAAW,GAAG;AAC9C,WAAO;AAAA,EACX;AACA,MAAI;AACJ,aAAW,UAAU,SAAS;AAC1B,UAAM,aAAa,OAAO,KAAK,MAAM;AACrC,QAAI,CAAC,OAAO,IAAI,SAAS,GAAG;AACxB,YAAM,IAAI,IAAI,UAAU;AACxB;AAAA,IACJ;AACA,eAAW,aAAa,YAAY;AAChC,UAAI,IAAI,IAAI,SAAS,GAAG;AACpB,eAAO;AAAA,MACX;AACA,UAAI,IAAI,SAAS;AAAA,IACrB;AAAA,EACJ;AACA,SAAO;AACX,GApBe;;;ACAf,SAAS,aAAa,OAAO;AACzB,SAAO,OAAO,UAAU,YAAY,UAAU;AAClD;AAFS;AAGT,IAAO,oBAAQ,wBAAC,UAAU;AACtB,MAAI,CAAC,aAAa,KAAK,KAAK,OAAO,UAAU,SAAS,KAAK,KAAK,MAAM,mBAAmB;AACrF,WAAO;AAAA,EACX;AACA,MAAI,OAAO,eAAe,KAAK,MAAM,MAAM;AACvC,WAAO;AAAA,EACX;AACA,MAAI,QAAQ;AACZ,SAAO,OAAO,eAAe,KAAK,MAAM,MAAM;AAC1C,YAAQ,OAAO,eAAe,KAAK;AAAA,EACvC;AACA,SAAO,OAAO,eAAe,KAAK,MAAM;AAC5C,GAZe;;;ACHf,IAAO,2BAAQ,wBAAC,KAAK,QAAQ;AACzB,MAAI,IAAI,WAAW,IAAI,KAAK,IAAI,WAAW,IAAI,GAAG;AAC9C,UAAM,EAAE,cAAc,IAAI,IAAI;AAC9B,QAAI,OAAO,kBAAkB,YAAY,gBAAgB,MAAM;AAC3D,YAAM,IAAI,UAAU,GAAG,GAAG,uDAAuD;AAAA,IACrF;AAAA,EACJ;AACJ,GAPe;;;ACCf,SAAS,cAAc,KAAK;AACxB,MAAI;AACJ,MAAI;AACJ,UAAQ,IAAI,KAAK;AAAA,IACb,KAAK,OAAO;AACR,cAAQ,IAAI,KAAK;AAAA,QACb,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACD,sBAAY,EAAE,MAAM,IAAI,IAAI;AAC5B,sBAAY,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,QAAQ;AAC3C;AAAA,QACJ;AACI,gBAAM,IAAI,iBAAiB,8DAA8D;AAAA,MACjG;AACA;AAAA,IACJ;AAAA,IACA,KAAK,OAAO;AACR,cAAQ,IAAI,KAAK;AAAA,QACb,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACD,sBAAY,EAAE,MAAM,WAAW,MAAM,OAAO,IAAI,IAAI,MAAM,EAAE,CAAC,GAAG;AAChE,sBAAY,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ;AACxC;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACD,sBAAY,EAAE,MAAM,qBAAqB,MAAM,OAAO,IAAI,IAAI,MAAM,EAAE,CAAC,GAAG;AAC1E,sBAAY,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ;AACxC;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACD,sBAAY;AAAA,YACR,MAAM;AAAA,YACN,MAAM,OAAO,SAAS,IAAI,IAAI,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC;AAAA,UACrD;AACA,sBAAY,IAAI,IAAI,CAAC,WAAW,WAAW,IAAI,CAAC,WAAW,SAAS;AACpE;AAAA,QACJ;AACI,gBAAM,IAAI,iBAAiB,8DAA8D;AAAA,MACjG;AACA;AAAA,IACJ;AAAA,IACA,KAAK,MAAM;AACP,cAAQ,IAAI,KAAK;AAAA,QACb,KAAK;AACD,sBAAY,EAAE,MAAM,SAAS,YAAY,QAAQ;AACjD,sBAAY,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ;AACxC;AAAA,QACJ,KAAK;AACD,sBAAY,EAAE,MAAM,SAAS,YAAY,QAAQ;AACjD,sBAAY,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ;AACxC;AAAA,QACJ,KAAK;AACD,sBAAY,EAAE,MAAM,SAAS,YAAY,QAAQ;AACjD,sBAAY,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ;AACxC;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACD,sBAAY,EAAE,MAAM,QAAQ,YAAY,IAAI,IAAI;AAChD,sBAAY,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC;AACtC;AAAA,QACJ;AACI,gBAAM,IAAI,iBAAiB,8DAA8D;AAAA,MACjG;AACA;AAAA,IACJ;AAAA,IACA,KAAK,OAAO;AACR,cAAQ,IAAI,KAAK;AAAA,QACb,KAAK;AAAA,QACL,KAAK;AACD,sBAAY,EAAE,MAAM,UAAU;AAC9B,sBAAY,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ;AACxC;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACD,sBAAY,EAAE,MAAM,IAAI,IAAI;AAC5B,sBAAY,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC;AACtC;AAAA,QACJ;AACI,gBAAM,IAAI,iBAAiB,8DAA8D;AAAA,MACjG;AACA;AAAA,IACJ;AAAA,IACA;AACI,YAAM,IAAI,iBAAiB,6DAA6D;AAAA,EAChG;AACA,SAAO,EAAE,WAAW,UAAU;AAClC;AA/FS;AAgGT,IAAO,qBAAQ,8BAAO,QAAQ;AAC1B,MAAI,CAAC,IAAI,KAAK;AACV,UAAM,IAAI,UAAU,0DAA0D;AAAA,EAClF;AACA,QAAM,EAAE,WAAW,UAAU,IAAI,cAAc,GAAG;AAClD,QAAM,UAAU,EAAE,GAAG,IAAI;AACzB,MAAI,QAAQ,QAAQ,OAAO;AACvB,WAAO,QAAQ;AAAA,EACnB;AACA,SAAO,QAAQ;AACf,SAAO,OAAO,OAAO,UAAU,OAAO,SAAS,WAAW,IAAI,QAAQ,IAAI,KAAK,IAAI,OAAO,QAAQ,OAAO,IAAI,WAAW,SAAS;AACrI,GAXe;;;AChGf,IAAO,wBAAQ,wBAAC,KAAK,mBAAmB,kBAAkB,iBAAiB,eAAe;AACtF,MAAI,WAAW,SAAS,UAAa,iBAAiB,SAAS,QAAW;AACtE,UAAM,IAAI,IAAI,gEAAgE;AAAA,EAClF;AACA,MAAI,CAAC,mBAAmB,gBAAgB,SAAS,QAAW;AACxD,WAAO,oBAAI,IAAI;AAAA,EACnB;AACA,MAAI,CAAC,MAAM,QAAQ,gBAAgB,IAAI,KACnC,gBAAgB,KAAK,WAAW,KAChC,gBAAgB,KAAK,KAAK,CAAC,UAAU,OAAO,UAAU,YAAY,MAAM,WAAW,CAAC,GAAG;AACvF,UAAM,IAAI,IAAI,uFAAuF;AAAA,EACzG;AACA,MAAI;AACJ,MAAI,qBAAqB,QAAW;AAChC,iBAAa,IAAI,IAAI,CAAC,GAAG,OAAO,QAAQ,gBAAgB,GAAG,GAAG,kBAAkB,QAAQ,CAAC,CAAC;AAAA,EAC9F,OACK;AACD,iBAAa;AAAA,EACjB;AACA,aAAW,aAAa,gBAAgB,MAAM;AAC1C,QAAI,CAAC,WAAW,IAAI,SAAS,GAAG;AAC5B,YAAM,IAAI,iBAAiB,+BAA+B,SAAS,qBAAqB;AAAA,IAC5F;AACA,QAAI,WAAW,SAAS,MAAM,QAAW;AACrC,YAAM,IAAI,IAAI,+BAA+B,SAAS,cAAc;AAAA,IACxE;AACA,QAAI,WAAW,IAAI,SAAS,KAAK,gBAAgB,SAAS,MAAM,QAAW;AACvE,YAAM,IAAI,IAAI,+BAA+B,SAAS,+BAA+B;AAAA,IACzF;AAAA,EACJ;AACA,SAAO,IAAI,IAAI,gBAAgB,IAAI;AACvC,GA/Be;;;ACDf,IAAO,8BAAQ,wBAAC,QAAQ,eAAe;AACnC,MAAI,eAAe,WACd,CAAC,MAAM,QAAQ,UAAU,KAAK,WAAW,KAAK,CAAC,MAAM,OAAO,MAAM,QAAQ,IAAI;AAC/E,UAAM,IAAI,UAAU,IAAI,MAAM,sCAAsC;AAAA,EACxE;AACA,MAAI,CAAC,YAAY;AACb,WAAO;AAAA,EACX;AACA,SAAO,IAAI,IAAI,UAAU;AAC7B,GATe;;;ACCR,SAAS,MAAM,KAAK;AACvB,SAAO,kBAAS,GAAG,KAAK,OAAO,IAAI,QAAQ;AAC/C;AAFgB;AAGT,SAAS,aAAa,KAAK;AAC9B,SAAQ,IAAI,QAAQ,UACd,IAAI,QAAQ,SAAS,OAAO,IAAI,SAAS,YAAa,OAAO,IAAI,MAAM;AACjF;AAHgB;AAIT,SAAS,YAAY,KAAK;AAC7B,SAAO,IAAI,QAAQ,SAAS,OAAO,IAAI,MAAM,eAAe,OAAO,IAAI,SAAS;AACpF;AAFgB;AAGT,SAAS,YAAY,KAAK;AAC7B,SAAO,IAAI,QAAQ,SAAS,OAAO,IAAI,MAAM;AACjD;AAFgB;;;ACPhB,IAAI;AACJ,IAAM,YAAY,8BAAO,KAAK,KAAK,KAAK,SAAS,UAAU;AACvD,YAAU,oBAAI,QAAQ;AACtB,MAAI,SAAS,MAAM,IAAI,GAAG;AAC1B,MAAI,SAAS,GAAG,GAAG;AACf,WAAO,OAAO,GAAG;AAAA,EACrB;AACA,QAAM,YAAY,MAAM,mBAAU,EAAE,GAAG,KAAK,IAAI,CAAC;AACjD,MAAI;AACA,WAAO,OAAO,GAAG;AACrB,MAAI,CAAC,QAAQ;AACT,UAAM,IAAI,KAAK,EAAE,CAAC,GAAG,GAAG,UAAU,CAAC;AAAA,EACvC,OACK;AACD,WAAO,GAAG,IAAI;AAAA,EAClB;AACA,SAAO;AACX,GAhBkB;AAiBlB,IAAM,kBAAkB,wBAAC,WAAW,QAAQ;AACxC,YAAU,oBAAI,QAAQ;AACtB,MAAI,SAAS,MAAM,IAAI,SAAS;AAChC,MAAI,SAAS,GAAG,GAAG;AACf,WAAO,OAAO,GAAG;AAAA,EACrB;AACA,QAAM,WAAW,UAAU,SAAS;AACpC,QAAM,cAAc,WAAW,OAAO;AACtC,MAAI;AACJ,MAAI,UAAU,sBAAsB,UAAU;AAC1C,YAAQ,KAAK;AAAA,MACT,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACD;AAAA,MACJ;AACI,cAAM,IAAI,UAAU,4DAA4D;AAAA,IACxF;AACA,gBAAY,UAAU,YAAY,UAAU,mBAAmB,aAAa,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC;AAAA,EAC9G;AACA,MAAI,UAAU,sBAAsB,WAAW;AAC3C,QAAI,QAAQ,WAAW,QAAQ,WAAW;AACtC,YAAM,IAAI,UAAU,4DAA4D;AAAA,IACpF;AACA,gBAAY,UAAU,YAAY,UAAU,mBAAmB,aAAa;AAAA,MACxE,WAAW,WAAW;AAAA,IAC1B,CAAC;AAAA,EACL;AACA,UAAQ,UAAU,mBAAmB;AAAA,IACjC,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK,aAAa;AACd,UAAI,QAAQ,UAAU,kBAAkB,YAAY,GAAG;AACnD,cAAM,IAAI,UAAU,4DAA4D;AAAA,MACpF;AACA,kBAAY,UAAU,YAAY,UAAU,mBAAmB,aAAa;AAAA,QACxE,WAAW,WAAW;AAAA,MAC1B,CAAC;AAAA,IACL;AAAA,EACJ;AACA,MAAI,UAAU,sBAAsB,OAAO;AACvC,QAAIC;AACJ,YAAQ,KAAK;AAAA,MACT,KAAK;AACD,QAAAA,QAAO;AACP;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACD,QAAAA,QAAO;AACP;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACD,QAAAA,QAAO;AACP;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACD,QAAAA,QAAO;AACP;AAAA,MACJ;AACI,cAAM,IAAI,UAAU,4DAA4D;AAAA,IACxF;AACA,QAAI,IAAI,WAAW,UAAU,GAAG;AAC5B,aAAO,UAAU,YAAY;AAAA,QACzB,MAAM;AAAA,QACN,MAAAA;AAAA,MACJ,GAAG,aAAa,WAAW,CAAC,SAAS,IAAI,CAAC,SAAS,CAAC;AAAA,IACxD;AACA,gBAAY,UAAU,YAAY;AAAA,MAC9B,MAAM,IAAI,WAAW,IAAI,IAAI,YAAY;AAAA,MACzC,MAAAA;AAAA,IACJ,GAAG,aAAa,CAAC,WAAW,WAAW,MAAM,CAAC;AAAA,EAClD;AACA,MAAI,UAAU,sBAAsB,MAAM;AACtC,UAAM,OAAO,oBAAI,IAAI;AAAA,MACjB,CAAC,cAAc,OAAO;AAAA,MACtB,CAAC,aAAa,OAAO;AAAA,MACrB,CAAC,aAAa,OAAO;AAAA,IACzB,CAAC;AACD,UAAM,aAAa,KAAK,IAAI,UAAU,sBAAsB,UAAU;AACtE,QAAI,CAAC,YAAY;AACb,YAAM,IAAI,UAAU,4DAA4D;AAAA,IACpF;AACA,QAAI,QAAQ,WAAW,eAAe,SAAS;AAC3C,kBAAY,UAAU,YAAY;AAAA,QAC9B,MAAM;AAAA,QACN;AAAA,MACJ,GAAG,aAAa,CAAC,WAAW,WAAW,MAAM,CAAC;AAAA,IAClD;AACA,QAAI,QAAQ,WAAW,eAAe,SAAS;AAC3C,kBAAY,UAAU,YAAY;AAAA,QAC9B,MAAM;AAAA,QACN;AAAA,MACJ,GAAG,aAAa,CAAC,WAAW,WAAW,MAAM,CAAC;AAAA,IAClD;AACA,QAAI,QAAQ,WAAW,eAAe,SAAS;AAC3C,kBAAY,UAAU,YAAY;AAAA,QAC9B,MAAM;AAAA,QACN;AAAA,MACJ,GAAG,aAAa,CAAC,WAAW,WAAW,MAAM,CAAC;AAAA,IAClD;AACA,QAAI,IAAI,WAAW,SAAS,GAAG;AAC3B,kBAAY,UAAU,YAAY;AAAA,QAC9B,MAAM;AAAA,QACN;AAAA,MACJ,GAAG,aAAa,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC;AAAA,IAClD;AAAA,EACJ;AACA,MAAI,CAAC,WAAW;AACZ,UAAM,IAAI,UAAU,4DAA4D;AAAA,EACpF;AACA,MAAI,CAAC,QAAQ;AACT,UAAM,IAAI,WAAW,EAAE,CAAC,GAAG,GAAG,UAAU,CAAC;AAAA,EAC7C,OACK;AACD,WAAO,GAAG,IAAI;AAAA,EAClB;AACA,SAAO;AACX,GAzHwB;AA0HxB,IAAO,wBAAQ,8BAAO,KAAK,QAAQ;AAC/B,MAAI,eAAe,YAAY;AAC3B,WAAO;AAAA,EACX;AACA,MAAI,YAAY,GAAG,GAAG;AAClB,WAAO;AAAA,EACX;AACA,MAAI,YAAY,GAAG,GAAG;AAClB,QAAI,IAAI,SAAS,UAAU;AACvB,aAAO,IAAI,OAAO;AAAA,IACtB;AACA,QAAI,iBAAiB,OAAO,OAAO,IAAI,gBAAgB,YAAY;AAC/D,UAAI;AACA,eAAO,gBAAgB,KAAK,GAAG;AAAA,MACnC,SACO,KAAK;AACR,YAAI,eAAe,WAAW;AAC1B,gBAAM;AAAA,QACV;AAAA,MACJ;AAAA,IACJ;AACA,QAAI,MAAM,IAAI,OAAO,EAAE,QAAQ,MAAM,CAAC;AACtC,WAAO,UAAU,KAAK,KAAK,GAAG;AAAA,EAClC;AACA,MAAI,MAAM,GAAG,GAAG;AACZ,QAAI,IAAI,GAAG;AACP,aAAO,OAAO,IAAI,CAAC;AAAA,IACvB;AACA,WAAO,UAAU,KAAK,KAAK,KAAK,IAAI;AAAA,EACxC;AACA,QAAM,IAAI,MAAM,aAAa;AACjC,GA/Be;;;AC7If,IAAM,MAAM,wBAAC,QAAQ,MAAM,OAAO,WAAW,GAAjC;AACZ,IAAM,eAAe,wBAAC,KAAK,KAAK,UAAU;AACtC,MAAI,IAAI,QAAQ,QAAW;AACvB,QAAI;AACJ,YAAQ,OAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,mBAAW;AACX;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AACD,mBAAW;AACX;AAAA,IACR;AACA,QAAI,IAAI,QAAQ,UAAU;AACtB,YAAM,IAAI,UAAU,sDAAsD,QAAQ,gBAAgB;AAAA,IACtG;AAAA,EACJ;AACA,MAAI,IAAI,QAAQ,UAAa,IAAI,QAAQ,KAAK;AAC1C,UAAM,IAAI,UAAU,sDAAsD,GAAG,gBAAgB;AAAA,EACjG;AACA,MAAI,MAAM,QAAQ,IAAI,OAAO,GAAG;AAC5B,QAAI;AACJ,YAAQ,MAAM;AAAA,MACV,MAAK,UAAU,UAAU,UAAU;AAAA,MACnC,KAAK,QAAQ;AAAA,MACb,KAAK,IAAI,SAAS,QAAQ;AACtB,wBAAgB;AAChB;AAAA,MACJ,KAAK,IAAI,WAAW,OAAO;AACvB,wBAAgB;AAChB;AAAA,MACJ,KAAK,0BAA0B,KAAK,GAAG;AACnC,YAAI,CAAC,IAAI,SAAS,KAAK,KAAK,IAAI,SAAS,IAAI,GAAG;AAC5C,0BAAgB,UAAU,YAAY,YAAY;AAAA,QACtD,OACK;AACD,0BAAgB;AAAA,QACpB;AACA;AAAA,MACJ,MAAK,UAAU,aAAa,IAAI,WAAW,KAAK;AAC5C,wBAAgB;AAChB;AAAA,MACJ,KAAK,UAAU;AACX,wBAAgB,IAAI,WAAW,KAAK,IAAI,cAAc;AACtD;AAAA,IACR;AACA,QAAI,iBAAiB,IAAI,SAAS,WAAW,aAAa,MAAM,OAAO;AACnE,YAAM,IAAI,UAAU,+DAA+D,aAAa,gBAAgB;AAAA,IACpH;AAAA,EACJ;AACA,SAAO;AACX,GAnDqB;AAoDrB,IAAM,qBAAqB,wBAAC,KAAK,KAAK,UAAU;AAC5C,MAAI,eAAe;AACf;AACJ,MAAQ,MAAM,GAAG,GAAG;AAChB,QAAQ,YAAY,GAAG,KAAK,aAAa,KAAK,KAAK,KAAK;AACpD;AACJ,UAAM,IAAI,UAAU,yHAAyH;AAAA,EACjJ;AACA,MAAI,CAAC,oBAAU,GAAG,GAAG;AACjB,UAAM,IAAI,UAAU,QAAgB,KAAK,KAAK,aAAa,aAAa,gBAAgB,YAAY,CAAC;AAAA,EACzG;AACA,MAAI,IAAI,SAAS,UAAU;AACvB,UAAM,IAAI,UAAU,GAAG,IAAI,GAAG,CAAC,8DAA8D;AAAA,EACjG;AACJ,GAd2B;AAe3B,IAAM,sBAAsB,wBAAC,KAAK,KAAK,UAAU;AAC7C,MAAQ,MAAM,GAAG,GAAG;AAChB,YAAQ,OAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,YAAQ,aAAa,GAAG,KAAK,aAAa,KAAK,KAAK,KAAK;AACrD;AACJ,cAAM,IAAI,UAAU,kDAAkD;AAAA,MAC1E,KAAK;AAAA,MACL,KAAK;AACD,YAAQ,YAAY,GAAG,KAAK,aAAa,KAAK,KAAK,KAAK;AACpD;AACJ,cAAM,IAAI,UAAU,iDAAiD;AAAA,IAC7E;AAAA,EACJ;AACA,MAAI,CAAC,oBAAU,GAAG,GAAG;AACjB,UAAM,IAAI,UAAU,QAAgB,KAAK,KAAK,aAAa,aAAa,cAAc,CAAC;AAAA,EAC3F;AACA,MAAI,IAAI,SAAS,UAAU;AACvB,UAAM,IAAI,UAAU,GAAG,IAAI,GAAG,CAAC,mEAAmE;AAAA,EACtG;AACA,MAAI,IAAI,SAAS,UAAU;AACvB,YAAQ,OAAO;AAAA,MACX,KAAK;AACD,cAAM,IAAI,UAAU,GAAG,IAAI,GAAG,CAAC,uEAAuE;AAAA,MAC1G,KAAK;AACD,cAAM,IAAI,UAAU,GAAG,IAAI,GAAG,CAAC,0EAA0E;AAAA,MAC7G;AACI;AAAA,IACR;AAAA,EACJ;AACA,MAAI,IAAI,SAAS,WAAW;AACxB,YAAQ,OAAO;AAAA,MACX,KAAK;AACD,cAAM,IAAI,UAAU,GAAG,IAAI,GAAG,CAAC,wEAAwE;AAAA,MAC3G,KAAK;AACD,cAAM,IAAI,UAAU,GAAG,IAAI,GAAG,CAAC,yEAAyE;AAAA,MAC5G;AACI;AAAA,IACR;AAAA,EACJ;AACJ,GAzC4B;AA0C5B,IAAO,yBAAQ,wBAAC,KAAK,KAAK,UAAU;AAChC,QAAM,YAAY,IAAI,WAAW,IAAI,KACjC,QAAQ,SACR,IAAI,WAAW,OAAO,KACtB,oCAAoC,KAAK,GAAG,KAC5C,0CAA0C,KAAK,GAAG;AACtD,MAAI,WAAW;AACX,uBAAmB,KAAK,KAAK,KAAK;AAAA,EACtC,OACK;AACD,wBAAoB,KAAK,KAAK,KAAK;AAAA,EACvC;AACJ,GAZe;;;AChHf,IAAO,qBAAQ,wBAAC,KAAK,cAAc;AAC/B,QAAMC,QAAO,OAAO,IAAI,MAAM,EAAE,CAAC;AACjC,UAAQ,KAAK;AAAA,IACT,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,aAAO,EAAE,MAAAA,OAAM,MAAM,OAAO;AAAA,IAChC,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,aAAO,EAAE,MAAAA,OAAM,MAAM,WAAW,YAAY,SAAS,IAAI,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE;AAAA,IACjF,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,aAAO,EAAE,MAAAA,OAAM,MAAM,oBAAoB;AAAA,IAC7C,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,aAAO,EAAE,MAAAA,OAAM,MAAM,SAAS,YAAY,UAAU,WAAW;AAAA,IACnE,KAAK;AAAA,IACL,KAAK;AACD,aAAO,EAAE,MAAM,UAAU;AAAA,IAC7B,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,aAAO,EAAE,MAAM,IAAI;AAAA,IACvB;AACI,YAAM,IAAI,iBAAiB,OAAO,GAAG,6DAA6D;AAAA,EAC1G;AACJ,GA7Be;;;ACCf,IAAO,8BAAQ,8BAAO,KAAK,KAAK,UAAU;AACtC,MAAI,eAAe,YAAY;AAC3B,QAAI,CAAC,IAAI,WAAW,IAAI,GAAG;AACvB,YAAM,IAAI,UAAU,0BAAgB,KAAK,aAAa,aAAa,cAAc,CAAC;AAAA,IACtF;AACA,WAAO,OAAO,OAAO,UAAU,OAAO,KAAK,EAAE,MAAM,OAAO,IAAI,MAAM,EAAE,CAAC,IAAI,MAAM,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC;AAAA,EAC7G;AACA,oBAAkB,KAAK,KAAK,KAAK;AACjC,SAAO;AACX,GATe;;;ACCf,IAAO,iBAAQ,8BAAO,KAAK,KAAK,WAAW,SAAS;AAChD,QAAM,YAAY,MAAM,4BAAa,KAAK,KAAK,QAAQ;AACvD,2BAAe,KAAK,SAAS;AAC7B,QAAM,YAAY,mBAAgB,KAAK,UAAU,SAAS;AAC1D,MAAI;AACA,WAAO,MAAM,OAAO,OAAO,OAAO,WAAW,WAAW,WAAW,IAAI;AAAA,EAC3E,QACM;AACF,WAAO;AAAA,EACX;AACJ,GAVe;;;ACOf,eAAsB,gBAAgB,KAAK,KAAK,SAAS;AACrD,MAAI,CAAC,kBAAS,GAAG,GAAG;AAChB,UAAM,IAAI,WAAW,iCAAiC;AAAA,EAC1D;AACA,MAAI,IAAI,cAAc,UAAa,IAAI,WAAW,QAAW;AACzD,UAAM,IAAI,WAAW,uEAAuE;AAAA,EAChG;AACA,MAAI,IAAI,cAAc,UAAa,OAAO,IAAI,cAAc,UAAU;AAClE,UAAM,IAAI,WAAW,qCAAqC;AAAA,EAC9D;AACA,MAAI,IAAI,YAAY,QAAW;AAC3B,UAAM,IAAI,WAAW,qBAAqB;AAAA,EAC9C;AACA,MAAI,OAAO,IAAI,cAAc,UAAU;AACnC,UAAM,IAAI,WAAW,yCAAyC;AAAA,EAClE;AACA,MAAI,IAAI,WAAW,UAAa,CAAC,kBAAS,IAAI,MAAM,GAAG;AACnD,UAAM,IAAI,WAAW,uCAAuC;AAAA,EAChE;AACA,MAAI,aAAa,CAAC;AAClB,MAAI,IAAI,WAAW;AACf,QAAI;AACA,YAAM,kBAAkB,OAAK,IAAI,SAAS;AAC1C,mBAAa,KAAK,MAAM,QAAQ,OAAO,eAAe,CAAC;AAAA,IAC3D,QACM;AACF,YAAM,IAAI,WAAW,iCAAiC;AAAA,IAC1D;AAAA,EACJ;AACA,MAAI,CAAC,oBAAW,YAAY,IAAI,MAAM,GAAG;AACrC,UAAM,IAAI,WAAW,2EAA2E;AAAA,EACpG;AACA,QAAM,aAAa;AAAA,IACf,GAAG;AAAA,IACH,GAAG,IAAI;AAAA,EACX;AACA,QAAM,aAAa,sBAAa,YAAY,oBAAI,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,SAAS,MAAM,YAAY,UAAU;AAC3G,MAAI,MAAM;AACV,MAAI,WAAW,IAAI,KAAK,GAAG;AACvB,UAAM,WAAW;AACjB,QAAI,OAAO,QAAQ,WAAW;AAC1B,YAAM,IAAI,WAAW,yEAAyE;AAAA,IAClG;AAAA,EACJ;AACA,QAAM,EAAE,IAAI,IAAI;AAChB,MAAI,OAAO,QAAQ,YAAY,CAAC,KAAK;AACjC,UAAM,IAAI,WAAW,2DAA2D;AAAA,EACpF;AACA,QAAM,aAAa,WAAW,4BAAmB,cAAc,QAAQ,UAAU;AACjF,MAAI,cAAc,CAAC,WAAW,IAAI,GAAG,GAAG;AACpC,UAAM,IAAI,kBAAkB,sDAAsD;AAAA,EACtF;AACA,MAAI,KAAK;AACL,QAAI,OAAO,IAAI,YAAY,UAAU;AACjC,YAAM,IAAI,WAAW,8BAA8B;AAAA,IACvD;AAAA,EACJ,WACS,OAAO,IAAI,YAAY,YAAY,EAAE,IAAI,mBAAmB,aAAa;AAC9E,UAAM,IAAI,WAAW,wDAAwD;AAAA,EACjF;AACA,MAAI,cAAc;AAClB,MAAI,OAAO,QAAQ,YAAY;AAC3B,UAAM,MAAM,IAAI,YAAY,GAAG;AAC/B,kBAAc;AAAA,EAClB;AACA,yBAAa,KAAK,KAAK,QAAQ;AAC/B,QAAM,OAAO,OAAO,QAAQ,OAAO,IAAI,aAAa,EAAE,GAAG,QAAQ,OAAO,GAAG,GAAG,OAAO,IAAI,YAAY,WAAW,QAAQ,OAAO,IAAI,OAAO,IAAI,IAAI,OAAO;AACzJ,MAAI;AACJ,MAAI;AACA,gBAAY,OAAK,IAAI,SAAS;AAAA,EAClC,QACM;AACF,UAAM,IAAI,WAAW,0CAA0C;AAAA,EACnE;AACA,QAAM,IAAI,MAAM,sBAAa,KAAK,GAAG;AACrC,QAAM,WAAW,MAAM,eAAO,KAAK,GAAG,WAAW,IAAI;AACrD,MAAI,CAAC,UAAU;AACX,UAAM,IAAI,+BAA+B;AAAA,EAC7C;AACA,MAAI;AACJ,MAAI,KAAK;AACL,QAAI;AACA,gBAAU,OAAK,IAAI,OAAO;AAAA,IAC9B,QACM;AACF,YAAM,IAAI,WAAW,wCAAwC;AAAA,IACjE;AAAA,EACJ,WACS,OAAO,IAAI,YAAY,UAAU;AACtC,cAAU,QAAQ,OAAO,IAAI,OAAO;AAAA,EACxC,OACK;AACD,cAAU,IAAI;AAAA,EAClB;AACA,QAAM,SAAS,EAAE,QAAQ;AACzB,MAAI,IAAI,cAAc,QAAW;AAC7B,WAAO,kBAAkB;AAAA,EAC7B;AACA,MAAI,IAAI,WAAW,QAAW;AAC1B,WAAO,oBAAoB,IAAI;AAAA,EACnC;AACA,MAAI,aAAa;AACb,WAAO,EAAE,GAAG,QAAQ,KAAK,EAAE;AAAA,EAC/B;AACA,SAAO;AACX;AAzGsB;;;ACPtB,eAAsB,cAAc,KAAK,KAAK,SAAS;AACnD,MAAI,eAAe,YAAY;AAC3B,UAAM,QAAQ,OAAO,GAAG;AAAA,EAC5B;AACA,MAAI,OAAO,QAAQ,UAAU;AACzB,UAAM,IAAI,WAAW,4CAA4C;AAAA,EACrE;AACA,QAAM,EAAE,GAAG,iBAAiB,GAAG,SAAS,GAAG,WAAW,OAAO,IAAI,IAAI,MAAM,GAAG;AAC9E,MAAI,WAAW,GAAG;AACd,UAAM,IAAI,WAAW,qBAAqB;AAAA,EAC9C;AACA,QAAM,WAAW,MAAM,gBAAgB,EAAE,SAAS,WAAW,iBAAiB,UAAU,GAAG,KAAK,OAAO;AACvG,QAAM,SAAS,EAAE,SAAS,SAAS,SAAS,iBAAiB,SAAS,gBAAgB;AACtF,MAAI,OAAO,QAAQ,YAAY;AAC3B,WAAO,EAAE,GAAG,QAAQ,KAAK,SAAS,IAAI;AAAA,EAC1C;AACA,SAAO;AACX;AAjBsB;;;ACHtB,IAAO,gBAAQ,wBAAC,SAAS,KAAK,MAAM,KAAK,QAAQ,IAAI,GAAI,GAA1C;;;ACAf,IAAM,SAAS;AACf,IAAM,OAAO,SAAS;AACtB,IAAM,MAAM,OAAO;AACnB,IAAM,OAAO,MAAM;AACnB,IAAM,OAAO,MAAM;AACnB,IAAM,QAAQ;AACd,IAAO,eAAQ,wBAAC,QAAQ;AACpB,QAAM,UAAU,MAAM,KAAK,GAAG;AAC9B,MAAI,CAAC,WAAY,QAAQ,CAAC,KAAK,QAAQ,CAAC,GAAI;AACxC,UAAM,IAAI,UAAU,4BAA4B;AAAA,EACpD;AACA,QAAM,QAAQ,WAAW,QAAQ,CAAC,CAAC;AACnC,QAAM,OAAO,QAAQ,CAAC,EAAE,YAAY;AACpC,MAAI;AACJ,UAAQ,MAAM;AAAA,IACV,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,oBAAc,KAAK,MAAM,KAAK;AAC9B;AAAA,IACJ,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,oBAAc,KAAK,MAAM,QAAQ,MAAM;AACvC;AAAA,IACJ,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,oBAAc,KAAK,MAAM,QAAQ,IAAI;AACrC;AAAA,IACJ,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,oBAAc,KAAK,MAAM,QAAQ,GAAG;AACpC;AAAA,IACJ,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,oBAAc,KAAK,MAAM,QAAQ,IAAI;AACrC;AAAA,IACJ;AACI,oBAAc,KAAK,MAAM,QAAQ,IAAI;AACrC;AAAA,EACR;AACA,MAAI,QAAQ,CAAC,MAAM,OAAO,QAAQ,CAAC,MAAM,OAAO;AAC5C,WAAO,CAAC;AAAA,EACZ;AACA,SAAO;AACX,GAhDe;;;ACAf,SAAS,cAAc,OAAO,OAAO;AACjC,MAAI,CAAC,OAAO,SAAS,KAAK,GAAG;AACzB,UAAM,IAAI,UAAU,WAAW,KAAK,QAAQ;AAAA,EAChD;AACA,SAAO;AACX;AALS;AAMT,IAAM,eAAe,wBAAC,UAAU;AAC5B,MAAI,MAAM,SAAS,GAAG,GAAG;AACrB,WAAO,MAAM,YAAY;AAAA,EAC7B;AACA,SAAO,eAAe,MAAM,YAAY,CAAC;AAC7C,GALqB;AAMrB,IAAM,wBAAwB,wBAAC,YAAY,cAAc;AACrD,MAAI,OAAO,eAAe,UAAU;AAChC,WAAO,UAAU,SAAS,UAAU;AAAA,EACxC;AACA,MAAI,MAAM,QAAQ,UAAU,GAAG;AAC3B,WAAO,UAAU,KAAK,IAAI,UAAU,IAAI,KAAK,IAAI,IAAI,UAAU,CAAC,CAAC;AAAA,EACrE;AACA,SAAO;AACX,GAR8B;AASvB,SAAS,kBAAkB,iBAAiB,gBAAgB,UAAU,CAAC,GAAG;AAC7E,MAAI;AACJ,MAAI;AACA,cAAU,KAAK,MAAM,QAAQ,OAAO,cAAc,CAAC;AAAA,EACvD,QACM;AAAA,EACN;AACA,MAAI,CAAC,kBAAS,OAAO,GAAG;AACpB,UAAM,IAAI,WAAW,gDAAgD;AAAA,EACzE;AACA,QAAM,EAAE,IAAI,IAAI;AAChB,MAAI,QACC,OAAO,gBAAgB,QAAQ,YAC5B,aAAa,gBAAgB,GAAG,MAAM,aAAa,GAAG,IAAI;AAC9D,UAAM,IAAI,yBAAyB,qCAAqC,SAAS,OAAO,cAAc;AAAA,EAC1G;AACA,QAAM,EAAE,iBAAiB,CAAC,GAAG,QAAQ,SAAS,UAAU,YAAY,IAAI;AACxE,QAAM,gBAAgB,CAAC,GAAG,cAAc;AACxC,MAAI,gBAAgB;AAChB,kBAAc,KAAK,KAAK;AAC5B,MAAI,aAAa;AACb,kBAAc,KAAK,KAAK;AAC5B,MAAI,YAAY;AACZ,kBAAc,KAAK,KAAK;AAC5B,MAAI,WAAW;AACX,kBAAc,KAAK,KAAK;AAC5B,aAAW,SAAS,IAAI,IAAI,cAAc,QAAQ,CAAC,GAAG;AAClD,QAAI,EAAE,SAAS,UAAU;AACrB,YAAM,IAAI,yBAAyB,qBAAqB,KAAK,WAAW,SAAS,OAAO,SAAS;AAAA,IACrG;AAAA,EACJ;AACA,MAAI,UACA,EAAE,MAAM,QAAQ,MAAM,IAAI,SAAS,CAAC,MAAM,GAAG,SAAS,QAAQ,GAAG,GAAG;AACpE,UAAM,IAAI,yBAAyB,gCAAgC,SAAS,OAAO,cAAc;AAAA,EACrG;AACA,MAAI,WAAW,QAAQ,QAAQ,SAAS;AACpC,UAAM,IAAI,yBAAyB,gCAAgC,SAAS,OAAO,cAAc;AAAA,EACrG;AACA,MAAI,YACA,CAAC,sBAAsB,QAAQ,KAAK,OAAO,aAAa,WAAW,CAAC,QAAQ,IAAI,QAAQ,GAAG;AAC3F,UAAM,IAAI,yBAAyB,gCAAgC,SAAS,OAAO,cAAc;AAAA,EACrG;AACA,MAAI;AACJ,UAAQ,OAAO,QAAQ,gBAAgB;AAAA,IACnC,KAAK;AACD,kBAAY,aAAK,QAAQ,cAAc;AACvC;AAAA,IACJ,KAAK;AACD,kBAAY,QAAQ;AACpB;AAAA,IACJ,KAAK;AACD,kBAAY;AACZ;AAAA,IACJ;AACI,YAAM,IAAI,UAAU,oCAAoC;AAAA,EAChE;AACA,QAAM,EAAE,YAAY,IAAI;AACxB,QAAM,MAAM,cAAM,eAAe,oBAAI,KAAK,CAAC;AAC3C,OAAK,QAAQ,QAAQ,UAAa,gBAAgB,OAAO,QAAQ,QAAQ,UAAU;AAC/E,UAAM,IAAI,yBAAyB,gCAAgC,SAAS,OAAO,SAAS;AAAA,EAChG;AACA,MAAI,QAAQ,QAAQ,QAAW;AAC3B,QAAI,OAAO,QAAQ,QAAQ,UAAU;AACjC,YAAM,IAAI,yBAAyB,gCAAgC,SAAS,OAAO,SAAS;AAAA,IAChG;AACA,QAAI,QAAQ,MAAM,MAAM,WAAW;AAC/B,YAAM,IAAI,yBAAyB,sCAAsC,SAAS,OAAO,cAAc;AAAA,IAC3G;AAAA,EACJ;AACA,MAAI,QAAQ,QAAQ,QAAW;AAC3B,QAAI,OAAO,QAAQ,QAAQ,UAAU;AACjC,YAAM,IAAI,yBAAyB,gCAAgC,SAAS,OAAO,SAAS;AAAA,IAChG;AACA,QAAI,QAAQ,OAAO,MAAM,WAAW;AAChC,YAAM,IAAI,WAAW,sCAAsC,SAAS,OAAO,cAAc;AAAA,IAC7F;AAAA,EACJ;AACA,MAAI,aAAa;AACb,UAAM,MAAM,MAAM,QAAQ;AAC1B,UAAM,MAAM,OAAO,gBAAgB,WAAW,cAAc,aAAK,WAAW;AAC5E,QAAI,MAAM,YAAY,KAAK;AACvB,YAAM,IAAI,WAAW,4DAA4D,SAAS,OAAO,cAAc;AAAA,IACnH;AACA,QAAI,MAAM,IAAI,WAAW;AACrB,YAAM,IAAI,yBAAyB,iEAAiE,SAAS,OAAO,cAAc;AAAA,IACtI;AAAA,EACJ;AACA,SAAO;AACX;AAxFgB;AAyFT,IAAM,mBAAN,MAAuB;AAAA,EApH9B,OAoH8B;AAAA;AAAA;AAAA,EAC1B;AAAA,EACA,YAAY,SAAS;AACjB,QAAI,CAAC,kBAAS,OAAO,GAAG;AACpB,YAAM,IAAI,UAAU,kCAAkC;AAAA,IAC1D;AACA,SAAK,WAAW,gBAAgB,OAAO;AAAA,EAC3C;AAAA,EACA,OAAO;AACH,WAAO,QAAQ,OAAO,KAAK,UAAU,KAAK,QAAQ,CAAC;AAAA,EACvD;AAAA,EACA,IAAI,MAAM;AACN,WAAO,KAAK,SAAS;AAAA,EACzB;AAAA,EACA,IAAI,IAAI,OAAO;AACX,SAAK,SAAS,MAAM;AAAA,EACxB;AAAA,EACA,IAAI,MAAM;AACN,WAAO,KAAK,SAAS;AAAA,EACzB;AAAA,EACA,IAAI,IAAI,OAAO;AACX,SAAK,SAAS,MAAM;AAAA,EACxB;AAAA,EACA,IAAI,MAAM;AACN,WAAO,KAAK,SAAS;AAAA,EACzB;AAAA,EACA,IAAI,IAAI,OAAO;AACX,SAAK,SAAS,MAAM;AAAA,EACxB;AAAA,EACA,IAAI,IAAI,OAAO;AACX,SAAK,SAAS,MAAM;AAAA,EACxB;AAAA,EACA,IAAI,IAAI,OAAO;AACX,QAAI,OAAO,UAAU,UAAU;AAC3B,WAAK,SAAS,MAAM,cAAc,gBAAgB,KAAK;AAAA,IAC3D,WACS,iBAAiB,MAAM;AAC5B,WAAK,SAAS,MAAM,cAAc,gBAAgB,cAAM,KAAK,CAAC;AAAA,IAClE,OACK;AACD,WAAK,SAAS,MAAM,cAAM,oBAAI,KAAK,CAAC,IAAI,aAAK,KAAK;AAAA,IACtD;AAAA,EACJ;AAAA,EACA,IAAI,IAAI,OAAO;AACX,QAAI,OAAO,UAAU,UAAU;AAC3B,WAAK,SAAS,MAAM,cAAc,qBAAqB,KAAK;AAAA,IAChE,WACS,iBAAiB,MAAM;AAC5B,WAAK,SAAS,MAAM,cAAc,qBAAqB,cAAM,KAAK,CAAC;AAAA,IACvE,OACK;AACD,WAAK,SAAS,MAAM,cAAM,oBAAI,KAAK,CAAC,IAAI,aAAK,KAAK;AAAA,IACtD;AAAA,EACJ;AAAA,EACA,IAAI,IAAI,OAAO;AACX,QAAI,OAAO,UAAU,aAAa;AAC9B,WAAK,SAAS,MAAM,cAAM,oBAAI,KAAK,CAAC;AAAA,IACxC,WACS,iBAAiB,MAAM;AAC5B,WAAK,SAAS,MAAM,cAAc,eAAe,cAAM,KAAK,CAAC;AAAA,IACjE,WACS,OAAO,UAAU,UAAU;AAChC,WAAK,SAAS,MAAM,cAAc,eAAe,cAAM,oBAAI,KAAK,CAAC,IAAI,aAAK,KAAK,CAAC;AAAA,IACpF,OACK;AACD,WAAK,SAAS,MAAM,cAAc,eAAe,KAAK;AAAA,IAC1D;AAAA,EACJ;AACJ;;;ACrLA,eAAsB,UAAU,KAAK,KAAK,SAAS;AAC/C,QAAM,WAAW,MAAM,cAAc,KAAK,KAAK,OAAO;AACtD,MAAI,SAAS,gBAAgB,MAAM,SAAS,KAAK,KAAK,SAAS,gBAAgB,QAAQ,OAAO;AAC1F,UAAM,IAAI,WAAW,qCAAqC;AAAA,EAC9D;AACA,QAAM,UAAU,kBAAkB,SAAS,iBAAiB,SAAS,SAAS,OAAO;AACrF,QAAM,SAAS,EAAE,SAAS,iBAAiB,SAAS,gBAAgB;AACpE,MAAI,OAAO,QAAQ,YAAY;AAC3B,WAAO,EAAE,GAAG,QAAQ,KAAK,SAAS,IAAI;AAAA,EAC1C;AACA,SAAO;AACX;AAXsB;;;ACAtB,IAAO,eAAQ,8BAAO,KAAK,KAAK,SAAS;AACrC,QAAM,YAAY,MAAM,4BAAW,KAAK,KAAK,MAAM;AACnD,2BAAe,KAAK,SAAS;AAC7B,QAAM,YAAY,MAAM,OAAO,OAAO,KAAK,mBAAgB,KAAK,UAAU,SAAS,GAAG,WAAW,IAAI;AACrG,SAAO,IAAI,WAAW,SAAS;AACnC,GALe;;;ACKR,IAAM,gBAAN,MAAoB;AAAA,EAR3B,OAQ2B;AAAA;AAAA;AAAA,EACvB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY,SAAS;AACjB,QAAI,EAAE,mBAAmB,aAAa;AAClC,YAAM,IAAI,UAAU,2CAA2C;AAAA,IACnE;AACA,SAAK,WAAW;AAAA,EACpB;AAAA,EACA,mBAAmB,iBAAiB;AAChC,QAAI,KAAK,kBAAkB;AACvB,YAAM,IAAI,UAAU,4CAA4C;AAAA,IACpE;AACA,SAAK,mBAAmB;AACxB,WAAO;AAAA,EACX;AAAA,EACA,qBAAqB,mBAAmB;AACpC,QAAI,KAAK,oBAAoB;AACzB,YAAM,IAAI,UAAU,8CAA8C;AAAA,IACtE;AACA,SAAK,qBAAqB;AAC1B,WAAO;AAAA,EACX;AAAA,EACA,MAAM,KAAK,KAAK,SAAS;AACrB,QAAI,CAAC,KAAK,oBAAoB,CAAC,KAAK,oBAAoB;AACpD,YAAM,IAAI,WAAW,iFAAiF;AAAA,IAC1G;AACA,QAAI,CAAC,oBAAW,KAAK,kBAAkB,KAAK,kBAAkB,GAAG;AAC7D,YAAM,IAAI,WAAW,2EAA2E;AAAA,IACpG;AACA,UAAM,aAAa;AAAA,MACf,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,IACZ;AACA,UAAM,aAAa,sBAAa,YAAY,oBAAI,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,SAAS,MAAM,KAAK,kBAAkB,UAAU;AACtH,QAAI,MAAM;AACV,QAAI,WAAW,IAAI,KAAK,GAAG;AACvB,YAAM,KAAK,iBAAiB;AAC5B,UAAI,OAAO,QAAQ,WAAW;AAC1B,cAAM,IAAI,WAAW,yEAAyE;AAAA,MAClG;AAAA,IACJ;AACA,UAAM,EAAE,IAAI,IAAI;AAChB,QAAI,OAAO,QAAQ,YAAY,CAAC,KAAK;AACjC,YAAM,IAAI,WAAW,2DAA2D;AAAA,IACpF;AACA,2BAAa,KAAK,KAAK,MAAM;AAC7B,QAAI,UAAU,KAAK;AACnB,QAAI,KAAK;AACL,gBAAU,QAAQ,OAAO,OAAK,OAAO,CAAC;AAAA,IAC1C;AACA,QAAI;AACJ,QAAI,KAAK,kBAAkB;AACvB,wBAAkB,QAAQ,OAAO,OAAK,KAAK,UAAU,KAAK,gBAAgB,CAAC,CAAC;AAAA,IAChF,OACK;AACD,wBAAkB,QAAQ,OAAO,EAAE;AAAA,IACvC;AACA,UAAM,OAAO,OAAO,iBAAiB,QAAQ,OAAO,GAAG,GAAG,OAAO;AACjE,UAAM,IAAI,MAAM,sBAAa,KAAK,GAAG;AACrC,UAAM,YAAY,MAAM,aAAK,KAAK,GAAG,IAAI;AACzC,UAAM,MAAM;AAAA,MACR,WAAW,OAAK,SAAS;AAAA,MACzB,SAAS;AAAA,IACb;AACA,QAAI,KAAK;AACL,UAAI,UAAU,QAAQ,OAAO,OAAO;AAAA,IACxC;AACA,QAAI,KAAK,oBAAoB;AACzB,UAAI,SAAS,KAAK;AAAA,IACtB;AACA,QAAI,KAAK,kBAAkB;AACvB,UAAI,YAAY,QAAQ,OAAO,eAAe;AAAA,IAClD;AACA,WAAO;AAAA,EACX;AACJ;;;ACpFO,IAAM,cAAN,MAAkB;AAAA,EADzB,OACyB;AAAA;AAAA;AAAA,EACrB;AAAA,EACA,YAAY,SAAS;AACjB,SAAK,aAAa,IAAI,cAAc,OAAO;AAAA,EAC/C;AAAA,EACA,mBAAmB,iBAAiB;AAChC,SAAK,WAAW,mBAAmB,eAAe;AAClD,WAAO;AAAA,EACX;AAAA,EACA,MAAM,KAAK,KAAK,SAAS;AACrB,UAAM,MAAM,MAAM,KAAK,WAAW,KAAK,KAAK,OAAO;AACnD,QAAI,IAAI,YAAY,QAAW;AAC3B,YAAM,IAAI,UAAU,2DAA2D;AAAA,IACnF;AACA,WAAO,GAAG,IAAI,SAAS,IAAI,IAAI,OAAO,IAAI,IAAI,SAAS;AAAA,EAC3D;AACJ;;;ACdO,IAAM,UAAN,MAAc;AAAA,EAHrB,OAGqB;AAAA;AAAA;AAAA,EACjB;AAAA,EACA;AAAA,EACA,YAAY,UAAU,CAAC,GAAG;AACtB,SAAK,OAAO,IAAI,iBAAiB,OAAO;AAAA,EAC5C;AAAA,EACA,UAAU,QAAQ;AACd,SAAK,KAAK,MAAM;AAChB,WAAO;AAAA,EACX;AAAA,EACA,WAAW,SAAS;AAChB,SAAK,KAAK,MAAM;AAChB,WAAO;AAAA,EACX;AAAA,EACA,YAAY,UAAU;AAClB,SAAK,KAAK,MAAM;AAChB,WAAO;AAAA,EACX;AAAA,EACA,OAAO,OAAO;AACV,SAAK,KAAK,MAAM;AAChB,WAAO;AAAA,EACX;AAAA,EACA,aAAa,OAAO;AAChB,SAAK,KAAK,MAAM;AAChB,WAAO;AAAA,EACX;AAAA,EACA,kBAAkB,OAAO;AACrB,SAAK,KAAK,MAAM;AAChB,WAAO;AAAA,EACX;AAAA,EACA,YAAY,OAAO;AACf,SAAK,KAAK,MAAM;AAChB,WAAO;AAAA,EACX;AAAA,EACA,mBAAmB,iBAAiB;AAChC,SAAK,mBAAmB;AACxB,WAAO;AAAA,EACX;AAAA,EACA,MAAM,KAAK,KAAK,SAAS;AACrB,UAAM,MAAM,IAAI,YAAY,KAAK,KAAK,KAAK,CAAC;AAC5C,QAAI,mBAAmB,KAAK,gBAAgB;AAC5C,QAAI,MAAM,QAAQ,KAAK,kBAAkB,IAAI,KACzC,KAAK,iBAAiB,KAAK,SAAS,KAAK,KACzC,KAAK,iBAAiB,QAAQ,OAAO;AACrC,YAAM,IAAI,WAAW,qCAAqC;AAAA,IAC9D;AACA,WAAO,IAAI,KAAK,KAAK,OAAO;AAAA,EAChC;AACJ;;;AC9BA,IAAM,OAAO,wBAAC,KAAK,SAAS,KAAK,UAAU,CAAC,MAC1C,IAAI,SAAS,KAAK,UAAU,GAAG,GAAG;AAAA,EAChC;AAAA,EACA,SAAS,EAAE,gBAAgB,oBAAoB,GAAG,QAAQ;AAC5D,CAAC,GAJU;AAMb,SAAS,gBAAgB,QAAQ,gBAAgB;AAC/C,QAAM,QAAQ,wBAAC,OAAO,KAAK,IAAI,YAAY,GAA7B;AACd,QAAM,IAAI,MAAM,MAAM;AACtB,QAAM,KACJ,KACA,eAAe,KAAK,CAAC,MAAM;AACzB,UAAM,IAAI,MAAM,EAAE,KAAK,CAAC;AACxB,QAAI,CAAC,EAAG,QAAO;AACf,QAAI,MAAM,IAAK,QAAO;AACtB,WAAO,MAAM,KAAK,EAAE,WAAW,CAAC;AAAA,EAClC,CAAC;AAEH,QAAM,cAAc,KAAK,SAAS;AAClC,QAAM,IAAI;AAAA,IACR,gCAAgC;AAAA,IAChC,gCAAgC;AAAA,IAChC,0BAA0B;AAAA,IAC1B,oCAAoC;AAAA,IACpC,MAAM;AAAA,EACR;AACA,MAAI,YAAa,GAAE,6BAA6B,IAAI;AACpD,SAAO;AACT;AAtBS;AAyCT,eAAe,cAAcC,MAAK,OAAO;AACvC,QAAM,MAAM,QAAQ,OAAO,SAAS,EAAE,EAAE,KAAK,EAAE,YAAY,CAAC;AAC5D,QAAM,MAAM,MAAMA,KAAI,aAAa,IAAI,GAAG;AAC1C,MAAI,CAAC,IAAK,QAAO;AACjB,MAAI;AACF,UAAM,IAAI,KAAK,MAAM,GAAG;AACxB,WAAO;AAAA,MACL,OAAO,OAAO,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,YAAY;AAAA,MAChD,cAAc,OAAO,EAAE,gBAAgB,EAAE;AAAA,MACzC,MAAM,OAAO,EAAE,QAAQ,QAAQ,EAAE,YAAY;AAAA,MAC7C,WAAW,OAAO,EAAE,aAAa,EAAE;AAAA,MACnC,UAAU,OAAO,EAAE,YAAY,EAAE;AAAA,IACnC;AAAA,EACF,QAAQ;AACN,WAAO;AAAA,EACT;AACF;AAhBe;AAmBf,SAAS,UAAUA,MAAK;AACtB,MAAI;AACF,UAAM,MAAM,KAAK,MAAMA,KAAI,cAAc,IAAI;AAC7C,QAAI,CAAC,MAAM,QAAQ,GAAG,EAAG,QAAO,CAAC;AACjC,WAAO,IACJ,IAAI,CAAC,OAAO;AAAA,MACX,OAAO,OAAO,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,YAAY;AAAA,MAChD,cAAc,OAAO,EAAE,gBAAgB,EAAE;AAAA,MACzC,MAAM,OAAO,EAAE,QAAQ,QAAQ,EAAE,YAAY;AAAA,MAC7C,WAAW,OAAO,EAAE,aAAa,EAAE;AAAA,MACnC,UAAU,OAAO,EAAE,YAAY,EAAE;AAAA,IACnC,EAAE,EACD,OAAO,CAAC,MAAM,EAAE,SAAS,EAAE,YAAY;AAAA,EAC5C,QAAQ;AACN,WAAO,CAAC;AAAA,EACV;AACF;AAhBS;AAkBT,SAAS,UAAU,MAAM,OAAO,OAAO,CAAC,GAAG;AACzC,QAAM,QAAQ,CAAC,GAAG,IAAI,IAAI,SAAS,EAAE,EAAE;AACvC,MAAI,KAAK,UAAU,KAAM,OAAM,KAAK,WAAW,KAAK,MAAM,EAAE;AAC5D,MAAI,KAAK,QAAS,OAAM,KAAK,WAAW,KAAK,QAAQ,YAAY,CAAC,EAAE;AACpE,QAAM,KAAK,QAAQ,KAAK,QAAQ,GAAG,EAAE;AACrC,MAAI,KAAK,SAAU,OAAM,KAAK,YAAY,KAAK,QAAQ,EAAE;AACzD,MAAI,KAAK,OAAQ,OAAM,KAAK,QAAQ;AACpC,MAAI,KAAK,SAAU,OAAM,KAAK,UAAU;AACxC,MAAI,KAAK,OAAQ,OAAM,KAAK,UAAU,KAAK,MAAM,EAAE;AACnD,SAAO,MAAM,KAAK,IAAI;AACxB;AAVS;AAWT,SAAS,UAAU,MAAM,OAAO,CAAC,GAAG;AAClC,SAAO,UAAU,MAAM,IAAI,EAAE,GAAG,MAAM,SAAS,oBAAI,KAAK,CAAC,GAAG,QAAQ,EAAE,CAAC;AACzE;AAFS;AAIT,eAAe,WAAW,SAAS,QAAQ,UAAU,IAAI;AACvD,SAAO,IAAI,QAAQ,OAAO,EACvB,mBAAmB,EAAE,KAAK,QAAQ,CAAC,EACnC,YAAY,EACZ,kBAAkB,GAAG,OAAO,GAAG,EAC/B,KAAK,MAAM;AAChB;AANe;AAOf,eAAe,YAAY,SAAS,QAAQ,OAAO,GAAG;AACpD,SAAO,IAAI,QAAQ,OAAO,EACvB,mBAAmB,EAAE,KAAK,QAAQ,CAAC,EACnC,YAAY,EACZ,kBAAkB,GAAG,IAAI,GAAG,EAC5B,KAAK,MAAM;AAChB;AANe;AAOf,eAAe,UAAU,OAAO,QAAQ,OAAO,CAAC,GAAG;AAEjD,QAAM,EAAE,QAAQ,IAAI,MAAM,UAAU,OAAO,QAAQ;AAAA,IACjD,gBAAgB;AAAA,IAChB,GAAG;AAAA,EACL,CAAC;AACD,SAAO;AACT;AAPe;AASf,eAAe,UAAU,OAAO;AAC9B,QAAM,MAAM,IAAI,YAAY;AAC5B,QAAM,MAAM,MAAM,OAAO,OAAO,OAAO,WAAW,IAAI,OAAO,KAAK,CAAC;AACnE,SAAO,CAAC,GAAG,IAAI,WAAW,GAAG,CAAC,EAC3B,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,SAAS,GAAG,GAAG,CAAC,EAC1C,KAAK,EAAE;AACZ;AANe;AASf,eAAe,cAAcA,MAAK,IAAI,YAAY,KAAK,MAAM,GAAG;AAC9D,MAAI,CAAC,GAAI,QAAO;AAChB,QAAM,MAAM,YAAY,EAAE;AAC1B,QAAM,OAAO,OAAQ,MAAMA,KAAI,aAAa,IAAI,GAAG,KAAM,GAAG;AAC5D,MAAI,QAAQ,IAAK,QAAO;AACxB,QAAMA,KAAI,aAAa,IAAI,KAAK,OAAO,OAAO,CAAC,GAAG,EAAE,eAAe,UAAU,CAAC;AAC9E,SAAO;AACT;AAPe;AASf,eAAe,MAAMA,MAAK,MAAM,EAAE,OAAO,SAAS,IAAI,OAAO,GAAG;AAC9D,MAAI;AACF,UAAM,QAAO,oBAAI,KAAK,GAAE,YAAY;AACpC,UAAM,SAAS,KAAK,MAAM,UAAU,EAAE,IAAI;AAC1C,UAAM,MAAM,SAAS,IAAI,IAAI,IAAI,IAAI,MAAM;AAC3C,UAAM,QAAQ,KAAK,UAAU;AAAA,MAC3B;AAAA,MACA;AAAA,MACA,OAAO,SAAS;AAAA,MAChB,SAAS,CAAC,CAAC;AAAA,MACX;AAAA,MACA,QAAQ,UAAU;AAAA,IACpB,CAAC;AACD,UAAMA,KAAI,aAAa,IAAI,KAAK,OAAO,EAAE,eAAe,KAAK,KAAK,KAAK,GAAG,CAAC;AAAA,EAC7E,QAAQ;AAAA,EAAE;AACZ;AAfe;AAkBf,IAAM,gBAAgB;AACtB,IAAM,gBAAgB;AAEtB,SAAS,UAAUA,MAAK,KAAK;AAC3B,MAAI,QAAQ,cAAe,QAAOA,KAAI;AACtC,MAAI,QAAQ,cAAe,QAAOA,KAAI;AACtC,SAAOA,KAAI;AACb;AAJS;AAMT,eAAe,YAAYA,MAAK,KAAK;AACnC,QAAM,KAAK,UAAUA,MAAK,GAAG;AAC7B,QAAM,MAAM,MAAM,GAAG,IAAI,KAAK,MAAM;AACpC,SAAO,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC;AACrC;AAJe;AAMf,eAAe,YAAYA,MAAK,KAAK,MAAM;AACzC,QAAM,KAAK,UAAUA,MAAK,GAAG;AAC7B,QAAM,GAAG,IAAI,KAAK,KAAK,UAAU,IAAI,CAAC;AACxC;AAHe;AAQf,SAAS,YAAY,KAAK;AACxB,QAAM,OAAO,KAAK,UAAU;AAAA,IAC1B,GAAG,IAAI;AAAA,IACP,GAAG,IAAI;AAAA,MACL,CAAC,GAAG,MACF,IACA,OAAO,EAAE,eAAe,CAAC,IACzB,OAAO,EAAE,kBAAkB,CAAC,IAC5B,OAAO,EAAE,gBAAgB,CAAC,IAC1B,OAAO,EAAE,QAAQ,CAAC;AAAA,MACpB;AAAA,IACF;AAAA,EACF,CAAC;AACD,SAAO,MAAM,KAAK,OAAO,SAAS,EAAE,CAAC,IAAI,IAAI,MAAM;AACrD;AAdS;AAgBT,SAAS,gBAAgB,SAAS;AAChC,QAAM,OAAO,QAAQ,QAAQ,IAAI,eAAe,KAAK;AACrD,SAAO,KAAK,WAAW,SAAS,IAAI,KAAK,MAAM,CAAC,IAAI;AACtD;AAHS;AAIT,eAAe,mBAAmB,SAAS,QAAQ;AACjD,QAAM,QAAQ,gBAAgB,OAAO;AACrC,MAAI,CAAC,MAAO,OAAM,OAAO,OAAO,IAAI,MAAM,eAAe,GAAG,EAAE,QAAQ,IAAI,CAAC;AAC3E,QAAM,UAAU,MAAM,UAAU,OAAO,MAAM;AAC7C,QAAM,OAAO,OAAO,QAAQ,QAAQ,EAAE,EAAE,YAAY;AACpD,QAAM,UAAU,SAAS,UAAU,SAAS;AAC5C,MAAI,CAAC,QAAS,OAAM,OAAO,OAAO,IAAI,MAAM,WAAW,GAAG,EAAE,QAAQ,IAAI,CAAC;AACzE,SAAO;AACT;AARe;AAWf,IAAM,WAAW,wBAAC,QAAQ;AACxB,MAAI;AACF,UAAM,IAAI,IAAI,IAAI,GAAG;AACrB,QAAI,EAAE,SAAS,SAAS,UAAU,EAAG,QAAO,EAAE,SAAS,MAAM,CAAC;AAC9D,QAAI,EAAE,aAAa,IAAI,GAAG,EAAG,QAAO,EAAE,aAAa,IAAI,GAAG;AAC1D,UAAM,IAAI,EAAE,SAAS,MAAM,mBAAmB;AAC9C,QAAI,EAAG,QAAO,EAAE,CAAC;AAAA,EACnB,QAAQ;AAAA,EAAE;AACV,SAAO;AACT,GATiB;AAWjB,eAAe,kBAAkBA,MAAK,SAAS;AAC7C,QAAM,MAAMA,KAAI,mBAAmBA,KAAI,wBAAwB;AAC/D,MAAI,CAAC,IAAK,QAAO;AACjB,QAAM,MAAM,mEAAmE;AAAA,IAC7E;AAAA,EACF,CAAC,QAAQ,mBAAmB,GAAG,CAAC;AAChC,QAAM,OAAO,MAAM,MAAM,KAAK,EAAE,SAAS,EAAE,QAAQ,mBAAmB,EAAE,CAAC;AACzE,MAAI,CAAC,KAAK,GAAI,QAAO;AACrB,QAAM,IAAI,MAAM,KAAK,KAAK,EAAE,MAAM,MAAM,IAAI;AAC5C,QAAM,QAAQ,OAAO,GAAG,QAAQ,CAAC,GAAG,YAAY,aAAa,CAAC;AAC9D,SAAO,OAAO,SAAS,KAAK,IAAI,QAAQ;AAC1C;AAXe;AAaf,SAAS,QAAQ,IAAI,MAAM,KAAK,IAAI,GAAG;AACrC,MAAI,CAAC,GAAI,QAAO;AAChB,SAAO,MAAM,OAAO,EAAE,IAAI,IAAI,KAAK,KAAK,KAAK;AAC/C;AAHS;AAWT,SAAS,YAAY,QAAQ,GAAG,iBAAiB,MAAM,YAAY,MAAM,MAAM,KAAK,IAAI,GAAG;AACzF,MAAI,CAAC,MAAO,QAAO;AACnB,QAAM,SAAS,kBAAkB,aAAa;AAC9C,QAAM,OAAO,KAAK,IAAI,IAAI,MAAM,OAAO,MAAM,KAAK,KAAQ;AAE1D,QAAM,YAAY,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,IAAI,OAAO,EAAE,CAAC;AAC1D,QAAM,MAAM,KAAK,MAAM,QAAQ,CAAC,IAAI,MAAM;AAC1C,SAAO,KAAK,MAAM,KAAK,IAAI,KAAK,GAAG,CAAC;AACtC;AARS;AAWT,IAAO,iBAAQ;AAAA,EACb,MAAM,MAAM,SAASA,MAAK;AACxB,UAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAC/B,UAAM,SAAS,QAAQ,QAAQ,IAAI,QAAQ,KAAK;AAChD,UAAM,kBAAkBA,KAAI,mBAAmB,IAC5C,MAAM,GAAG,EACT,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,EACnB,OAAO,OAAO;AAEjB,UAAM,OAAO,gBAAgB,QAAQ,cAAc;AACnD,UAAM,SAAS,IAAI,YAAY,EAAE,OAAOA,KAAI,cAAc,WAAW;AACrE,UAAM,QAAQ,UAAUA,IAAG;AAC3B,UAAM,KACJ,QAAQ,QAAQ,IAAI,kBAAkB,KACtC,QAAQ,QAAQ,IAAI,iBAAiB,KACrC;AAGF,QAAI,QAAQ,WAAW,WAAW;AAChC,aAAO,IAAI,SAAS,MAAM,EAAE,QAAQ,KAAK,SAAS,KAAK,CAAC;AAAA,IAC1D;AAGA,SACG,IAAI,aAAa,OAAO,IAAI,aAAa,cAC1C,QAAQ,WAAW,OACnB;AACA,aAAO,KAAK,EAAE,IAAI,MAAM,SAAS,eAAe,MAAM,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI;AAAA,IAC/E;AAGA,QAAI,IAAI,aAAa,iBAAiB,QAAQ,WAAW,QAAQ;AAC/D,UAAI;AACF,YAAI,MAAM,cAAcA,MAAK,EAAE,GAAG;AAChC,gBAAM,MAAMA,MAAK,SAAS;AAAA,YACxB,OAAO;AAAA,YACP,SAAS;AAAA,YACT;AAAA,YACA,QAAQ;AAAA,UACV,CAAC;AACD,iBAAO,KAAK,EAAE,OAAO,sCAAsC,GAAG,KAAK,IAAI;AAAA,QACzE;AAEA,cAAM,OAAO,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAClD,cAAM,QAAQ,OAAO,KAAK,SAAS,EAAE,EAAE,KAAK,EAAE,YAAY;AAC1D,cAAM,WAAW,OAAO,KAAK,YAAY,EAAE;AAE3C,YAAI,CAAC,SAAS,CAAC,UAAU;AACvB,iBAAO,KAAK,EAAE,OAAO,8BAA8B,GAAG,KAAK,IAAI;AAAA,QACjE;AAGA,YAAI,OAAO,MAAM,cAAcA,MAAK,KAAK;AAGzC,YAAI,CAAC,MAAM;AACT,iBAAO,MAAM,KAAK,CAAC,MAAM,EAAE,UAAU,KAAK,KAAK;AAAA,QACjD;AAEA,YAAI,CAAC,MAAM;AACT,gBAAM,MAAMA,MAAK,SAAS;AAAA,YACxB;AAAA,YACA,SAAS;AAAA,YACT;AAAA,YACA,QAAQ;AAAA,UACV,CAAC;AACD,iBAAO,KAAK,EAAE,OAAO,4BAA4B,GAAG,KAAK,IAAI;AAAA,QAC/D;AAEA,cAAM,KAAK,MAAM,iBAAO,QAAQ,UAAU,KAAK,YAAY;AAC3D,YAAI,CAAC,IAAI;AACP,gBAAM,MAAMA,MAAK,SAAS;AAAA,YACxB;AAAA,YACA,SAAS;AAAA,YACT;AAAA,YACA,QAAQ;AAAA,UACV,CAAC;AACD,iBAAO,KAAK,EAAE,OAAO,4BAA4B,GAAG,KAAK,IAAI;AAAA,QAC/D;AAEA,cAAM,UAAU;AAAA,UACd,OAAO,KAAK;AAAA,UACZ,MAAM,KAAK;AAAA;AAAA,UACX,WAAW,KAAK,aAAa;AAAA,UAC7B,UAAU,KAAK,YAAY;AAAA,QAC7B;AAEA,cAAM,SAAS,MAAM,WAAW,SAAS,QAAQ,EAAE;AACnD,cAAM,UAAU,MAAM,YAAY,EAAE,GAAG,SAAS,MAAM,UAAU,GAAG,QAAQ,CAAC;AAE5E,cAAM,gBAAgB,UAAU,cAAc,SAAS;AAAA,UACrD,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,MAAM;AAAA,UACN,QAAQ,KAAK,KAAK,KAAK;AAAA,QACzB,CAAC;AAED,cAAM,MAAMA,MAAK,SAAS,EAAE,OAAO,SAAS,MAAM,GAAG,CAAC;AAEtD,cAAM,UAAU;AAAA,UACd,GAAG;AAAA,UACH,gBAAgB;AAAA,UAChB,cAAc;AAAA,QAChB;AACA,eAAO,IAAI;AAAA,UACT,KAAK,UAAU,EAAE,OAAO,QAAQ,MAAM,KAAK,KAAK,CAAC;AAAA,UACjD,EAAE,QAAQ,KAAK,QAAQ;AAAA,QACzB;AAAA,MACF,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,cAAc,GAAG,KAAK,IAAI;AAAA,MACjD;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,mBAAmB,QAAQ,WAAW,QAAQ;AACjE,YAAM,UAAU,QAAQ,QAAQ,IAAI,QAAQ,KAAK;AACjD,YAAM,IAAI,QAAQ,MAAM,8BAA8B;AACtD,YAAM,UAAU,IAAI,mBAAmB,EAAE,CAAC,CAAC,IAAI;AAC/C,UAAI,CAAC,QAAS,QAAO,KAAK,EAAE,OAAO,mBAAmB,GAAG,KAAK,IAAI;AAElE,UAAI;AACF,cAAM,UAAU,MAAM,UAAU,SAAS,MAAM;AAC/C,YAAI,QAAQ,SAAS,UAAW,OAAM,IAAI,MAAM,aAAa;AAE7D,cAAM,YAAY,MAAM;AAAA,UACtB;AAAA,YACE,OAAO,QAAQ;AAAA,YACf,MAAM,QAAQ;AAAA,YACd,WAAW,QAAQ,aAAa;AAAA,YAChC,UAAU,QAAQ,YAAY;AAAA,UAChC;AAAA,UACA;AAAA,UACA;AAAA,QACF;AACA,cAAM,aAAa,MAAM;AAAA,UACvB;AAAA,YACE,OAAO,QAAQ;AAAA,YACf,MAAM,QAAQ;AAAA,YACd,WAAW,QAAQ,aAAa;AAAA,YAChC,UAAU,QAAQ,YAAY;AAAA,YAC9B,MAAM;AAAA,UACR;AAAA,UACA;AAAA,UACA;AAAA,QACF;AACA,cAAM,SAAS,UAAU,cAAc,YAAY;AAAA,UACjD,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,MAAM;AAAA,UACN,QAAQ,KAAK,KAAK,KAAK;AAAA,QACzB,CAAC;AAED,cAAM,UAAU,EAAE,GAAG,MAAM,gBAAgB,oBAAoB,cAAc,OAAO;AACpF,eAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ,KAAK,CAAC,GAAG;AAAA,UAC5E,QAAQ;AAAA,UACR;AAAA,QACF,CAAC;AAAA,MACH,QAAQ;AACN,cAAMC,SAAQ,UAAU,cAAc;AAAA,UACpC,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,MAAM;AAAA,QACR,CAAC;AACD,cAAM,UAAU,EAAE,GAAG,MAAM,gBAAgB,oBAAoB,cAAcA,OAAM;AACnF,eAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,kBAAkB,CAAC,GAAG;AAAA,UAChE,QAAQ;AAAA,UACR;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,kBAAkB,QAAQ,WAAW,QAAQ;AAChE,YAAMA,SAAQ,UAAU,cAAc;AAAA,QACpC,UAAU;AAAA,QACV,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,MAAM;AAAA,MACR,CAAC;AACD,YAAM,UAAU,EAAE,GAAG,MAAM,gBAAgB,oBAAoB,cAAcA,OAAM;AACnF,aAAO,IAAI,SAAS,KAAK,UAAU,EAAE,IAAI,KAAK,CAAC,GAAG,EAAE,QAAQ,KAAK,QAAQ,CAAC;AAAA,IAC5E;AAGA,QAAI,IAAI,aAAa,gBAAgB,QAAQ,WAAW,OAAO;AAC7D,YAAM,QAAQ,gBAAgB,OAAO;AACrC,UAAI,CAAC,MAAO,QAAO,KAAK,EAAE,OAAO,gBAAgB,GAAG,KAAK,IAAI;AAC7D,UAAI;AACF,cAAM,UAAU,MAAM,UAAU,OAAO,MAAM;AAC7C,eAAO;AAAA,UACL;AAAA,YACE,SAAS,WAAW,QAAQ,KAAK;AAAA,YACjC,OAAO,QAAQ;AAAA,YACf,MAAM,QAAQ;AAAA,UAChB;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA,MACF,QAAQ;AACN,eAAO,KAAK,EAAE,OAAO,2BAA2B,GAAG,KAAK,IAAI;AAAA,MAC9D;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,aAAa,QAAQ,WAAW,OAAO;AAC1D,aAAO,KAAK;AAAA,QACV,MAAM;AAAA,UACJ,MAAM;AAAA,UACN,SAAS;AAAA,QACX;AAAA,QACA,UAAU;AAAA,UACR,OAAO;AAAA,UACP,KAAK;AAAA,QACP;AAAA,MACF,GAAG,KAAK,IAAI;AAAA,IACd;AAIA,QAAI,IAAI,aAAa,cAAc,QAAQ,WAAW,OAAO;AAG3D,YAAM,OAAO,MAAMD,KAAI,aAAa,IAAI,wBAAwB,MAAM,KAAK,CAAC;AAC5E,aAAO,KAAK,EAAE,SAAS,KAAK,GAAG,KAAK,IAAI;AAAA,IAC1C;AAGA,QAAI,IAAI,aAAa,oBAAoB,QAAQ,WAAW,OAAO;AACjE,YAAM,OAAO,MAAMA,KAAI,aAAa,IAAI,qBAAqB,MAAM,KAAK,EAAE,YAAY,CAAC,GAAG,MAAM,CAAC,GAAG,IAAI,KAAK,IAAI,EAAE;AACnH,aAAO,KAAK,MAAM,KAAK,IAAI;AAAA,IAC7B;AAGA,QAAI,IAAI,aAAa,cAAc,QAAQ,WAAW,QAAQ;AAC5D,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,OAAO,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAClD,cAAM,MAAM,KAAK,IAAI;AAErB,YAAI,CAAC,KAAK,QAAQ,CAAC,KAAK,WAAW;AACjC,iBAAO,KAAK,EAAE,OAAO,+BAA+B,GAAG,KAAK,IAAI;AAAA,QAClE;AAEA,cAAM,OAAO,MAAMA,KAAI,aAAa,IAAI,wBAAwB,MAAM,KAAK,CAAC;AAC5E,cAAM,KAAK,KAAK,GAAG,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC;AAE1D,cAAM,MAAM;AAAA,UACV;AAAA,UACA,MAAM,OAAO,KAAK,IAAI;AAAA,UACtB,WAAW,OAAO,KAAK,SAAS;AAAA,UAChC,QAAQ,OAAO,KAAK,UAAU,EAAE;AAAA,UAChC,UAAU,OAAO,KAAK,YAAY,SAAS;AAAA,UAC3C,WAAW;AAAA,UACX,aAAa;AAAA,QACf;AAEA,aAAK,KAAK,GAAG;AACb,cAAMA,KAAI,aAAa,IAAI,wBAAwB,KAAK,UAAU,IAAI,CAAC;AACvE,eAAO,KAAK,EAAE,QAAQ,IAAI,GAAG,KAAK,IAAI;AAAA,MACxC,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,cAAc,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC1E;AAAA,IACF;AAGA,QAAI,IAAI,SAAS,WAAW,WAAW,KAAK,QAAQ,WAAW,OAAO;AACpE,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,KAAK,mBAAmB,IAAI,SAAS,MAAM,GAAG,EAAE,CAAC,KAAK,EAAE;AAC9D,cAAM,UAAU,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAErD,cAAM,OAAO,MAAMA,KAAI,aAAa,IAAI,wBAAwB,MAAM,KAAK,CAAC;AAC5E,cAAM,MAAM,KAAK,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;AAC7C,YAAI,MAAM,EAAG,QAAO,KAAK,EAAE,OAAO,YAAY,GAAG,KAAK,IAAI;AAE1D,cAAM,MAAM,KAAK,IAAI;AACrB,cAAM,SAAS,EAAE,GAAG,KAAK,GAAG,GAAG,GAAG,SAAS,aAAa,IAAI;AAC5D,aAAK,GAAG,IAAI;AAEZ,cAAMA,KAAI,aAAa,IAAI,wBAAwB,KAAK,UAAU,IAAI,CAAC;AACvE,eAAO,KAAK,EAAE,QAAQ,OAAO,GAAG,KAAK,IAAI;AAAA,MAC3C,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,gBAAgB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC5E;AAAA,IACF;AAGA,QAAI,IAAI,SAAS,WAAW,WAAW,KAAK,QAAQ,WAAW,UAAU;AACvE,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,KAAK,mBAAmB,IAAI,SAAS,MAAM,GAAG,EAAE,CAAC,KAAK,EAAE;AAE9D,cAAM,OAAO,MAAMA,KAAI,aAAa,IAAI,wBAAwB,MAAM,KAAK,CAAC;AAC5E,cAAM,MAAM,KAAK,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;AAC7C,YAAI,OAAO,GAAG;AACZ,eAAK,OAAO,KAAK,CAAC;AAClB,gBAAMA,KAAI,aAAa,IAAI,wBAAwB,KAAK,UAAU,IAAI,CAAC;AAAA,QACzE;AAEA,eAAO,KAAK,EAAE,IAAI,KAAK,GAAG,KAAK,IAAI;AAAA,MACrC,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,gBAAgB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC5E;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,mBAAmB,QAAQ,WAAW,UAAU;AACnE,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,OAAO,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAClD,cAAM,MAAM,MAAM,QAAQ,KAAK,GAAG,IAAI,KAAK,MAAM,CAAC;AAElD,YAAI,CAAC,IAAI,OAAQ,QAAO,KAAK,EAAE,OAAO,kBAAkB,GAAG,KAAK,IAAI;AAEpE,YAAI,OAAO,MAAMA,KAAI,aAAa,IAAI,wBAAwB,MAAM,KAAK,CAAC;AAC1E,eAAO,KAAK,OAAO,OAAK,CAAC,IAAI,SAAS,EAAE,EAAE,CAAC;AAE3C,cAAMA,KAAI,aAAa,IAAI,wBAAwB,KAAK,UAAU,IAAI,CAAC;AACvE,eAAO,KAAK,EAAE,IAAI,MAAM,SAAS,IAAI,OAAO,GAAG,KAAK,IAAI;AAAA,MAC1D,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,qBAAqB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MACjF;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,oBAAoB,QAAQ,WAAW,OAAO;AACjE,aAAO,KAAK,EAAE,IAAI,MAAM,OAAO,CAAC,EAAE,GAAG,KAAK,IAAI;AAAA,IAChD;AAGA,QAAI,IAAI,aAAa,sBAAsB,QAAQ,WAAW,OAAO;AACnE,aAAO,KAAK,EAAE,IAAI,MAAM,SAAS,CAAC,EAAE,GAAG,KAAK,IAAI;AAAA,IAClD;AAGA,QAAI,IAAI,aAAa,YAAY,QAAQ,WAAW,OAAO;AACzD,YAAM,SAAS,MAAM,YAAYA,MAAK,aAAa;AACnD,YAAM,SAAS,MAAM,YAAYA,MAAK,aAAa;AACnD,aAAO;AAAA,QACL;AAAA,UACE,IAAI;AAAA,UACJ,MAAM,KAAK,IAAI;AAAA,UACf,QAAQ,EAAE,YAAY,OAAO,QAAQ,QAAQ,OAAO,OAAO;AAAA,QAC7D;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,aAAa,QAAQ,WAAW,OAAO;AAE1D,YAAM,OAAO,MAAM,YAAYA,MAAK,aAAa;AACjD,YAAM,MAAM,KAAK,IAAI;AACrB,UAAI,UAAU;AACd,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,cAAM,MAAM,KAAK,CAAC;AAClB,YAAI,OAAO,IAAI,SAAS,UAAU;AAChC,cAAI,OAAO;AAAA,YACT,OAAO,IAAI,gBAAgB,CAAC;AAAA,YAC5B,IAAI,kBAAkB;AAAA,YACtB,IAAI,aAAa;AAAA,YACjB;AAAA,UACF;AACA,oBAAU;AAAA,QACZ;AAAA,MACF;AACA,UAAI,QAAS,OAAM,YAAYA,MAAK,eAAe,IAAI;AAEvD,YAAM,OAAO,YAAY,IAAI;AAC7B,UAAI,QAAQ,QAAQ,IAAI,eAAe,MAAM,MAAM;AACjD,eAAO,IAAI,SAAS,MAAM,EAAE,QAAQ,KAAK,SAAS,EAAE,GAAG,MAAM,MAAM,KAAK,EAAE,CAAC;AAAA,MAC7E;AACA,aAAO,KAAK,EAAE,QAAQ,KAAK,GAAG,KAAK,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC;AAAA,IAC5D;AAEA,QAAI,IAAI,aAAa,aAAa,QAAQ,WAAW,QAAQ;AAC3D,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,OAAO,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAClD,cAAM,MAAM,KAAK,IAAI;AAErB,cAAM,YAAY,SAAS,KAAK,cAAc,EAAE;AAChD,cAAM,YAAY,SAAS,KAAK,cAAc,EAAE;AAChD,cAAM,KAAK,KAAK,GAAG,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC;AAE1D,cAAM,OAAO,MAAM,YAAYA,MAAK,aAAa;AACjD,cAAM,MAAM;AAAA,UACV;AAAA,UACA,OAAO,OAAO,KAAK,SAAS,EAAE;AAAA,UAC9B,UAAU,OAAO,KAAK,YAAY,EAAE;AAAA,UACpC,aAAa,OAAO,KAAK,eAAe,EAAE;AAAA,UAC1C,MAAM,OAAO,KAAK,QAAQ,MAAM;AAAA;AAAA,UAChC,MAAM,MAAM,QAAQ,KAAK,IAAI,IAAI,KAAK,OAAO,CAAC;AAAA,UAC9C,YAAY,OAAO,KAAK,cAAc,EAAE;AAAA,UACxC,YAAY,OAAO,KAAK,cAAc,EAAE;AAAA;AAAA,UAExC,SAAS,aAAa,aAAa;AAAA,UACnC,cAAc;AAAA,UACd,YAAY;AAAA,UACZ,gBAAgB;AAAA,UAChB,WAAW;AAAA,UACX,aAAa;AAAA;AAAA,UAEb,MAAM;AAAA,QACR;AACA,aAAK,KAAK,GAAG;AACb,cAAM,YAAYA,MAAK,eAAe,IAAI;AAC1C,eAAO,KAAK,EAAE,OAAO,IAAI,GAAG,KAAK,IAAI;AAAA,MACvC,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,cAAc,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC1E;AAAA,IACF;AAEA,QAAI,IAAI,SAAS,WAAW,UAAU,KAAK,QAAQ,WAAW,OAAO;AACnE,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,KAAK,mBAAmB,IAAI,SAAS,MAAM,GAAG,EAAE,CAAC,KAAK,EAAE;AAC9D,cAAM,UAAU,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAErD,cAAM,OAAO,MAAM,YAAYA,MAAK,aAAa;AACjD,cAAM,MAAM,KAAK,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;AAC7C,YAAI,MAAM,EAAG,QAAO,KAAK,EAAE,OAAO,YAAY,GAAG,KAAK,IAAI;AAE1D,cAAM,MAAM,KAAK,IAAI;AACrB,cAAM,SAAS,EAAE,GAAG,KAAK,GAAG,GAAG,GAAG,SAAS,aAAa,IAAI;AAC5D,cAAM,eAAe,SAAS,OAAO,cAAc,EAAE;AACrD,cAAM,eAAe,SAAS,OAAO,cAAc,EAAE;AAErD,eAAO,UAAU,gBAAgB,gBAAgB,OAAO,WAAW;AAGnE,eAAO,OAAO;AAAA,UACZ,OAAO,OAAO,gBAAgB,CAAC;AAAA,UAC/B,OAAO,kBAAkB;AAAA,UACzB,OAAO,aAAa;AAAA,UACpB;AAAA,QACF;AAEA,aAAK,GAAG,IAAI;AACZ,cAAM,YAAYA,MAAK,eAAe,IAAI;AAC1C,eAAO,KAAK,EAAE,OAAO,OAAO,GAAG,KAAK,IAAI;AAAA,MAC1C,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,gBAAgB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC5E;AAAA,IACF;AAEA,QAAI,IAAI,SAAS,WAAW,UAAU,KAAK,QAAQ,WAAW,UAAU;AACtE,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,KAAK,mBAAmB,IAAI,SAAS,MAAM,GAAG,EAAE,CAAC,KAAK,EAAE;AAC9D,cAAM,OAAO,MAAM,YAAYA,MAAK,aAAa;AACjD,cAAM,MAAM,KAAK,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;AAC7C,YAAI,OAAO,GAAG;AACZ,eAAK,OAAO,KAAK,CAAC;AAClB,gBAAM,YAAYA,MAAK,eAAe,IAAI;AAAA,QAC5C;AACA,eAAO,KAAK,EAAE,IAAI,KAAK,GAAG,KAAK,IAAI;AAAA,MACrC,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,gBAAgB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC5E;AAAA,IACF;AAIA,QAAI,IAAI,SAAS,WAAW,iBAAiB,KAAK,QAAQ,WAAW,QAAQ;AAC3E,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,UAAU,mBAAmB,IAAI,SAAS,MAAM,GAAG,EAAE,CAAC,KAAK,EAAE;AACnE,YAAI,CAAC,QAAS,QAAO,KAAK,EAAE,OAAO,kBAAkB,GAAG,KAAK,IAAI;AAEjE,cAAM,MAAM,KAAK,IAAI;AACrB,YAAI,UAAU;AAGd,cAAM,OAAO,MAAM,YAAYA,MAAK,aAAa;AACjD,iBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,cAAI,KAAK,CAAC,EAAE,YAAY,SAAS;AAC/B,kBAAM,IAAI,MAAM,kBAAkBA,MAAK,OAAO;AAC9C,gBAAI,KAAK,MAAM;AACb,mBAAK,CAAC,EAAE,eAAe;AACvB,mBAAK,CAAC,EAAE,iBAAiB;AACzB,mBAAK,CAAC,EAAE,aAAa;AACrB,mBAAK,CAAC,EAAE,cAAc;AAEtB,mBAAK,CAAC,EAAE,OAAO,YAAY,GAAG,KAAK,CAAC,EAAE,gBAAgB,KAAK,CAAC,EAAE,WAAW,GAAG;AAC5E;AAAA,YACF,OAAO;AACL,mBAAK,CAAC,EAAE,aAAa;AAAA,YACvB;AAAA,UACF;AAAA,QACF;AACA,YAAI,QAAS,OAAM,YAAYA,MAAK,eAAe,IAAI;AAGvD,cAAM,SAAS,MAAM,YAAYA,MAAK,aAAa;AACnD,YAAI,WAAW;AACf,iBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,cAAI,OAAO,CAAC,EAAE,YAAY,SAAS;AACjC,kBAAM,IAAI,MAAM,kBAAkBA,MAAK,OAAO;AAC9C,gBAAI,KAAK,MAAM;AACb,qBAAO,CAAC,EAAE,eAAe;AACzB,qBAAO,CAAC,EAAE,iBAAiB;AAC3B,qBAAO,CAAC,EAAE,cAAc;AACxB;AAAA,YACF;AAAA,UACF;AAAA,QACF;AACA,YAAI,SAAU,OAAM,YAAYA,MAAK,eAAe,MAAM;AAE1D,eAAO,KAAK,EAAE,IAAI,MAAM,SAAS,UAAU,SAAS,GAAG,KAAK,IAAI;AAAA,MAClE,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,iBAAiB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC7E;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,oBAAoB,QAAQ,WAAW,QAAQ;AAClE,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,MAAM,KAAK,IAAI;AAErB,cAAM,eAAe,8BAAO,KAAK,MAAM,OAAO;AAC5C,gBAAM,OAAO,MAAM,YAAYA,MAAK,GAAG;AACvC,cAAI,IAAI;AACR,mBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,kBAAM,MAAM,KAAK,CAAC;AAClB,kBAAM,MAAM,IAAI,WAAW,SAAS,IAAI,cAAc,EAAE;AACxD,gBAAI,CAAC,IAAK;AACV,gBAAI,CAAC,QAAQ,IAAI,gBAAgB,GAAG,EAAG;AAEvC,kBAAM,IAAI,MAAM,kBAAkBA,MAAK,GAAG;AAC1C,gBAAI,KAAK,MAAM;AACb,kBAAI,eAAe;AACnB,kBAAI,iBAAiB;AACrB,kBAAI,aAAa;AACjB,kBAAI,cAAc;AAElB,kBAAI,QAAQ,eAAe;AACzB,oBAAI,OAAO,YAAY,GAAG,IAAI,gBAAgB,IAAI,WAAW,GAAG;AAAA,cAClE;AACA;AAAA,YACF,OAAO;AACL,kBAAI,aAAa;AAAA,YACnB;AACA,gBAAI,KAAK,IAAK;AAAA,UAChB;AACA,cAAI,EAAG,OAAM,YAAYA,MAAK,KAAK,IAAI;AACvC,iBAAO;AAAA,QACT,GA3BqB;AA6BrB,cAAM,UAAU,MAAM,aAAa,eAAe,EAAE;AACpD,cAAM,UAAU,MAAM,aAAa,eAAe,EAAE;AACpD,eAAO,KAAK,EAAE,IAAI,MAAM,WAAW,EAAE,QAAQ,SAAS,YAAY,QAAQ,EAAE,GAAG,KAAK,IAAI;AAAA,MAC1F,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,sBAAsB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAClF;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,aAAa,QAAQ,WAAW,QAAQ;AAC3D,UAAI;AAEF,cAAM,QAAQ,gBAAgB,OAAO;AACrC,YAAI,CAAC,MAAO,QAAO,KAAK,EAAE,OAAO,gBAAgB,GAAG,KAAK,IAAI;AAC7D,cAAM,UAAU,MAAM,UAAU,OAAO,MAAM;AAE7C,cAAM,OAAO,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAClD,cAAM,aAAaA,KAAI,uBAAuB;AAE9C,YAAI,CAAC,YAAY;AACf,iBAAO,KAAK,EAAE,OAAO,sCAAsC,GAAG,KAAK,IAAI;AAAA,QACzE;AAEA,cAAME,WAAU,OAAO,KAAK,WAAW,oBAAoB;AAC3D,cAAM,OAAO,OAAO,KAAK,QAAQ,MAAM;AAGvC,cAAM,SAAS;AAAA,UACb,MAAM;AAAA;AAAA,UACN,QAAQ;AAAA;AAAA,UACR,QAAQ;AAAA;AAAA,QACV;AAEA,cAAM,iBAAiB;AAAA,UACrB,QAAQ,CAAC;AAAA,YACP,OAAO,wBAAwB,KAAK,YAAY,CAAC;AAAA,YACjD,aAAaA;AAAA,YACb,OAAO,OAAO,IAAI,KAAK;AAAA,YACvB,QAAQ;AAAA,cACN,MAAM,SAAS,QAAQ,KAAK,KAAK,QAAQ,IAAI;AAAA,YAC/C;AAAA,YACA,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,UACpC,CAAC;AAAA,QACH;AAEA,cAAM,UAAU,MAAM,MAAM,YAAY;AAAA,UACtC,QAAQ;AAAA,UACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,UAC9C,MAAM,KAAK,UAAU,cAAc;AAAA,QACrC,CAAC;AAED,YAAI,CAAC,QAAQ,IAAI;AACf,iBAAO,KAAK,EAAE,OAAO,4BAA4B,GAAG,KAAK,IAAI;AAAA,QAC/D;AAEA,eAAO,KAAK,EAAE,IAAI,KAAK,GAAG,KAAK,IAAI;AAAA,MAErC,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,sBAAsB,GAAG,KAAK,IAAI;AAAA,MACtE;AAAA,IACF;AAIA,QAAI,IAAI,aAAa,iBAAiB,QAAQ,WAAW,OAAO;AAC9D,YAAM,OAAO,MAAM,YAAYF,MAAK,aAAa;AAEjD,YAAM,OAAO,YAAY,IAAI;AAC7B,UAAI,QAAQ,QAAQ,IAAI,eAAe,MAAM,MAAM;AACjD,eAAO,IAAI,SAAS,MAAM,EAAE,QAAQ,KAAK,SAAS,EAAE,GAAG,MAAM,MAAM,KAAK,EAAE,CAAC;AAAA,MAC7E;AAEA,aAAO,KAAK,EAAE,YAAY,KAAK,GAAG,KAAK,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC;AAAA,IAChE;AAIA,QAAI,IAAI,aAAa,iBAAiB,QAAQ,WAAW,QAAQ;AAC/D,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,OAAO,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAClD,cAAM,MAAM,KAAK,IAAI;AAErB,cAAM,OAAO,MAAM,YAAYA,MAAK,aAAa;AACjD,cAAM,KAAK,KAAK,GAAG,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC;AAE1D,cAAM,cAAc,SAAS,KAAK,cAAc,EAAE;AAElD,cAAM,MAAM;AAAA,UACV;AAAA,UACA,UAAU,OAAO,KAAK,YAAY,EAAE;AAAA,UACpC,YAAY,OAAO,KAAK,cAAc,EAAE;AAAA,UACxC,UAAU,OAAO,KAAK,YAAY,OAAO;AAAA,UACzC,aAAa,OAAO,KAAK,eAAe,EAAE;AAAA,UAC1C,SAAS,OAAO,KAAK,WAAW,OAAO;AAAA,UACvC,UAAU,OAAO,KAAK,YAAY,EAAE;AAAA,UACpC,SAAS,KAAK,WAAW,eAAe;AAAA,UACxC,cAAc,OAAO,KAAK,gBAAgB,CAAC;AAAA,UAC3C,YAAY,KAAK,cAAc;AAAA,UAC/B,gBAAgB,KAAK,kBAAkB;AAAA,UACvC,WAAW;AAAA,UACX,aAAa;AAAA,QACf;AAEA,aAAK,KAAK,GAAG;AACb,cAAM,YAAYA,MAAK,eAAe,IAAI;AAC1C,eAAO,KAAK,EAAE,WAAW,IAAI,GAAG,KAAK,IAAI;AAAA,MAC3C,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,cAAc,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC1E;AAAA,IACF;AAEA,QAAI,IAAI,SAAS,WAAW,cAAc,KAAK,QAAQ,WAAW,OAAO;AACvE,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,KAAK,mBAAmB,IAAI,SAAS,MAAM,GAAG,EAAE,CAAC,KAAK,EAAE;AAC9D,cAAM,UAAU,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAErD,cAAM,OAAO,MAAM,YAAYA,MAAK,aAAa;AACjD,cAAM,MAAM,KAAK,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;AAC7C,YAAI,MAAM,EAAG,QAAO,KAAK,EAAE,OAAO,YAAY,GAAG,KAAK,IAAI;AAE1D,cAAM,MAAM,KAAK,IAAI;AACrB,cAAM,SAAS,EAAE,GAAG,KAAK,GAAG,GAAG,GAAG,SAAS,aAAa,IAAI;AAC5D,aAAK,GAAG,IAAI;AAEZ,cAAM,YAAYA,MAAK,eAAe,IAAI;AAC1C,eAAO,KAAK,EAAE,WAAW,OAAO,GAAG,KAAK,IAAI;AAAA,MAC9C,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,gBAAgB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC5E;AAAA,IACF;AAEA,QAAI,IAAI,SAAS,WAAW,cAAc,KAAK,QAAQ,WAAW,UAAU;AAC1E,UAAI;AACF,cAAM,mBAAmB,SAAS,MAAM;AACxC,cAAM,KAAK,mBAAmB,IAAI,SAAS,MAAM,GAAG,EAAE,CAAC,KAAK,EAAE;AAE9D,cAAM,OAAO,MAAM,YAAYA,MAAK,aAAa;AACjD,cAAM,MAAM,KAAK,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;AAC7C,YAAI,OAAO,GAAG;AACZ,eAAK,OAAO,KAAK,CAAC;AAClB,gBAAM,YAAYA,MAAK,eAAe,IAAI;AAAA,QAC5C;AAEA,eAAO,KAAK,EAAE,IAAI,KAAK,GAAG,KAAK,IAAI;AAAA,MACrC,SAAS,GAAG;AACV,eAAO,KAAK,EAAE,OAAO,EAAE,WAAW,gBAAgB,GAAG,EAAE,UAAU,KAAK,IAAI;AAAA,MAC5E;AAAA,IACF;AAGA,WAAO,KAAK,EAAE,OAAO,YAAY,GAAG,KAAK,IAAI;AAAA,EAC/C;AACF;",
  "names": ["PerformanceMark", "clear", "count", "countReset", "createTask", "debug", "dir", "dirxml", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "profile", "profileEnd", "table", "time", "timeEnd", "timeLog", "timeStamp", "trace", "warn", "hrtime", "dir", "env", "count", "cwd", "hrtime", "assert", "callback", "nextTick", "salt", "hash", "off", "err", "encodeBase64", "decodeBase64", "decodeBase64", "encodeBase64", "message", "message", "hash", "hash", "hash", "env", "clear", "message"]
}
